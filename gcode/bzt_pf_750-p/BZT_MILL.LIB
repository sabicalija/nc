* Need compiler "loadfdll.dll" dated 10-21-2013 or later to use this library file. To find the modified date
* for the "loadfdll.dll" right mouse click on that file and select "Properties" and then select the "Details" tab
* Now look for Date Modified.
* You can download latest "loadfdll.dll" from Geometric website in the post source area under compilers.
* Just copy the new compiler over the current "loadfdll.dll" in your installed UPG directory.
*
* In section = CALC_POST_INITIALIZE and new section = CALC_PRE_POST_INITIALIZE we are setting the below post variables for library version number.
* When you post you will get to CALC_PRE_POST_INITIALIZE before any other CALC section.
* POST_LIBRARY_VERSION=2015
* POST_LIBRARY_SUBVERSION=1 - before 11-18-2014
* POST_LIBRARY_VERSION=2014
* POST_LIBRARY_SUBVERSION=6 - 8-28-2014 - You will need a new MASTER.ATR file to use this library
* POST_LIBRARY_SUBVERSION=5 - 8-20-2014
* POST_LIBRARY_SUBVERSION=4 - 5-05-2014
* POST_LIBRARY_SUBVERSION=3 - 5-01-2014
* POST_LIBRARY_SUBVERSION=2 - 4-21-2014
* POST_LIBRARY_SUBVERSION=1 - before 4-21-2014
*
*******
******* See section "MODIFICATIONS" at end of this file
*
*----------------------------------------------------------
* Define Special Mill Definitions
*----------------------------------------------------------
:DEFINE TOOL_CHANGE=-1
*----------------------------------------------------------
* General Definitions
*----------------------------------------------------------
:DEFINE RAPID_Z_UP=8
:DEFINE RAPID_Z_DOWN=9
:DEFINE FEED_Z_DOWN=10
*----------------------------------------------------------
* Define G CODE Definitions
*----------------------------------------------------------
:DEFINE G_RAPID=0
:DEFINE G_LINE=1
:DEFINE G_CW_ARC=2
:DEFINE G_CCW_ARC=3
:DEFINE G_ABS=4
:DEFINE G_INC=5
:DEFINE G_COMP_OFF=6
:DEFINE G_COMP_LEFT=7
:DEFINE G_COMP_RIGHT=8
:DEFINE G_ENGLISH=9
:DEFINE G_METRIC=10
:DEFINE G_DWELL=11
:DEFINE G_LEN_COMP=12
:DEFINE G_LEN_CANCEL=13
:DEFINE G_XY_PLANE=14
:DEFINE G_ZX_PLANE=15
:DEFINE G_YZ_PLANE=16
:DEFINE G_HOME=17
:DEFINE G_WORK_1=18
:DEFINE G_WORK_2=19
:DEFINE G_WORK_3=20
:DEFINE G_WORK_4=21
:DEFINE G_WORK_5=22
:DEFINE G_WORK_6=23
:DEFINE G_VARIABLE_PECK=24
:DEFINE G_HIGH_PECK=25
:DEFINE G_REVERSE_TAP=26
:DEFINE G_FINE_BORE=27
:DEFINE G_CANCEL_CYC=28
:DEFINE G_DRILL=29
:DEFINE G_SPOT_DRILL=30
:DEFINE G_PECK=31
:DEFINE G_TAP=32
:DEFINE G_REAM=33
:DEFINE G_BORE=34
:DEFINE G_BACK_BORE=35
:DEFINE G_BORE_DWELL=36
:DEFINE G_REAM_DWELL=37
:DEFINE G_PRESET=38
:DEFINE G_INIT_PLANE=39
:DEFINE G_R_PLANE=40
:DEFINE G_BOLT_HOLE=41
:DEFINE G_CAN_PRESET=42
:DEFINE G_FPR=43
:DEFINE G_FPM=44
:DEFINE G_REPEAT=45
:DEFINE G_ROTATE_ON=46
:DEFINE G_ROTATE_OFF=47
:DEFINE G_QUAD_ON=48
:DEFINE G_QUAD_OFF=49
:DEFINE G_DECEL=50
:DEFINE G_CONT_ON=51
:DEFINE G_CONT_OFF=52
:DEFINE G_FORM_ON=53
:DEFINE G_FORM_OFF=54
:DEFINE G_RIGID_ON=55
:DEFINE G_RIGID_OFF=56
:DEFINE G_DAN_OFF=57
:DEFINE G_DAN_LEFT=58
:DEFINE G_DAN_RIGHT=59
:DEFINE G_EXACT_STOP=60
:DEFINE G_REVERSE_FR=61
*
:DEFINE G_WORK_7=97
:DEFINE G_WORK_8=98
:DEFINE G_WORK_9=99
:DEFINE G_WORK_10=100
:DEFINE G_WORK_11=101
:DEFINE G_WORK_12=102
:DEFINE G_WORK_13=103
:DEFINE G_WORK_14=104
:DEFINE G_WORK_15=105
:DEFINE G_WORK_16=106
:DEFINE G_WORK_17=107
:DEFINE G_WORK_18=108
:DEFINE G_WORK_19=109
:DEFINE G_WORK_20=110
:DEFINE G_WORK_21=111
:DEFINE G_WORK_22=112
:DEFINE G_WORK_23=113
:DEFINE G_WORK_24=114
:DEFINE G_WORK_25=115
:DEFINE G_WORK_26=116
:DEFINE G_WORK_27=117
:DEFINE G_WORK_28=118
:DEFINE G_WORK_29=119
:DEFINE G_WORK_30=120
:DEFINE G_WORK_31=121
:DEFINE G_WORK_32=122
:DEFINE G_WORK_33=123
:DEFINE G_WORK_34=124
:DEFINE G_WORK_35=125
:DEFINE G_WORK_36=126
:DEFINE G_WORK_37=127
:DEFINE G_WORK_38=128
:DEFINE G_WORK_39=129
:DEFINE G_WORK_40=130
:DEFINE G_WORK_41=131
:DEFINE G_WORK_42=132
:DEFINE G_WORK_43=133
:DEFINE G_WORK_44=134
:DEFINE G_WORK_45=135
:DEFINE G_WORK_46=136
:DEFINE G_WORK_47=137
:DEFINE G_WORK_48=138
:DEFINE G_WORK_49=139
:DEFINE G_WORK_50=140
:DEFINE G_WORK_51=141
:DEFINE G_WORK_52=142
:DEFINE G_WORK_53=143
:DEFINE G_WORK_54=144
:DEFINE G_WORK_55=145
:DEFINE G_WORK_56=146
:DEFINE G_WORK_57=147
:DEFINE G_WORK_58=148
:DEFINE G_WORK_59=149
:DEFINE G_WORK_60=150
:DEFINE G_WORK_61=151
:DEFINE G_WORK_62=152
:DEFINE G_WORK_63=153
:DEFINE G_WORK_64=154
:DEFINE G_WORK_65=155
:DEFINE G_WORK_66=156
:DEFINE G_WORK_67=157
:DEFINE G_WORK_68=158
:DEFINE G_WORK_69=159
:DEFINE G_WORK_70=160
:DEFINE G_WORK_71=161
:DEFINE G_WORK_72=162
:DEFINE G_WORK_73=163
:DEFINE G_WORK_74=164
:DEFINE G_WORK_75=165
:DEFINE G_WORK_76=166
:DEFINE G_WORK_77=167
:DEFINE G_WORK_78=168
:DEFINE G_WORK_79=169
:DEFINE G_WORK_80=170
:DEFINE G_WORK_81=171
:DEFINE G_WORK_82=172
:DEFINE G_WORK_83=173
:DEFINE G_WORK_84=174
:DEFINE G_WORK_85=175
:DEFINE G_WORK_86=176
:DEFINE G_WORK_87=177
:DEFINE G_WORK_88=178
:DEFINE G_WORK_89=179
:DEFINE G_WORK_90=180
:DEFINE G_WORK_91=181
:DEFINE G_WORK_92=182
:DEFINE G_WORK_93=183
:DEFINE G_WORK_94=184
:DEFINE G_WORK_95=185
:DEFINE G_WORK_96=186
:DEFINE G_WORK_97=187
:DEFINE G_WORK_98=188
:DEFINE G_WORK_99=189
:DEFINE G_WORK_100=190
:DEFINE G_WORK_101=191
:DEFINE G_WORK_102=192
:DEFINE G_WORK_103=193
:DEFINE G_WORK_104=194
:DEFINE G_WORK_105=195
:DEFINE G_WORK_106=196
:DEFINE G_WORK_107=197
:DEFINE G_WORK_108=198
:DEFINE G_WORK_109=199
:DEFINE G_WORK_110=200
*----------------------------------------------------------
* Define M CODE Definitions
*----------------------------------------------------------
:DEFINE M_STOP=0
:DEFINE M_OPT_STOP=1
:DEFINE M_PROG_END=2
:DEFINE M_SPIN_CW=3
:DEFINE M_SPIN_CCW=4
:DEFINE M_SPIN_STOP=5
:DEFINE M_TOOL_CHANGE=6
:DEFINE M_COOL_MIST=7
:DEFINE M_COOL_FLOOD=8
:DEFINE M_COOL_OFF=9
:DEFINE M_ORIENT=10
:DEFINE M_END_PROG=11
:DEFINE M_SUB_CALL=12
:DEFINE M_SUB_END=13
:DEFINE M_SUB_START=14
:DEFINE M_SKIP=15
:DEFINE M_SETUP=16
:DEFINE M_REPEAT_END=17
:DEFINE M_SUB=18
:DEFINE M_ARM_UP=19
:DEFINE M_ARM_DOWN=20
:DEFINE M_COOL_THRU=21
:DEFINE M_TOOL_CHANGE_2=22
:DEFINE M_ENGLISH=23
:DEFINE M_METRIC=24
:DEFINE M_PARTIAL_ARC=25
:DEFINE M_HOME=26
:DEFINE M_CW_FLOOD=27
:DEFINE M_CCW_FLOOD=28
:DEFINE M_CW_MIST=29
:DEFINE M_CCW_MIST=30
:DEFINE M_CW_THRU=31
:DEFINE M_CCW_THRU=32
:DEFINE M_SPIN_AUTO=33
:DEFINE M_SPIN_LOW=34
:DEFINE M_SPIN_HI=35
:DEFINE M_INIT_PLANE=36
:DEFINE M_R_PLANE=37
:DEFINE M_VAC_ON=38
:DEFINE M_VAC_OFF=39
:DEFINE M_LOCK_ON=40
:DEFINE M_LOCK_OFF=41
:DEFINE M_DRESS_ON=42
:DEFINE M_DRESS_OFF=43
:DEFINE M_WIPE_ON=44
:DEFINE M_WIPE_OFF=45
:DEFINE M_HEAD_UP=46
:DEFINE M_HEAD_DOWN=47
:DEFINE M_AIR_ON=48
:DEFINE M_AIR_OFF=49
:DEFINE M_RIGID_ON=50
:DEFINE M_RIGID_OFF=51
:DEFINE M_OILMODE=52
:DEFINE M_MOM_OFF=53
:DEFINE M_OILMODE_CAN=54
:DEFINE M_SPIN_MED=55
:DEFINE M_COOL_NIAG=56
:DEFINE M_WORLD_COORD_ON=57
:DEFINE M_WORLD_COORD_OFF=58
*----------------------------------------------------------
* Define REGISTER Definitions
*----------------------------------------------------------
:DEFINE REG_A=1
:DEFINE REG_B=2
:DEFINE REG_C=3
:DEFINE REG_D=4
:DEFINE REG_E=5
:DEFINE REG_F=6
:DEFINE REG_G=7
:DEFINE REG_H=8
:DEFINE REG_I=9
:DEFINE REG_J=10
:DEFINE REG_K=11
:DEFINE REG_L=12
:DEFINE REG_M=13
:DEFINE REG_N=14
:DEFINE REG_O=15
:DEFINE REG_P=16
:DEFINE REG_Q=17
:DEFINE REG_R=18
:DEFINE REG_S=19
:DEFINE REG_T=20
:DEFINE REG_U=21
:DEFINE REG_V=22
:DEFINE REG_W=23
:DEFINE REG_X=24
:DEFINE REG_Y=25
:DEFINE REG_Z=26
*
:DEFINE REG_T2=27
:DEFINE REG_VI=28
:DEFINE REG_VJ=29
:DEFINE REG_VK=30
*
* this is for using FIXTURE for MCS_TYPE=1 CW2013 - "fixture_offset"
:DEFINE REG_FC=31
*
*
******** rotate table and tilt head  about x-axis
*
:DEFINE RT_THX=6
*
******** rotate table and tilt head  about y-axis
*
:DEFINE RT_THY=18
*
******** rotate table and tilt table about x-axis
******** for 4thaxis rotation use this for rotate x-axis
******** "A" axis is being held on 4thaxis
*
:DEFINE RT_TTX=10
*
******** rotate table and tilt table about y-axis
******** for 4thaxis rotation use this for rotate y-axis
******** "A" axis is being held on 4thaxis
*
:DEFINE RT_TTY=34
*
******** rotate arm about and tilt head about
*
:DEFINE RA_THX=11
*
******** rotate table about y-axis and rotate table about x-axis
*
:DEFINE RTY_RTX=35
*----------------------------------------------------------
* Define ERROR Code Definitions
*----------------------------------------------------------
:DEFINE NO_START_OF_TAPE=0
:DEFINE NO_LINE_MOVE_MILL=1
:DEFINE NO_ARC_MOVE_MILL=2
:DEFINE NO_RAPID_MOVE_MILL=3
:DEFINE NO_INIT_TOOL_CHANGE_MILL=4
:DEFINE NO_SUB_TOOL_CHANGE_MILL=5
:DEFINE NO_BEG_MACRO_MILL=6
:DEFINE NO_END_MACRO_MILL=7
:DEFINE NO_MACRO_CALL_MILL=8
:DEFINE NO_RAPID_Z_MOVE_DOWN_MILL=9
:DEFINE NO_RAPID_Z_MOVE_UP_MILL=10
:DEFINE NO_FEED_Z_MOVE_DOWN_MILL=11
:DEFINE NO_SINGLE_DRILL_MILL=12
:DEFINE THREE_AXIS=3333
:DEFINE FIVE_AXIS=2222
:DEFINE 4AXIS_X=4444
:DEFINE 4AXIS_Y=5555
*----------------------------------------------------------
* Define SETUP Attributes
*----------------------------------------------------------
:ATTRNAME=program number
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Program Number
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Program number
:ATTRLONG=ENTER Program number
:ATTRHIGH=9999
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=long program number
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Program Number
:ATTRSEL=N
:ATTRINLEN=8
:ATTRSHORT=Program number
:ATTRLONG=ENTER Program number
:ATTRHIGH=99999999
:ATTRLOW=1
:CODETYPE=FORMAT
:ATTRDEFAULT=1
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
:ATTRNAME=program id
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Program Number
:ATTRSEL=N
:ATTRINLEN=8
:ATTRSHORT=Program Name
:ATTRLONG=ENTER Program Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=material
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Material
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Material
:ATTRLONG=ENTER Material Type
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=part number
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Part Number
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Part Number
:ATTRLONG=ENTER Part Number
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=job name
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Part Name
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Part Name
:ATTRLONG=ENTER Part Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=company name
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Customer Name
:ATTRSEL=N
:ATTRINLEN=60
:ATTRSHORT=Customer Name
:ATTRLONG=ENTER Customer Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=programmer
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Programmer
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Programmer
:ATTRLONG=ENTER Programmer
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=operation description
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Operation Number
:ATTRSEL=N
:ATTRINLEN=60
:ATTRSHORT=Operation Number
:ATTRLONG=ENTER Operation Number
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=date
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Date
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Date
:ATTRLONG=ENTER Date
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=revision
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Revision
:ATTRSEL=N
:ATTRINLEN=100
:ATTRSHORT=Revision
:ATTRLONG=ENTER Revision
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=thickness
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Part Thickness
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Part Thickness
:ATTRLONG=ENTER Part Thickness
:ATTRHIGH=999.9999
:ATTRLOW=0
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=init abs inc
:ATTRTYPE=SELECT
:ATTREMARK=G90-G91
:ATTRSEL=N
:ATTRTITLE=Absolute Incremental
:ATTRSELSTR=Absolute
:ATTRSELSTR=Incremental
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x tool change position
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Tool Change
:ATTRLONG=ENTER X Tool Change Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x tool change
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Tool Change
:ATTRLONG=ENTER X Tool Change Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y tool change position
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Y Tool Change
:ATTRLONG=ENTER Y Tool Change Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y tool change
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Y Tool Change
:ATTRLONG=ENTER Y Tool Change Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=z tool change
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Tool Change
:ATTRLONG=ENTER Z Tool Change Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x probe position
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Probe
:ATTRLONG=ENTER X Probe Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y probe position
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Tool change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Y Probe
:ATTRLONG=ENTER Y Probe Position
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=shift amount
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Shift Amount
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Shift Amount
:ATTRLONG=ENTER Shift Amount
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.01
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x shift
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Shift Amount
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=I Shift Amount
:ATTRLONG=ENTER I Shift Amount
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.01
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y shift
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Shift Amount
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=J Shift Amount
:ATTRLONG=ENTER J Shift Amount
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.01
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset
:ATTRLONG=ENTER X Preset
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Preset
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Y Preset
:ATTRLONG=ENTER Y Preset
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=chord length
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Chord Length
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Arc Chord Length
:ATTRLONG=ENTER Arc Chord Length
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.01
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=x included angle
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=5 axis "X Included Angle"
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=5 Axis "X" Included Angle
:ATTRLONG=ENTER 5 Axis "X" Included Angle
:ATTRHIGH=360
:ATTRLOW=-360
:CODETYPE=FORMAT
:ATTRDEFAULT=180
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=y included angle
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=5 axis "Y Included Angle"
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=5 Axis "Y" Included Angle
:ATTRLONG=ENTER 5 Axis "Y" Included Angle
:ATTRHIGH=360
:ATTRLOW=-360
:CODETYPE=FORMAT
:ATTRDEFAULT=180
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=limit axis
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Limit Axis
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=wrap x
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Wrap X
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=wrap y
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Wrap Y
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=vector comp
:ATTRTYPE=SELECT
:ATTREMARK=Vector Compensation
:ATTRSEL=N
:ATTRTITLE=Vector Compensation
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=tape output
:ATTRTYPE=SELECT
:ATTREMARK=Program/Optional Stop
:ATTRSEL=N
:ATTRTITLE=Program/Optional Stop
:ATTRSELSTR=Program Stop
:ATTRSELSTR=Optional Stop
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define ATTACHABLE Attributes
*----------------------------------------------------------
:ATTRNAME=program stop
:ATTRTYPE=DISPLAY
:ATTREMARK=Program stop M00
:ATTRSEL=Y
:ATTRTEXT=
:ATTRFUNC=program_stop
:CODETYPE=HARDCODE
:CODE=|M00
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=optional stop
:ATTRTYPE=DISPLAY
:ATTREMARK=Optional stop M01
:ATTRSEL=Y
:ATTRTEXT=
:ATTRFUNC=optional_stop
:CODETYPE=HARDCODE
:CODE=|M01
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=feedrate
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Feedrate
:ATTRLONG=ENTER Feedrate
:ATTRHIGH=.999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=arc feedrate
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Arc Feedrate
:ATTRLONG=ENTER Arc Feedrate
:ATTRHIGH=999.99
:ATTRLOW=0
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=dwell
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Dwell
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Dwell
:ATTRLONG=ENTER Dwell
:ATTRHIGH=9999
:ATTRLOW=0
:CODETYPE=FORMAT
:ATTRDEFAULT=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=machine compensation
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Compensation
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRSELSTR=Left
:ATTRSELSTR=Right
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=plane selection
:ATTRTYPE=SELECT
:ATTREMARK=Plane Selection
:ATTRSEL=N
:ATTRTITLE=Plane Selection G17 - G19
:ATTRSELSTR=G17
:ATTRSELSTR=G18
:ATTRSELSTR=G19
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=rigid tap
:ATTRTYPE=SELECT
:ATTRVTYPE=INTEGER
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Rigid Tap On or Off
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=exact stop
:ATTRTYPE=SELECT
:ATTRVTYPE=INTEGER
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Exact Stop On or Off
:ATTRSELSTR=Off
:ATTRSELSTR=On
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=using work coord
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Use Work Coord Sub. Call
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=work coord
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Work Coordinate 54 - 59
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Work Coordinate 54 - 59
:ATTRLONG=ENTER Work Coordinate 54 - 59
:ATTRHIGH=59
:ATTRLOW=54
:ATTRDEFAULT=54
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=sub work coord
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Sub Work Coordinate 1 - 100
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Sub Work Coordinate 1 - 100
:ATTRLONG=ENTER Sub Work Coordinate 1 - 100
:ATTRHIGH=100
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=coolant
:ATTRTYPE=SELECT
:ATTREMARK=Coolant M08, M09
:ATTRSEL=N
:ATTRTITLE=Coolant
:ATTRSELSTR=Off
:ATTRSELSTR=Flood
:ATTRSELSTR=Mist
:ATTRSELSTR=Through Hole
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=abs inc
:ATTRTYPE=SELECT
:ATTREMARK=G90-G91
:ATTRSEL=N
:ATTRTITLE=Absolute Incremental
:ATTRSELSTR=Absolute
:ATTRSELSTR=Incremental
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=fixture offset
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Fixture Offset
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Fixture Offset
:ATTRLONG=ENTER Fixture Offset
:ATTRHIGH=16
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=d offset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=D Offset
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=D Offset
:ATTRLONG=ENTER D Offset
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=d offset reg
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=D Offset
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=D Offset
:ATTRLONG=ENTER D Offset
:ATTRHIGH=99
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=display tool offset
:ATTRTYPE=SELECT
:ATTREMARK=Yes or No
:ATTRSEL=N
:ATTRTITLE=Display Tool Offset
:ATTRSELSTR=Yes
:ATTRSELSTR=No
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=high pressure tapping
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=High Pressure Tapping
:ATTRSELSTR=Off
:ATTRSELSTR=On
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=spindle code
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Code
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Spindle Code
:ATTRLONG=ENTER Spindle Code
:ATTRHIGH=999
:ATTRLOW=0
:ATTRDEFAULT=39
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=spindle range
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Range
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Spindle Range
:ATTRLONG=ENTER Spindle Range
:ATTRHIGH=99
:ATTRLOW=1
:ATTRDEFAULT=41
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=max arc dev
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=5axis Arc Deviation
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=5axis Arc Deviation
:ATTRLONG=ENTER 5axis Arc Deviation
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.001
:ATTRUSED=1
:ATTREND
************************************
* this is for the multiaxis operations
*-----------------------------------
:ATTRNAME=angle change limit
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Angle Change Limit
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Angle Change Limit
:ATTRLONG=ENTER Angle Change Limit
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=120
:CODETYPE=FORMAT
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=interpolation angle step
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Interpolation Angle Step
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Interpolation Angle Step
:ATTRLONG=ENTER Interpolation Angle Step
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=3
:CODETYPE=FORMAT
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=interpolation distance
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Interpolation Distance
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Interpolation Distance
:ATTRLONG=ENTER Interpolation Distance
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.1968504
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=tool retract distance
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Tool Retract Distance
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Tool Retract Distance
:ATTRLONG=ENTER Tool Retract Distance
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=3.9370079
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=pole angle tolerance
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Pole Angle Tolerance
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Pole Angle Tolerance
:ATTRLONG=ENTER Pole Angle Tolerance
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.57
:CODETYPE=FORMAT
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=auto angle pair
:ATTRTYPE=SELECT
:ATTREMARK=Auto Angle Pair
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Auto Angle Pair
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=other angle pair
:ATTRTYPE=SELECT
:ATTREMARK=Other Angle Pair
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Other Angle Pair
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=using int distance
:ATTRTYPE=SELECT
:ATTREMARK=Interpolation For Distance
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Interpolation For Distance
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=use machine limits
:ATTRTYPE=SELECT
:ATTREMARK=Using Machine Limits
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Using Machine Limits
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=multiaxis best solution
:ATTRTYPE=SELECT
:ATTREMARK=Best Rotary Axis Solution
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Best Rotary Axis Solution
:ATTRSELSTR=Auto
:ATTRSELSTR=4th Axis Rotary Angle
:ATTRSELSTR=5th Axis Rotary Angle
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=multiaxis rotary angle
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Best Solution Rotary Angle
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Best Solution Rotary Angle
:ATTRLONG=ENTER Best Solution Rotary Angle
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=0
:CODETYPE=FORMAT
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=preposition best solution
:ATTRTYPE=SELECT
:ATTREMARK=Best Preposition Solution
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Best Preposition Solution
:ATTRSELSTR=Auto
:ATTRSELSTR=4th Axis Preposition Angle
:ATTRSELSTR=5th Axis Preposition Angle
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=pole handling
:ATTRTYPE=SELECT
:ATTREMARK=Pole Handling
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Pole Handling
:ATTRSELSTR=Freeze Angle Around Pole
:ATTRSELSTR=Use Rotation Angle Around Pole
:ATTRSELSTR=Linear Interpolation
:ATTRSELSTR=Smooth Interpolation
:ATTRSELSTR=Force Head and Table Rotation
:ATTRDEFAULT=4
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=auto pole angle
:ATTRTYPE=SELECT
:ATTREMARK=Auto Pole Handling
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Auto Pole Handling
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=interpolation type
:ATTRTYPE=SELECT
:ATTREMARK=Interpolation Type
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Interpolation Type
:ATTRSELSTR=By Vector
:ATTRSELSTR=By Machine Angle
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=retract and rewind
:ATTRTYPE=SELECT
:ATTREMARK=Retract and Rewind
:ATTRVTYPE=INTEGER
:ATTRSEL=N
:ATTRTITLE=Retract and Rewind
:ATTRSELSTR=False
:ATTRSELSTR=True
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=rewind angle
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Rewind Angle
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Rewind Angle
:ATTRLONG=ENTER Rewind Angle
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=10
:CODETYPE=FORMAT
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
************************************
*-----------------------------------
:ATTRNAME=world coordinate
:ATTRTYPE=SELECT
:ATTREMARK=Using World Coordinates
:ATTRSEL=N
:ATTRTITLE=Using World Coordinates
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
* Define G + M code Tables
*----------------------------------------------------------
*-----------------------------------
:ATTRNAME=GC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Codes
:ATTREND
*-----------------------------------
:ATTRNAME=GG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Registers
:ATTREND
*-----------------------------------
:ATTRNAME=GM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Modal
:ATTREND
*-----------------------------------
:ATTRNAME=G GROUP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=15
:ATTREMARK=G GROUP
:ATTREND
*-----------------------------------
:ATTRNAME=MC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=60
:ATTREMARK=M Codes
:ATTREND
*-----------------------------------
:ATTRNAME=MG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=60
:ATTREMARK=M Registers
:ATTREND
*-----------------------------------
:ATTRNAME=MM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=60
:ATTREMARK=M Modal
:ATTREND
*-----------------------------------
:ATTRNAME=M GROUP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=20
:ATTREMARK=M GROUP
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define MACHine Registers
*----------------------------------------------------------
:ATTRNAME=MACH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=35
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=PREV
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=35
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=LAST G
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Last G Code
:ATTREND
*-----------------------------------
:ATTRNAME=ABSINC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Absolute or Incremental
:ATTREND
*-----------------------------------
:ATTRNAME=FIRST TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=LAST TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=CALC CHANGE TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=COOLANT TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Coolant Type
:ATTREND
*-----------------------------------
:ATTRNAME=ARC DIR
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Arc Direction
:ATTREND
*-----------------------------------
:ATTRNAME=ENGMET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=English or Metric
:ATTREND
*-----------------------------------
:ATTRNAME=POT NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Pot Number Mori seiki
:ATTREND
*-----------------------------------
:ATTRNAME=NEXT POT NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Next Pot Number Mori seiki
:ATTREND
*-----------------------------------
:ATTRNAME=LARGE POT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=R PLANE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=PRELOAD LAST
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Preload last tool
:ATTREND
*-----------------------------------
:ATTRNAME=LAST PRELOAD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Last Preload tool
:ATTREND
*-----------------------------------
:ATTRNAME=END OF TAPE PRELOAD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Preload last tool
:ATTREND
*-----------------------------------
:ATTRNAME=PLANE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Plane Initial or Rapid
:ATTREND
*-----------------------------------
:ATTRNAME=S RANGE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Range
:ATTREND
*-----------------------------------
:ATTRNAME=SPINDLE DIR
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Direction
:ATTREND
*-----------------------------------
:ATTRNAME=SPINDLE COOLANT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle and Coolant
:ATTREND
*-----------------------------------
:ATTRNAME=MAX SEQUENCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=MAX ARC RADIUS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=NUM PECKS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=DEC PECKS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ARM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Arm position ge1050
:ATTREND
*-----------------------------------
:ATTRNAME=AIC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=100
:ATTREMARK=Tool Array
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL DIAM ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=100
:ATTREMARK=Tool Diam Array
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL LENGTH ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=100
:ATTREMARK=Tool Length Array
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL TYPE ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=100
:ATTREMARK=Tool Type Array
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL COMM ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=CHARACTER
:ATTRINLEN=260
:ATTRVCNT=100
:ATTREMARK=Tool Comment Array
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL CORNER RADIUS ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=100
:ATTREMARK=Tool Corner Radius Array
:ATTREND
*-----------------------------------
:ATTRNAME=OPER COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Dummy Count
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL CHANGE COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Change Count
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Count
:ATTREND
*-----------------------------------
:ATTRNAME=ARRAY COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Array Count
:ATTREND
*-----------------------------------
:ATTRNAME=NEXT TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=COMP OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=LOOP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=INDEX
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
*-----------------------------------
:ATTRNAME=SAVE SEQ
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SUB COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=HOLD HOV
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=OFFSET RESIDENT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=DEFINING MACRO
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Defining Macro Flag
:ATTREND
*-----------------------------------
:ATTRNAME=MULTIPLE MACROS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Defining Multiple Macro
:ATTREND
*-----------------------------------
:ATTRNAME=CALLING MACRO
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Calling Macro Flag
:ATTREND
*-----------------------------------
:ATTRNAME=NUM PARTS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Total Number Parts
:ATTREND
*-----------------------------------
:ATTRNAME=NUM HOLES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Total Number Holes
:ATTREND
*-----------------------------------
:ATTRNAME=PQCOMP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=INC SUBPROGRAMS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Incremental Subprograms
:ATTREND
*-----------------------------------
:ATTRNAME=COORD TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SEQ CONFIG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Config. seq. numbers
:ATTREND
*-----------------------------------
:ATTRNAME=CANNED THREAD MILLING
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Thread Milling
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE ANGLE X
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ANGLE X
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE ANGLE Y
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ANGLE Y
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE ANGLE Z
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ANGLE Z
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE ANGLE B
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SETUP CONFIG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=WORK COORD CONFIG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE WORK COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=CALLED RAPID WORK COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=HOLD Z DOWN
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=HOLD Z DOWN FLAG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=NO SMALL ARC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=LINE AT ANGLE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE NEW WORK COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE SUB WORK COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE FIXTURE OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ARC ROUNDING POINT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=FORCE XY
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=FORCE Z
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=FEEDTYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=MULTIAXIS TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ROTATION TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ROTATION DIRECTION
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=RAPID DURING
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=FOURTH AXIS SELECTION
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL LENGTH DIAM METHOD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=T L COMP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G43 Number
:ATTREND
*-----------------------------------
:ATTRNAME=FIRST Z POS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define Work Variables Attributes (Decimal...)
*----------------------------------------------------------
:ATTRNAME=X POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Position
:ATTREND
*-----------------------------------
:ATTRNAME=Y POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Position
:ATTREND
*-----------------------------------
:ATTRNAME=Z POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Position
:ATTREND
*-----------------------------------
:ATTRNAME=COMP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Machine Compensation
:ATTREND
*-----------------------------------
:ATTRNAME=BUCKET
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE REG X
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Register
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE REG Y
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Register
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE Z
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Save Z
:ATTREND
*----------------------------------------------------------
:ATTRNAME=LAST X INC
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*----------------------------------------------------------
:ATTRNAME=LAST Y INC
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=ROUNDING POINT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=HOLD DBPX
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=HOLD DBPY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=RAPID FEED
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE RAPID X
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE RAPID Y
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE RAPID Z
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVE ABS Z
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=CALC FEED
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=SAVED ANGLE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=VAR PEC RED PER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Variable pecking reduction Percentage
:ATTREND
*-----------------------------------
:ATTRNAME=VAR PEC PER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVTYPE=Variable Pecking percentage
:ATTREND
*-----------------------------------
:ATTRNAME=NEVER ZERO OFFSET RADIUS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVTYPE=
:ATTREND
*-----------------------------------
*:ATTRNAME=INC ROT TILT A
*:ATTRTYPE=POST
*:ATTRVTYPE=DECIMAL
*:ATTREMARK=
*:ATTREND
*-----------------------------------
*:ATTRNAME=INC ROT TILT B
*:ATTRTYPE=POST
*:ATTRVTYPE=DECIMAL
*:ATTREMARK=
*:ATTREND
*-----------------------------------
*:ATTRNAME=ROT TILT A
*:ATTRTYPE=POST
*:ATTRVTYPE=DECIMAL
*:ATTREMARK=
*:ATTREND
*-----------------------------------
*:ATTRNAME=ROT TILT B
*:ATTRTYPE=POST
*:ATTRVTYPE=DECIMAL
*:ATTREMARK=
*:ATTREND
*-----------------------------------
:ATTRNAME=INC ROUNDOFF A
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=INC ROUNDOFF B
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes  (Misc...)
*----------------------------------------------------------
:ATTRNAME=N
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Sequence number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_REG_N(SEQ,MAX_SEQUENCE)
:WORD_ADDRESS_BEF=N
:VAR=SEQ
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=S
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle RPM
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INT_REGISTER(S,MACH,OPR_SPEED,REG_S)
:WORD_ADDRESS_BEF=|S
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=T
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INT_REGISTER(T,MACH,TOOL,REG_T2)
:WORD_ADDRESS_BEF=|T
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=COMP NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Comp Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_COMP_NUMBER(COMP_NUMBER,TOOL,COMP_OFFSET)
:WORD_ADDRESS_BEF=|D
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=FC NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Fixture Offset Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INT_REGISTER(FC_NUMBER,MACH,fixture_offset,REG_FC)
:WORD_ADDRESS_BEF=|FC
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (G Codes...)
*----------------------------------------------------------
:ATTRNAME=G
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_G_GROUP(G,GC,GG,GM,MACH,G_GROUP,ATTRIVALUE,INDEX)
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|G
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (M Codes...)
*----------------------------------------------------------
:ATTRNAME=M
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=M Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_M_GROUP(M,MC,MG,MM,MACH,M_GROUP,ATTRIVALUE,INDEX)
:CODETYPE=FORMAT
:RIGHT_PLACES=0
:WORD_ADDRESS_BEF=|M
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (Movement...)
*----------------------------------------------------------
:ATTRNAME=X
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(X,X_POS,GC,GG,G_GROUP,MACH,PREV,REG_X)
:WORD_ADDRESS_BEF=|X
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=Y
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(Y,Y_POS,GC,GG,G_GROUP,MACH,PREV,REG_Y)
:WORD_ADDRESS_BEF=|Y
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=Z
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(Z,ABS_Z_END,GC,GG,G_GROUP,MACH,PREV,REG_Z)
:WORD_ADDRESS_BEF=|Z
:MODAL=YES
:ATTREND
*----------------------------------------------------------
:ATTRNAME=FX
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|X
:VAR=ABS_X_END
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=FY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y End
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|Y
:VAR=ABS_Y_END
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=FZ
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z End
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|Z
:VAR=ABS_Z_END
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=VI
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=I Vector
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(VI,VECTOR_I,GC,GG,G_GROUP,MACH,PREV,REG_VI)
:WORD_ADDRESS_BEF=|I
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=VJ
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=J Vector
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(VJ,VECTOR_J,GC,GG,G_GROUP,MACH,PREV,REG_VJ)
:WORD_ADDRESS_BEF=|J
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=VK
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=K Vector
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(VK,VECTOR_K,GC,GG,G_GROUP,MACH,PREV,REG_VK)
:WORD_ADDRESS_BEF=|K
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=P COMP
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=P Comp
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_P_COMP(P_COMP,Q_COMP,REG_P)
:WORD_ADDRESS_BEF=|P
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=Q COMP
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Q Comp
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_Q_COMP(P_COMP,Q_COMP,REG_Q)
:WORD_ADDRESS_BEF=|Q
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=A
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Angle A
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ROT_ANGLE_A(A,MACH,INC_ROT_TILT_A,REG_A)
:WORD_ADDRESS_BEF=|A
:MODAL=YES
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=B
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Angle B
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ROT_ANGLE_B(B,MACH,INC_ROT_TILT_B,REG_B)
:WORD_ADDRESS_BEF=|B
:MODAL=YES
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=X OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_MACRO_ORIGIN(X_OFFSET,REG_X,X_OFFSET)
:WORD_ADDRESS_BEF=|X
:ATTREND
*-----------------------------------
:ATTRNAME=Y OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_MACRO_ORIGIN(Y_OFFSET,REG_Y,Y_OFFSET)
:WORD_ADDRESS_BEF=|Y
:ATTREND
*-----------------------------------
:ATTRNAME=Z OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_MACRO_ORIGIN(Z_OFFSET,REG_Z,Z_OFFSET)
:WORD_ADDRESS_BEF=|Z
:ATTREND
*-----------------------------------
:ATTRNAME=Z CLEAR
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(Z_CLEAR,MACH,OPR_Z_CLEARANCE,REG_Z)
:WORD_ADDRESS_BEF=|R
:MODAL=NO
:ATTREND
*-----------------------------------
:ATTRNAME=Z DEPTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(Z_DEPTH,MACH,OPR_Z_DEPTH,REG_Z)
:WORD_ADDRESS_BEF=|Z
:MODAL=NO
:ATTREND
*-----------------------------------
:ATTRNAME=FIRST PECK
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(FIRST_PECK,MACH,OPR_Z_FIRST_PECK,REG_Q)
:WORD_ADDRESS_BEF=|Q
:MODAL=NO
:ATTREND
*-----------------------------------
:ATTRNAME=SUB PECK
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(SUB_PECK,MACH,OPR_Z_SUB_PECK,REG_Q)
:WORD_ADDRESS_BEF=|Q
:MODAL=NO
:ATTREND
*-----------------------------------
:ATTRNAME=I
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(I,ABS_I_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_X,REG_I,AIC)
:WORD_ADDRESS_BEF=|I
:ATTREND
*-----------------------------------
:ATTRNAME=J
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=J Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(J,ABS_J_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_Y,REG_J,AIC)
:WORD_ADDRESS_BEF=|J
:ATTREND
*-----------------------------------
:ATTRNAME=K
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(K,ABS_K_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_Z,REG_K,AIC)
:WORD_ADDRESS_BEF=|K
:ATTREND
*-----------------------------------
:ATTRNAME=R
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=R Radius
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_RADIUS(R,MACH,REG_R)
:WORD_ADDRESS_BEF=|R
:MODAL=YES
:ATTREND
*-----------------------------------
:ATTRNAME=F
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_REG_F(MACH,REG_F,F)
:WORD_ADDRESS_BEF=|F
:LEFT_PLACES=3
:RIGHT_PLACES=4
:CANNOT_BE_SIGNED
:MODAL=YES
:ATTREND
*-----------------------------------
*----------------------------------------------------------
* Define SETUP Sheet and Estimated Time Attributes
*----------------------------------------------------------
:ATTRNAME=CALC TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*----------------------------------------------------------
:ATTRNAME=CW TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*----------------------------------------------------------
:ATTRNAME=CW MACRO TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*----------------------------------------------------------
:ATTRNAME=CALC MACRO TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*----------------------------------------------------------
:ATTRNAME=XY TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total X Y Time
:ATTREND
*-----------------------------------
:ATTRNAME=Z D DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Down Distance
:ATTREND
*-----------------------------------
:ATTRNAME=X DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Distance
:ATTREND
*-----------------------------------
:ATTRNAME=Y DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Y Distance
:ATTREND
*-----------------------------------
:ATTRNAME=Z DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Distance
:ATTREND
*-----------------------------------
:ATTRNAME=TOTAL Z RAPID
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Rapid Distance
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|TOTAL|Z|RAPID=
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MODAL=NO
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TOTAL Z FEED
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Feed Distance
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|TOTAL|Z|FEED=
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MODAL=NO
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=Z SAVE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Absolute
:ATTREND
*-----------------------------------
:ATTRNAME=R SAVE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=R Save
:ATTREND
*-----------------------------------
:ATTRNAME=CALC FEEDRATE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*-----------------------------------
:ATTRNAME=CALC DWELL
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Absolute
:ATTREND
*-----------------------------------
:ATTRNAME=TOOL COMMENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=TOOL COMMENT
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=OPR COMMENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=OPR COMMENT
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=CAMWORKS MATERIAL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=CAMWORKS MATERIAL
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TIME HOURS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Hours
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|ESTIMATED|MACHINE|TIME=
:WORD_ADDRESS_AFT=|HRS.||
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=TIME MINUTES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Minutes
:CODETYPE=FORMAT
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=TIME SECONDS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Time in Seconds
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|MIN.||
:WORD_ADDRESS_AFT=|SEC.|)
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=CW TIME HOURS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Hours
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|ESTIMATED|MACHINE|TIME=
:WORD_ADDRESS_AFT=|HRS.||
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=CW TIME MINUTES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Minutes
:CODETYPE=FORMAT
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=CW TIME SECONDS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Time in Seconds
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|MIN.||
:WORD_ADDRESS_AFT=|SEC.|)
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*-----------------------------------
:ATTRNAME=LEFT PAR
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=|(
:ATTREND
*-----------------------------------
:ATTRNAME=RIGHT PAR
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=|)
:ATTREND
*-----------------------------------
:ATTRNAME=COLON
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=:
:ATTREND
*-----------------------------------
:ATTRNAME=POUND SIGN
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=##
:ATTREND
*-----------------------------------
:ATTRNAME=BLOCK DELETE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=/
:ATTREND
*-----------------------------------
:ATTRNAME=FORWARD SLASH
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=/
:ATTREND
*-----------------------------------
:ATTRNAME=PERCENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=%
:ATTREND
*-----------------------------------
:ATTRNAME=ASTERISK
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=*
:ATTREND
*-----------------------------------
:ATTRNAME=POINT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.
:ATTREND
*-----------------------------------
:ATTRNAME=POINT ONE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.1
:ATTREND
*-----------------------------------
:ATTRNAME=POINT TWO
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.2
:ATTREND
*-----------------------------------
:ATTRNAME=POINT THREE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.3
:ATTREND
*-----------------------------------
:ATTRNAME=DECIMAL POINT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.
:ATTREND
*-----------------------------------
:ATTRNAME=PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|PART|NAME=
:VAR=PART NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S PROGRAM NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|PROGRAM|NUMBER=
:VAR=program number
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_LEADING
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=L PROGRAM NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|PROGRAM|NUMBER=
:VAR=long program number
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=8
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_LEADING
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S MACHINE NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|MACHINE=
:VAR=MACHINE NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S CONTROLLER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|CONTROLLER=
:VAR=CONTROLLER TYPE
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S MATERIAL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|MATERIAL=
:VAR=material
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S THICKNESS
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|THICKNESS=
:VAR=thickness
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=4
:RIGHT_PLACES=3
:MUST_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=PROGRAM NAME
:ATTRTYPE=POST
:ATTRVTYPE=CHARACTER
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=
:VAR=program id
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S PART NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PART|NUMBER=
:VAR=part number
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PART|NAME=
:VAR=job name
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S CUSTOMER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|CUSTOMER|NAME=
:VAR=company name
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S PROGRAMMER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PROGRAMMER=
:VAR=programmer
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S OPERATION NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|OPERATION|NUMBER=
:VAR=operation description
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=S DATE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|DATE=
:VAR=date
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
*------------------------------
:ATTRNAME=S REVISION
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|REVISION=
:VAR=revision
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
*-----------------------------------
:ATTRNAME=MONTH
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|
:VAR=MONTH
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
:ATTREND
*-----------------------------------
:ATTRNAME=DAY
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=-
:VAR=DAY
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=YEAR
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=-
:VAR=YEAR
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
:ATTRNAME=LOCKON
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=M Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_LOCKON(LOCKON)
:CODETYPE=FORMAT
:RIGHT_PLACES=0
:WORD_ADDRESS_BEF=|M
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
:ATTRNAME=LOCKOFF
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=M Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_LOCKOFF(LOCKOFF)
:CODETYPE=FORMAT
:RIGHT_PLACES=0
:WORD_ADDRESS_BEF=|M
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
* Predator Header post attributes
*-----------------------------------
:ATTRNAME=PREDATOR HEADER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Output Predator Header
:ATTREND
*-----------------------------------
:ATTRNAME=START PREDATOR HEADER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=BEGIN|PREDATOR|NC|HEADER
:ATTRSPACES=YES
:ATTREND
*-----------------------------------
:ATTRNAME=END PREDATOR HEADER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=END|PREDATOR|NC|HEADER
:ATTRSPACES=YES
:ATTREND
*-----------------------------------
:ATTRNAME=MTOOL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=(MTOOL
:ATTRSPACES=YES
:ATTREND
*-----------------------------------
:ATTRNAME=RIGHT PARAN
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=)
:ATTRSPACES=YES
:ATTREND
*-----------------------------------
:ATTRNAME=PREDATOR TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|T
:VAR=TOOL
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*-----------------------------------
:ATTRNAME=PREDATOR TOOL TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|S
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR TOOL DIAMETER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|D
:VAR=TOOL_DIAMETER
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR SHANK DIAMETER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|SD
:VAR=TOOL_DIAMETER
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR FLUTE LENGTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|H
:VAR=TOOL_LENGTH
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR SHANK LENGTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|SH
*:VAR=TOOL_LENGTH
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR CORNER RADIUS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|C
:VAR=TOOL_CORNER_RADIUS
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*------------------------------
:ATTRNAME=PREDATOR TOOL ANGLE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|A
:VAR=TOOL_ANGLE
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:MODAL=YES
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=DEBUG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Debug
:CODETYPE=SELECT
:SELECT=0
:CODE=|||||Start|of|Tape
:SELECT=1
:CODE=|||||Line|Move
:SELECT=2
:CODE=|||||Arc|Move
:SELECT=3
:CODE=|||||Rapid|XY|Move
:SELECT=4
:CODE=|||||Init|Tool|Change
:SELECT=5
:CODE=|||||Sub|Tool|Change
:SELECT=6
:CODE=|||||Every|Move
:SELECT=7
:CODE=|||||Beg|Macro
:SELECT=8
:CODE=|||||End|Macro
:SELECT=9
:CODE=|||||Macro|Call
:SELECT=10
:CODE=|||||Multi|Call
:SELECT=11
:CODE=|||||Program|End
:SELECT=12
:CODE=|||||Rapid|Z|Move|Down
:SELECT=13
:CODE=|||||Rapid|Z|Move|Up
:SELECT=14
:CODE=|||||Z|Feed|Move
:SELECT=15
:CODE=|||||Start|Operation
:SELECT=16
:CODE=|||||End|Operation
:SELECT=17
:CODE=|||||Single|Drill
:SELECT=18
:CODE=|||||Drill|Inc|Drill
:SELECT=19
:CODE=|||||Arc|Pattern
:SELECT=20
:CODE=|||||Grid|Pattern
:SELECT=21
:CODE=|||||Long|Code|Pecking
:SELECT=22
:CODE=|||||Rapid|From|Tool|Change
:SELECT=23
:CODE=|||||Rapid|To|Tool|Change
:SELECT=24
:CODE=|||||Rotate|About|X|Axis
:SELECT=25
:CODE=|||||Rotate|About|Y|Axis
:SELECT=26
:CODE=|||||Rotate|About|Z|Axis
:SELECT=27
:CODE=|||||Calc|First|Z|Axis
:SELECT=28
:CODE=|||||Calc|Preload|Z|Axis
:SELECT=29
:CODE=|||||Calc|First|Z|Down
:SELECT=30
:CODE=|||||Calc|Mult|Macro|Define
:ATTRUSED=1
:SELECT=31
:CODE=|||||Init|Tool|Change
:SELECT=32
:CODE=||||Five|Axis|Rapid|Move
:SELECT=33
:CODE=||||Five|Rapid|F|T|Change
:SELECT=34
:CODE=|||||Arc|Move|ZX
:SELECT=35
:CODE=|||||Arc|Move|YZ
:SELECT=36
:CODE=|||||Arc|Move|Any|Plane
:SELECT=37
:CODE=|||||Line|Leadin|move
:SELECT=38
:CODE=|||||5axis|Line|move
:SELECT=39
:CODE=|||||Line|Leadout|move
:ATTREND
****************************************
* Tool IDs added for CW2013
****************************************
*-----------------------------------
:ATTRNAME=SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=N SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=N SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=NC SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=NC SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_PART_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP PART DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_PART_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP SETUP NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_SETUP_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP SETUP DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_SETUP_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP FEAT NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP FEAT DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP OPER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_OPER_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP OPER DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_OPER_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP FEAT SETUP NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_SETUP_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=TLP FEAT SETUP DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_SETUP_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*-----------------------------------
:ATTRNAME=CTL PATH
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=
:VAR=CTL_PATH
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
:ATTRNAME=SUBMCS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:ATTREND
*----------------------------------------------------------
:ATTRNAME=W COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_COORD(W_COORD,SUBMCS)
:VAR=W_COORD
:SELECT=54
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G54.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT>54
:WORD_ADDRESS_BEF=|G
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
:ATTRNAME=W COORD ALL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_COORD_ALL(W_COORD_ALL,SUBMCS)
:VAR=W_COORD_ALL
:SELECT=54
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G54.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=55
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G55.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=56
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G56.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=57
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G57.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=58
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G58.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=59
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G59.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
*
:SECTION=CALC_COORD(GVAL,PVAL)
*
*   Word Coordinate G54-G59
*   Word Coordinate G54.1 P01-P48
*
*:C: IF DEFINING_MACRO=YES THEN GVAL=0 RETURN ENDIF
:C: GVAL=work_coord
:C: IF ATTROVERRIDE=YES THEN
:C: GVAL=ATTRIVALUE
:C:    IF GVAL<>54 THEN
:C:    PVAL=GVAL
:C:    ELSE
:C:    PVAL=sub_work_coord
:C:    ENDIF
:C: RETURN
:C: ENDIF
:C: IF work_coord<>54 THEN
:C: PVAL=work_coord
:C: ELSE
:C: PVAL=sub_work_coord
:C: ENDIF
*----------------------------------------------------------
*
:SECTION=CALC_COORD_ALL(GVAL,PVAL)
*
*   Word Coordinate G54-G59
*   Word Coordinate G54.1 P1-P48
*   Word Coordinate G55.1 P1-P48
*   Word Coordinate G56.1 P1-P48
*   Word Coordinate G57.1 P1-P48
*   Word Coordinate G58.1 P1-P48
*   Word Coordinate G59.1 P1-P48
*
:C: GVAL=work_coord
:C: IF ATTROVERRIDE=YES THEN
:C: GVAL=ATTRIVALUE
:C: ENDIF
:C: PVAL=sub_work_coord
:C: IF PVAL=0 THEN PVAL=1 ENDIF
*-----------------------------------
*-----------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
*  Define Machine "G" Register Calculations
*----------------------------------------------------------
*
:SECTION=CALC_G_GROUP(GVAL,GC,GG,GM,MACH,G_GROUP,OVERVAL,INDEX)
*
*   This routine processes all G codes being output to the tape.
*   This routine will supply a default G code value if a value is not
*   passed. The MACH(REG_G) as well as the G_GROUP resgister are updated.
*   The value being output is returned in the 1st field GVAL
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : GVAL       - Varaible to accept Return value
*            : GC         - Array of G Codes
*            : GG         - Array of G Groups
*            : GM         - Array of G Modal flags
*            : MACH       - Array of Machine Registers A-Z
*            : G_GROUP    - Array of Machine G Groups  0-20
*            : OVERVAL    - Override value
*            : INDEX      - Integer Variable used as to Index G code tables
*
*   Returns  : GVAL       - Stores the G code being output into GVAL
*            : G_GROUP    - Stores the G code being output into G_GROUP
*            : MACH       - Stores the G code being output into MACH(REG_G)
*            : METRIC_OUT - May Modify the system flag METRIC_OUT
*                           METRIC_OUT=1 is ENGLISH
*                           METRIC_OUT=2 is METRIC
*            : INDEX      - Stores the Table location of G Code into INDEX
*            : SETON()    - May Set ON the Parameter making the call
*            : SETOFF(    - May Set OFF the Parameter making the call
*
*   External : none
*
*   Determine the value to be output
*
:C: IF ATTROVERRIDE=YES
:C: THEN GVAL=OVERVAL
:C: ELSE CALL(CALC_G_DEFAULT(GVAL,GC))
:C: ENDIF
*
*   Lookup G code in the G code table - (a -1 in INDEX means NOT found!)
*
:C: LOOKUP(GC,GVAL,INDEX)
:C: IF INDEX=-1 THEN SETON() RETURN ENDIF
*
*   Seton the Parameter then determine if parameter does NOT need to be output
*
:C: SETON()
:C: IF GM(INDEX)=YES AND G_GROUP(GG(INDEX))=GVAL THEN SETOFF() ENDIF
*
*   Setoff Work coordinate if defining a macro
*
:C: IF DEFINING_MACRO=YES AND G_GROUP(GG(G_INC))<>GC(G_INC) THEN
:C:  IF INDEX=G_WORK_1
:C:  OR INDEX=G_WORK_2
:C:  OR INDEX=G_WORK_3
:C:  OR INDEX=G_WORK_4
:C:  OR INDEX=G_WORK_5
:C:  OR INDEX=G_WORK_6
:C:  THEN SETOFF()
:C:  ENDIF
:C: ENDIF
*
*   Update the G_GROUP registers if the G code is MODAL
*
:C: IF GM(INDEX)=YES THEN G_GROUP(GG(INDEX))=GVAL ENDIF
*
*   Update the G_GROUP register for drilling if the G code is of a RAPID group
*
:C: IF GM(INDEX)=YES AND GG(INDEX)=GG(G_RAPID)
:C: THEN G_GROUP(GG(G_CANCEL_CYC))=GC(G_CANCEL_CYC)
:C: ENDIF
*
*   Update the Machine register REG_G
*
:C: LAST_G=GVAL
*
*   Set the system English/Metric flag if G code affects English/Metric
*
:C: IF INDEX=G_ENGLISH THEN METRIC_OUT=1 ENDIF
:C: IF INDEX=G_METRIC THEN METRIC_OUT=2 ENDIF
*-----------------------------------
*
:SECTION=CALC_G_DEFAULT(GVAL,GC)
*
*   This routine calculates a G code value based on
*   the system variable MOVE_TYPE
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : GVAL       - Varaible to accept Return value
*            : GC         - Array of G Codes
*
*   Returns  : GVAL       - Stores the calcuated value into GVAL
*
*   External : none
*
*
*   Calculate Default
*
:C: IF MOVE_TYPE=RAPID THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C: IF MOVE_TYPE=LINE THEN GVAL=GC(G_LINE) RETURN ENDIF
:C: IF MOVE_TYPE=CW_ARC THEN GVAL=GC(G_CW_ARC) RETURN ENDIF
:C: IF MOVE_TYPE=CCW_ARC THEN GVAL=GC(G_CCW_ARC) RETURN ENDIF
:C: IF MOVE_TYPE=RAPID_Z_UP THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C: IF MOVE_TYPE=RAPID_Z_DOWN THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C: IF MOVE_TYPE=FEED_Z_DOWN THEN GVAL=GC(G_LINE) RETURN ENDIF
:C: IF MOVE_TYPE<>5 THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C: GVAL=GC(G_RAPID)
:C: IF OPR_DRILL_CYCLE_TYPE=SPOT_DRILLING THEN GVAL=GC(G_SPOT_DRILL) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=PECKING THEN GVAL=GC(G_PECK) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=HIGH_SPEED_PECKING THEN GVAL=GC(G_HIGH_PECK) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN GVAL=GC(G_VARIABLE_PECK) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=TAPPING THEN GVAL=GC(G_TAP) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REVERSE_TAPPING THEN GVAL=GC(G_REVERSE_TAP) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=FINE_BORING THEN GVAL=GC(G_FINE_BORE) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING THEN GVAL=GC(G_REAM) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORING THEN GVAL=GC(G_BORE) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORE_DWELL THEN GVAL=GC(G_BORE_DWELL) ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BACK_BORING THEN GVAL=GC(G_BACK_BORE) ENDIF
*-----------------------------------
:SECTION=CALC_M_GROUP(MVAL,MC,MG,MM,MACH,M_GROUP,OVERVAL,INDEX)
*
*   This routine processes all M codes being output to the tape.
*   The MACH(REG_M) as well as the M_GROUP resgister are updated.
*   The value being output is returned in the 1st field MVAL
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : MVAL       - Varaible to accept Return value
*            : MC         - Array of M Codes
*            : MG         - Array of M Groups
*            : MM         - Array of M Modal flags
*            : MACH       - Array of Machine Registers A-Z
*            : M_GROUP    - Array of Machine M Groups  0-20
*            : OVERVAL    - Override value
*            : INDEX      - Integer Variable used as to Index M code tables
*
*   Returns  : MVAL       - Stores the M code being output into MVAL
*            : M_GROUP    - Stores the M code being output into M_GROUP
*            : MACH       - Stores the M code being output into MACH(REG_M)
*            : MACH       - Stores the TOOL into MACH(REG_T) if tool change
*            : INDEX      - Stores the Table location of M Code into INDEX
*            : SETON()    - May Set ON the Parameter making the call
*            : SETOFF(    - May Set OFF the Parameter making the call
*
*   External : none
*
:C: IF ATTROVERRIDE=YES THEN MVAL=OVERVAL ELSE MVAL=0 ENDIF
*
*   Lookup M code in the M code table - (a -1 in INDEX means NOT found!)
*
:C: LOOKUP(MC,MVAL,INDEX)
:C: IF INDEX=-1 THEN SETON() RETURN ENDIF
*
*   Seton the Parameter then determine if parameter does NOT need to be output
*
:C: SETON()
:C: IF MM(INDEX)=YES AND M_GROUP(MG(INDEX))=MVAL THEN SETOFF() ENDIF
:C: IF MM(INDEX)=YES THEN M_GROUP(MG(INDEX))=MVAL ENDIF
*
*   Update the Machine register REG_M
*
:C: MACH(REG_M)=MVAL
*
*   Update the Machine register REG_T
*
:C: IF MVAL=MC(M_TOOL_CHANGE) THEN MACH(REG_T)=TOOL ENDIF
:C: IF MVAL=MC(M_TOOL_CHANGE_2) AND MC(M_TOOL_CHANGE_2)<>0
:C: THEN MACH(REG_T)=TOOL
:C: ENDIF
*-----------------------------------
:SECTION=CALC_INT_REGISTER(IVAL,MACH,DEFAULTVAL,REGISTER)
*
*   This is a general routine which processes an Integer Register.
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : IVAL       - Varaible to accept Return value
*            : MACH       - Array of Machine Registers A-Z
*            : DEFAULTVAL - Default value if not passed by user
*
*   Returns  : IVAL       - Stores the M code being output into MVAL
*            : MACH       - Stores the M code being output into MACH(REG_M)
*
*   External : none
*
:C: IF ATTROVERRIDE=YES THEN IVAL=ATTRIVALUE ELSE IVAL=DEFAULTVAL ENDIF
:C: MACH(REGISTER)=IVAL
*-----------------------------------
:SECTION=CALC_DEC_REGISTER(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Decimal register
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: MACH(REGISTER)=DVAL
*-----------------------------------
:SECTION=CALC_DEC_INC_REGISTER(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Incremental Decimal register
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: DVAL=(DVAL-MACH(REGISTER))
:C: MACH(REGISTER)=(DVAL+MACH(REGISTER))
*-----------------------------------
:SECTION=CALC_FLIP_DEC_REGISTER(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Decimal register
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: MACH(REGISTER)=DVAL
:C: DVAL=(-DVAL)
*----------------------------------------------------------
*  General decimal format routine
*----------------------------------------------------------
*
:SECTION=CALC_DECIMAL_OUT(DVAL)
*
*   Assign value
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=0 ENDIF
*----------------------------------------------------------
*  General decimal format routine
*----------------------------------------------------------
*
:SECTION=CALC_INTEGER_OUT(IVAL)
*
*   Assign value
*
:C: IF ATTROVERRIDE=YES THEN IVAL=ATTRIVALUE ELSE IVAL=0 ENDIF
*----------------------------------------------------------
*  Machine Movement Register Calculations
*----------------------------------------------------------
*
:SECTION=CALC_ENDPOINT(DVAL,DEFAULTVAL,GC,GG,G_GROUP,MACH,PREV,REGISTER)
*
*   Movement Register Calculations
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: PREV(REGISTER)=MACH(REGISTER)
*
:C: IF G_GROUP(GG(G_INC))<>GC(G_INC) THEN
:C:    IF FORCE_XY=1 THEN
:C:       IF REGISTER=24 OR REGISTER=25 THEN SETON() FORCE_XY=0 ENDIF
:C:    ENDIF
:C:    IF FORCE_Z=1 THEN
:C:       IF REGISTER=26 THEN SETON() FORCE_Z=0 ENDIF
:C:    ENDIF
****************** This is set for Rotary retract when drilling in CAMWorks
:C:    IF REGISTER=26 AND OPR_TYPE=MILL_DRILLING AND MOVE_TYPE=RAPID_Z_UP THEN
:C:       IF ABS_Z_END>OPR_Z_RAPID_PLANE THEN
:C:       DVAL=ABS_Z_END
:C:       ELSE
:C:       DVAL=OPR_Z_RAPID_PLANE
:C:       ENDIF
:C:    ENDIF
******************
:C: MACH(REGISTER)=(DVAL)
:C: RETURN
:C: ENDIF
*
:C: BUCKET=0
:C: ROUNDOFF((DVAL-MACH(REGISTER)),BUCKET,DVAL,G_RIGHT_PLACES,METRIC_OUT)
:C: SETON()
:C: IF ABS(DVAL)<ROUNDING_POINT AND LEADIN=NO AND
:C: LEADOUT=NO THEN
:C: SETOFF()
:C: ENDIF
:C: IF SAVE_NEW_WORK_COORD<>work_coord THEN SETON() ENDIF
:C: IF SAVE_SUB_WORK_COORD<>sub_work_coord THEN SETON() ENDIF
:C: IF SAVE_FIXTURE_OFFSET<>fixture_offset THEN SETON() ENDIF
:C: MACH(REGISTER)=(MACH(REGISTER)+DVAL)
*-----------------------------------
*
:SECTION=CALC_FLIP_ENDPOINT(DVAL,DEFAULTVAL,GC,GG,G_GROUP,MACH,PREV,REGISTER)
*
*   Movement Register Calculations
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: PREV(REGISTER)=MACH(REGISTER)
*
:C: IF G_GROUP(GG(G_INC))<>GC(G_INC) THEN
:C:    IF FORCE_XY=1 THEN
:C:       IF REGISTER=24 OR REGISTER=25 THEN SETON() ENDIF
:C:    ENDIF
:C: MACH(REGISTER)=(DVAL)
:C: DVAL=(-DVAL)
:C: RETURN
:C: ENDIF
*
:C: BUCKET=0
:C: ROUNDOFF((DVAL-MACH(REGISTER)),BUCKET,DVAL,G_RIGHT_PLACES,METRIC_OUT)
:C: SETON()
:C: IF ABS(DVAL)<ROUNDING_POINT AND LEADIN=NO AND
:C: LEADOUT=NO THEN
:C: SETOFF()
:C: ENDIF
:C: IF SAVE_NEW_WORK_COORD<>work_coord THEN SETON() ENDIF
:C: IF SAVE_SUB_WORK_COORD<>sub_work_coord THEN SETON() ENDIF
:C: IF SAVE_FIXTURE_OFFSET<>fixture_offset THEN SETON() ENDIF
:C: MACH(REGISTER)=(MACH(REGISTER)+DVAL)
:C: DVAL=(-DVAL)
*-----------------------------------
:SECTION=CALC_CENTER(DVAL,DEFAULTVAL,GC,GG,G_GROUP,MACH,PREV,P_REG,REGISTER,AIC)
*
*   Center Calculations
*
*  AIC = 0  - Absolute Center
*  AIC = 1  - Incremental distance from Start to Center
*  AIC = 2  - Absolute or Incremental distance from Start to Center
*  AIC = 3  - Incremental distance from Center to Start
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ENDIF
:C: IF ATTROVERRIDE=NO AND AIC=0 THEN DVAL=DEFAULTVAL ENDIF
:C: IF ATTROVERRIDE=NO AND AIC=1 THEN DVAL=(DEFAULTVAL-PREV(P_REG)) ENDIF
:C: IF ATTROVERRIDE=NO AND AIC=2 AND G_GROUP(GG(G_ABS))=GC(G_ABS)
:C: THEN DVAL=(DEFAULTVAL)
:C: ENDIF
:C: IF ATTROVERRIDE=NO AND AIC=2 AND G_GROUP(GG(G_INC))=GC(G_INC)
:C: THEN DVAL=(DEFAULTVAL-PREV(P_REG))
:C: ENDIF
:C: IF ATTROVERRIDE=NO AND AIC=3 THEN DVAL=(PREV(P_REG)-DEFAULTVAL) ENDIF
*-----------------------------------
:SECTION=CALC_P_COMP(PVAL,QVAL,REGISTER)
*
*   P Comp register
*
:C: IF LEADOUT=YES THEN SETOFF() RETURN ENDIF
:C: IF COMP<>GC(G_COMP_OFF) THEN
*:C: CALC_PQ_VALUES(PVAL,QVAL)
:C: GET_PQ_VALUES(PVAL,QVAL)
:C: ELSE
:C: SETOFF()
:C: RETURN
:C: ENDIF
*:C: SETON()
:C: IF ATTROVERRIDE=YES THEN
:C: PVAL=ATTRDVALUE
:C: ENDIF
:C: IF ABS(PVAL)<(ROUNDING_POINT*2) THEN
:C: PVAL=0
:C: SETOFF()
:C: MACH(REGISTER)=PVAL
:C: RETURN
:C: ENDIF
:C: IF ABS(INC_X_END)<(ROUNDING_POINT*2) THEN SETOFF() ELSE SETON() ENDIF
:C: MACH(REGISTER)=PVAL
*-----------------------------------
:SECTION=CALC_Q_COMP(PVAL,QVAL,REGISTER)
*
*   Q Comp register
*
:C: IF LEADOUT=YES THEN SETOFF() RETURN ENDIF
:C: IF COMP<>GC(G_COMP_OFF) THEN
*:C: CALC_PQ_VALUES(PVAL,QVAL)
:C: GET_PQ_VALUES(PVAL,QVAL)
:C: ELSE
:C: SETOFF()
:C: RETURN
:C: ENDIF
*:C: SETON()
:C: IF ATTROVERRIDE=YES THEN
:C: QVAL=ATTRDVALUE
:C: ENDIF
:C: IF ABS(QVAL)<(ROUNDING_POINT*2) THEN
:C: QVAL=0
:C: SETOFF()
:C: MACH(REGISTER)=QVAL
:C: RETURN
:C: ENDIF
:C: IF ABS(INC_Y_END)<(ROUNDING_POINT*2) THEN SETOFF() ELSE SETON() ENDIF
:C: MACH(REGISTER)=QVAL
*-----------------------------------
*
:SECTION=CALC_REG_N(NVAL,MAXSEQ)
*
*   N Sequence register
*
:C: IF NVAL>MAXSEQ THEN SEQ=SEQ_INCREMENT NVAL=SEQ ENDIF
*-----------------------------------
*
:SECTION=CALC_REG_F(MACH,REGISTER,FVAL)
*
*   F Feed register
*
:C: SETON()
:C: IF MOVE_TYPE=1 OR MOVE_TYPE=2 OR MOVE_TYPE=3 THEN
:C: FVAL=OPR_X_FEED
:C: ELSE
:C:    IF OPR_TYPE=0 OR OPR_TYPE=1020 THEN
:C:    FVAL=OPR_X_FEED
:C:    ELSE
:C:    FVAL=OPR_Z_FEED
:C:    ENDIF
:C: ENDIF
:C: IF OPR_TYPE=MILL_DRILLING THEN FVAL=OPR_Z_FEED ENDIF
:C: IF ATTROVERRIDE=YES THEN FVAL=ATTRDVALUE ENDIF
*:C: IF FVAL=MACH(REGISTER) THEN SETOFF() ENDIF
:C: IF ABS(FVAL-MACH(REGISTER))<(ROUNDING_POINT*2) THEN SETOFF() ENDIF
:C: IF OPR_TYPE=MILL_DRILLING AND G_GROUP(GG(G_CANCEL_CYC))<>GC(G_CANCEL_CYC)
:C: THEN SETON()
:C: ENDIF
*
* G93 Fanuc style Inverse time calculations for wrapped and multiaxis operations
* (G93) Feed Rate = (1 / (Actual Move Distance / Desired Feed Rate))
*             or  = (Desired Feed Rate / Actual Move Distance)
*
* if you need the G94 method then use logic below, but this will only work for one axis of rotation
* (G94) Feed Rate = (Degrees of Rotation / (Actual Move Distance /Desired FeedRate))
*
:C: IF GC(G_REVERSE_FR)<>0 THEN
:C:    IF G_GROUP(GG(G_REVERSE_FR))=GC(G_REVERSE_FR) THEN
:C:    FVAL=(FVAL/DISTANCE)
:C:       IF METRIC_OUT<>1 THEN
:C:       FVAL=(FVAL/25.4)
:C:       ENDIF
:C:    SETON()
:C:    ENDIF
:C: ENDIF
:C: MACH(REGISTER)=FVAL
*----------------------------------------------------------
*
:SECTION=CALC_RADIUS(RVAL,MACH,REGISTER)
*
*   Arc Radius
*
:C: IF ATTROVERRIDE=YES THEN RVAL=ATTRDVALUE ELSE RVAL=ARC_RADIUS ENDIF
:C: SETON()
:C: MACH(REGISTER)=RVAL
*:C: IF ARC_INC_ANGLE>HALF_CIRCLE OR ARC_INC_ANGLE=HALF_CIRCLE
:C: IF ABS((ABS(ARC_INC_ANGLE))-0)>180.00005 THEN
*:C: IF ABS((ABS(ARC_INC_ANGLE))-HALF_CIRCLE)>ROUNDING_POINT THEN
:C: RVAL=(-MACH(REGISTER))
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ROT_ANGLE_REGISTER(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Absolute angle from Incremental
*
:C: IF OPR_AXIS_TYPE<>4444 AND OPR_AXIS_TYPE<>5555 AND OPR_AXIS_TYPE<>FIVE_AXIS THEN SETOFF() RETURN ENDIF
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE GOTO9 ENDIF
:C: DVAL=(MACH(REGISTER)+DEFAULTVAL)
:C9: MACH(REGISTER)=(DVAL)
*-----------------------------------
:SECTION=CALC_ROT_ANGLE_A(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Absolute angle from Incremental
*
:C: IF OPR_AXIS_TYPE<>4444 AND OPR_AXIS_TYPE<>5555 AND OPR_AXIS_TYPE<>FIVE_AXIS THEN SETOFF() RETURN ENDIF
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE GOTO9 ENDIF
:C: INC_ROUNDOFF_A=(INC_ROUNDOFF_A+INC_ROT_TILT_A)
:C: IF ABS(INC_ROUNDOFF_A)<(ROUNDING_POINT*2) THEN SETOFF() DVAL=(MACH(REGISTER)) RETURN ENDIF
*:C: IF ABS(INC_ROT_TILT_A)<(ROUNDING_POINT*2) THEN SETOFF() RETURN ENDIF
*****************************************
* MULTIAXIS_TYPE=0 - normal adding incremental angle to last position (wrap around) can be > 360 or < -360
* MULTIAXIS_TYPE=1 - adding incremental angle to last position but limiting it to nothing > 360 or < -360
* MULTIAXIS_TYPE=2 - absolute angles only and no negative angles
*
* ROTATION_DIRECTION=0 - CW rotation - normal
* ROTATION_DIRECTION=1 - CCW rotation - reverse direction
*
* ROTATION_TYPE=0 - used with :ATTRNAME=A CW rotation - normal
* ROTATION_TYPE=1 - used with :ATTRNAME=A CCW rotation - reverse direction
*****************************************
:C: IF ROTATION_DIRECTION=0 THEN
:C: SAVED_ANGLE=(MACH(REGISTER)+INC_ROUNDOFF_A)
:C: ELSE
:C: SAVED_ANGLE=(MACH(REGISTER)-INC_ROUNDOFF_A)
:C: ENDIF
:C1: IF SAVED_ANGLE>360 THEN SAVED_ANGLE=(SAVED_ANGLE-360) GOTO1 ENDIF
:C2: IF SAVED_ANGLE<-360 THEN SAVED_ANGLE=(SAVED_ANGLE+360) GOTO2 ENDIF
*
:C: ROTATION_TYPE=0
:C: IF INC_ROT_TILT_A<0 THEN ROTATION_TYPE=1 ENDIF
:C: IF MULTIAXIS_TYPE=0 THEN
:C:    IF ROTATION_DIRECTION=0 THEN
:C:    DVAL=(MACH(REGISTER)+INC_ROUNDOFF_A)
:C:    GOTO9
:C:    ELSE
:C:    DVAL=(MACH(REGISTER)-INC_ROUNDOFF_A)
:C:    GOTO9
:C:    ENDIF
:C: ENDIF
:C: IF MULTIAXIS_TYPE=1 THEN
:C: DVAL=SAVED_ANGLE
:C:    IF DVAL>360 THEN DVAL=(DVAL-360) ENDIF
:C:    IF DVAL<-360 THEN DVAL=(DVAL+360) ENDIF
:C: GOTO9
:C: ENDIF
:C: IF MULTIAXIS_TYPE=2 THEN DVAL=ROT_TILT_A ENDIF
:C9: IF ATTROVERRIDE=NO AND OPR_AXIS_TYPE<>4444 AND OPR_AXIS_TYPE<>5555 AND OPR_AXIS_TYPE<>FIVE_AXIS THEN
:C:    IF ABS(INC_ROUNDOFF_A)<(ROUNDING_POINT*2) THEN SETOFF() RETURN ENDIF
:C: ENDIF
:C: MACH(REGISTER)=(DVAL)
:C: INC_ROUNDOFF_A=0
*-----------------------------------
:SECTION=CALC_ROT_ANGLE_B(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*   Calculate Absolute angle from Incremental
*
:C: IF OPR_AXIS_TYPE<>4444 AND OPR_AXIS_TYPE<>5555 AND OPR_AXIS_TYPE<>FIVE_AXIS THEN SETOFF() RETURN ENDIF
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE GOTO9 ENDIF
:C: INC_ROUNDOFF_B=(INC_ROUNDOFF_B+INC_ROT_TILT_B)
:C: IF ABS(INC_ROUNDOFF_B)<(ROUNDING_POINT*2) THEN SETOFF() DVAL=(MACH(REGISTER)) RETURN ENDIF
*:C: IF ABS(INC_ROT_TILT_B)<(ROUNDING_POINT*2) THEN SETOFF() RETURN ENDIF
*****************************************
* MULTIAXIS_TYPE=0 - normal adding incremental angle to last position (wrap around) can be > 360 or < -360
* MULTIAXIS_TYPE=1 - adding incremental angle to last position but limiting it to nothing > 360 or < -360
* MULTIAXIS_TYPE=2 - absolute angles only and no negative angles
*
* ROTATION_DIRECTION=0 - CW rotation - normal
* ROTATION_DIRECTION=1 - CCW rotation - reverse direction
*
* ROTATION_TYPE=0 - used with :ATTRNAME=B CW rotation - normal
* ROTATION_TYPE=1 - used with :ATTRNAME=B CCW rotation - reverse direction
*****************************************
:C: IF ROTATION_DIRECTION=0 THEN
:C: SAVED_ANGLE=(MACH(REGISTER)+INC_ROUNDOFF_B)
:C: ELSE
:C: SAVED_ANGLE=(MACH(REGISTER)-INC_ROUNDOFF_B)
:C: ENDIF
:C1: IF SAVED_ANGLE>360 THEN SAVED_ANGLE=(SAVED_ANGLE-360) GOTO1 ENDIF
:C2: IF SAVED_ANGLE<-360 THEN SAVED_ANGLE=(SAVED_ANGLE+360) GOTO2 ENDIF
*
:C: ROTATION_TYPE=0
:C: IF INC_ROT_TILT_B<0 THEN ROTATION_TYPE=1 ENDIF
:C: IF MULTIAXIS_TYPE=0 THEN
:C:    IF ROTATION_DIRECTION=0 THEN
:C:    DVAL=(MACH(REGISTER)+INC_ROUNDOFF_B)
:C:    GOTO9
:C:    ELSE
:C:    DVAL=(MACH(REGISTER)-INC_ROUNDOFF_B)
:C:    GOTO9
:C:    ENDIF
:C: ENDIF
:C: IF MULTIAXIS_TYPE=1 THEN
:C: DVAL=SAVED_ANGLE
:C:    IF DVAL>360 THEN DVAL=(DVAL-360) ENDIF
:C:    IF DVAL<-360 THEN DVAL=(DVAL+360) ENDIF
:C: GOTO9
:C: ENDIF
:C: IF MULTIAXIS_TYPE=2 THEN DVAL=ROT_TILT_B ENDIF
:C9: MACH(REGISTER)=(DVAL)
:C: INC_ROUNDOFF_B=0
*-----------------------------------
*
:SECTION=CALC_PROGRAM_NUMBER(CALC_NUM)
*
:C: SETON()
:C: IF CALC_NUM=0 THEN SETOFF() ENDIF
*----------------------------------------------------------
*----------------------------------------------------------
*  Define Machine "Macro call" Register Calculations
*----------------------------------------------------------
*
:SECTION=CALC_MACRO_ORIGIN(PROGRAM_END,REGISTER,CALC_NUM)
*
*   Macro Origin Register Calculations
*
:C: IF LAST_G=GC(G_PRESET) THEN GOTO5 ENDIF
:C: PREV(REGISTER)=MACH(REGISTER)
:C: IF G_GROUP(GG(G_INC))=GC(G_INC) THEN GOTO2 ENDIF
:C: BUCKET=(0)
:C: ROUNDOFF(PROGRAM_END,BUCKET,CALC_NUM,G_RIGHT_PLACES,METRIC_OUT)
:C: MACH(REGISTER)=(CALC_NUM)
:C: RETURN
:C2: BUCKET=(0)
:C: ROUNDOFF(PROGRAM_END-MACH(REGISTER),BUCKET,CALC_NUM,G_RIGHT_PLACES,METRIC_OUT)
:C: IF CALC_NUM<>0 THEN SETON() ELSE SETOFF() ENDIF
:C: MACH(REGISTER)=(MACH(REGISTER)+CALC_NUM)
:C: RETURN
*
*    G92 Preset
*
:C5: CALC_NUM=(MACH(REGISTER)-PROGRAM_END)
*:C5: CALC_NUM=(PROGRAM_END-MACH(REGISTER))
:C: SETON()
*-----------------------------------
*
:SECTION=CALC_X_DIRECTION(CALC_NUM)
*
:C: SETON()
:C: IF N_MOVE_TYPE=CW_ARC OR N_MOVE_TYPE=CCW_ARC THEN GOTO1 ENDIF
:C: CALC_NUM=N_INC_X_END
:C: RETURN
:C1: CALC_NUM=(SIN(N_ARC_START_ANGLE))
:C: IF N_MOVE_TYPE=CW_ARC THEN CALC_NUM=(-CALC_NUM) ENDIF
*----------------------------------------------------------
*
:SECTION=CALC_Y_DIRECTION(CALC_NUM)
*
:C: SETON()
:C: IF N_MOVE_TYPE=CW_ARC OR N_MOVE_TYPE=CCW_ARC THEN GOTO1 ENDIF
:C: CALC_NUM=N_INC_Y_END
:C: RETURN
:C1: CALC_NUM=(COS(N_ARC_START_ANGLE))
:C: IF N_MOVE_TYPE=CW_ARC THEN CALC_NUM=(-CALC_NUM) ENDIF
*----------------------------------------------------------
*
:SECTION=CALC_I_COSINE(CALC_NUM)
*
:C: SETON()
:C: IF N_MOVE_TYPE=CW_ARC OR N_MOVE_TYPE=CCW_ARC THEN GOTO1 ENDIF
:C: CALC_NUM=ABS(N_INC_X_END/N_DISTANCE)
:C: RETURN
:C1: CALC_NUM=(SIN(N_ARC_START_ANGLE))
:C: CALC_NUM=ABS(CALC_NUM)
*----------------------------------------------------------
*
:SECTION=CALC_INC_Z_DEPTH(DVAL,MACH,DEFAULTVAL,CUR_POSITION,REGISTER)
*
*   Calculate Incremental Decimal register
*
:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ELSE DVAL=DEFAULTVAL ENDIF
:C: DVAL=(DVAL-CUR_POSITION)
:C: MACH(REGISTER)=(DVAL+CUR_POSITION)
*-----------------------------------
*
:SECTION=CALC_J_SINE(CALC_NUM)
*
:C: SETON()
:C: IF N_MOVE_TYPE=CW_ARC OR N_MOVE_TYPE=CCW_ARC THEN GOTO1 ENDIF
:C: CALC_NUM=ABS(N_INC_Y_END/N_DISTANCE)
:C: RETURN
:C1: CALC_NUM=(COS(N_ARC_START_ANGLE))
:C: CALC_NUM=ABS(CALC_NUM)
*-----------------------------------
*
:SECTION=CALC_COMP_NUMBER(CALC_NUM,TNUM,CNUM)
*
:C: SETON()
:C: IF ATTROVERRIDE=YES THEN CALC_NUM=ATTRIVALUE GOTO1 ENDIF
:C: CALC_NUM=(TNUM+CNUM)
:C: IF CAMWORKS_VER>CAM_REV2007_SP3_1 THEN
:C:    IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_TOOL THEN
:C:    CALC_NUM=TOOL_DIAM_OFFSET
:C:    ENDIF
:C: ENDIF
:C1: IF COMP=GC(G_COMP_OFF) THEN SETOFF() ENDIF
*-----------------------------------
:SECTION=CALC_LOCKON(MVAL)
*
:C: IF ATTROVERRIDE=YES THEN
:C: MVAL=ATTRIVALUE
:C: RETURN
:C: ELSE
:C: MVAL=MC(M_LOCK_ON)
:C: ENDIF
:C: IF ABS(INC_ROT_TILT_B)<.001 THEN SETOFF() ELSE SETON() ENDIF
*-----------------------------------
:SECTION=CALC_LOCKOFF(MVAL)
*
:C: IF ATTROVERRIDE=YES THEN
:C: MVAL=ATTRIVALUE
:C: RETURN
:C: ELSE
:C: MVAL=MC(M_LOCK_OFF)
:C: ENDIF
:C: IF ABS(INC_ROT_TILT_B)<.001 THEN SETOFF() ELSE SETON() ENDIF
*----------------------------------------------------------
*  Define Calculation Sections
*----------------------------------------------------------
:SECTION=CALC_PRE_POST_INITIALIZE
* the meaning of conventional or non conventional are as follows
* Conventional = A rotates about X, B rotates about Y, C rotates about Z
* if your post has A or B axis not rotating about those standards then
* it is considered non conventional.
*
* most posts are none conventional so FALSE is default
*
* if your post or posts are conventional then create
* CONVENTIONAL_AXIS_LABELS section in your SRC file with nothing
* in it and then create CALC_CONVENTIONAL_AXIS_LABELS and set
* CONVENTIONAL_AXIS_LABELS=TRUE.
*
:C: CONVENTIONAL_AXIS_LABELS=FALSE
*
:C: IF SECTIONEXIST(CONVENTIONAL_AXIS_LABELS) THEN
:C: CALL(CALC_CONVENTIONAL_AXIS_LABELS)
:C: ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2013 OR CAMWORKS_VER>CAM_REV2013 THEN
:C: POST_LIBRARY_VERSION=2015
:C: POST_LIBRARY_SUBVERSION=1
:C: ENDIF
:C: NEVER_ZERO_OFFSET_RADIUS=0
:C: INC_ROUNDOFF_A=0
:C: INC_ROUNDOFF_B=0
*----------------------------------------------------------
:SECTION=CALC_POST_INITIALIZE
*
:C: IF CAMWORKS_VER=CAM_REV2013 OR CAMWORKS_VER>CAM_REV2013 THEN
:C: POST_LIBRARY_VERSION=2015
:C: POST_LIBRARY_SUBVERSION=1
:C: ENDIF
:C: NEVER_ZERO_OFFSET_RADIUS=0
*
:SECTION=CALC_START_OF_TAPE
:C: LARGE_POT=8
:C: DEFINING_MACRO=NO
:C: OFFSET_RESIDENT=NO
:C: SEQ=1
:C: SEQ_INCREMENT=1
:C: MAX_SEQUENCE=99999
:C: PRELOAD_LAST=YES
:C: END_OF_TAPE_PRELOAD=NO
:C: INC_SUBPROGRAMS=NO
:C: LINE_AT_ANGLE=0
:C: CALC_CHANGE_TOOL=1
:C: GC(G_FPM)=94
:C: G_GROUP(GG(G_FPM))=GC(G_FPM)
:C: FIRST_Z_POS=0
:C: MAX_ARC_RADIUS=0
:C: CALL(CALC_INITIALIZE)
*
*   PreLoad Tool Array
*
:C: GETTOOLS(2,CALC_PRELOAD_TOOL)
:C: IF LAST_PRELOAD<>0 THEN
:C:    IF LAST_PRELOAD<0 THEN
:C:    TOOL_ARRAY(0)=0
:C:    ELSE
:C:    TOOL_ARRAY(0)=LAST_PRELOAD
:C:    ENDIF
:C: ENDIF
:C: TOOL_ARRAY(ARRAY_COUNT)=TOOL_ARRAY(0)
:C: TOOL_DIAM_ARRAY(ARRAY_COUNT)=TOOL_DIAM_ARRAY(0)
:C: ARRAY_COUNT=1
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=0 CALL(DEBUG)
:C: ENDIF
*
*  PREDATOR_HEADER needs to be set in :SECTION=CALC_INIT_CODES of the SRC file
:C: IF PREDATOR_HEADER=1 THEN
:C:    IF SECTIONEXIST(START_PREDATOR_HEADER) THEN
:C:    CALL(START_PREDATOR_HEADER)
:C:    ENDIF
:C: GETTOOLS(1,CALC_PREDATOR_TOOLLIST)
:C:    IF SECTIONEXIST(END_PREDATOR_HEADER) THEN
:C:    CALL(END_PREDATOR_HEADER)
:C:    ENDIF
:C: ENDIF
*
*   Output Start of tape
*
:C: IF SECTIONEXIST(START_OF_TAPE) THEN
:C: CALL(START_OF_TAPE)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_PREDATOR_TOOLLIST
*
* CAMworks Tool Type
* 201 (Endmill)
* 202 (Ballnose)
* 203 (Hognose)
* 221 (Tapered Endmill)
* 222 (Tapered Ballnose)
* 223 (Tapered Hognose)
* 204 (Drill)
* 205 (Bore)
* 206 (Ream)
* 207 (Tap)
* 208 (Center Drill)
* 209 (Corner Round)
* 210 (Counter Sink)
* 211 (SP Thread Mill)
* 212 (MP Thread Mill)
* 213 (Dovetail)
* 214 (Keyway)
* 215 (Unknown)
* 216 (Lollipop)
* 217 (Facemill)
* 218 (Unknown)
* 301 (Round)
* 302 (Square)
* 303 (Triangle)
* 304 (Diamond)
* 305 (Diamond)
* 306 (Diamond)
* 315 (Diamond)
* 316 (Thread)
* 308 (Groove)
* 309 (Drill)
* 310 (Center Drill)
* 311 (Tap)
* 317 (Trigon)
* 318 (Hexagon)
*
*  Predator Tool Type
* 1  = FLAT
* 2  = BALL
* 3  = BULLNOSE
* 4  = DRILL
* 5  = RADIUS
* 6  = SPHERE
* 7  = CHAMFER
* 8  = DOVETAIL
* 9  = TAPERBALL
* 10 = TAPERBULL
*
:C: PREDATOR_TOOL_TYPE=1
:C: IF TOOL_TYPE=201 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=202 THEN PREDATOR_TOOL_TYPE=2 ENDIF
:C: IF TOOL_TYPE=203 THEN PREDATOR_TOOL_TYPE=3 ENDIF
:C: IF TOOL_TYPE=204 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=205 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=206 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=207 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=208 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=209 THEN PREDATOR_TOOL_TYPE=5 ENDIF
:C: IF TOOL_TYPE=210 THEN PREDATOR_TOOL_TYPE=7 ENDIF
:C: IF TOOL_TYPE=213 THEN PREDATOR_TOOL_TYPE=8 ENDIF
:C: IF TOOL_TYPE=217 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=221 THEN PREDATOR_TOOL_TYPE=9 ENDIF
:C: IF TOOL_TYPE=222 THEN PREDATOR_TOOL_TYPE=9 ENDIF
:C: IF TOOL_TYPE=223 THEN PREDATOR_TOOL_TYPE=10 ENDIF
:C: IF TOOL_TYPE=309 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=310 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=311 THEN PREDATOR_TOOL_TYPE=4 ENDIF
*
:C: SETOFF(<PREDATOR_CORNER_RADIUS>)
:C: IF TOOL_TYPE=209 THEN SETON(<PREDATOR_CORNER_RADIUS>) ENDIF
*
:C: SETOFF(<PREDATOR_TOOL_ANGLE>)
:C: IF TOOL_TYPE=204 OR TOOL_TYPE=208 OR TOOL_TYPE=210 OR TOOL_TYPE=221 OR TOOL_TYPE=222 OR TOOL_TYPE=223 THEN
:C: SETON(<PREDATOR_TOOL_ANGLE>)
:C: ENDIF
:C: IF TOOL_TYPE>204 AND TOOL_TYPE<208 THEN SETON(<PREDATOR_TOOL_ANGLE>) ENDIF
*
* until we get the flute length in posting the shank length = 0
:C: PREDATOR_SHANK_LENGTH=0
*
:C: IF SECTIONEXIST(PREDATOR_TOOLLIST) THEN
:C: CALL(PREDATOR_TOOLLIST)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_INIT_TOOL_CHANGE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=31 CALL(DEBUG)
:C: ENDIF
*
*:C: IF OPER_COUNT>1 THEN CALL(CALC_SUB_TOOL_CHANGE_MILL) RETURN ENDIF
:C: IF MACH(REG_T2)<>0 THEN CALL(CALC_SUB_TOOL_CHANGE_MILL) RETURN ENDIF
*
*    If you are defining a macro then you stop here!
*
:C: P_MOVE_TYPE=TOOL_CHANGE
:C: IF DEFINING_MACRO=(YES) THEN CALL(CALC_CHECK_OPER_COMMENTS) RETURN ENDIF
:C: IF MACH(REG_T)<>0 AND MACH(REG_T)=TOOL THEN RETURN ENDIF
:C: CALC_CHANGE_TOOL=1
:C: TOOL_ARRAY(ARRAY_COUNT)=NC_TOOL
:C: TOOL_DIAM_ARRAY(ARRAY_COUNT)=NC_TOOL_DIAMETER
:C: IF NC_TOOL=(-1) THEN TOOL_DIAM_ARRAY(ARRAY_COUNT)=TOOL_DIAM_ARRAY(0) ENDIF
:C: NEXT_TOOL=TOOL_ARRAY(ARRAY_COUNT)
:C: POT_NUMBER=10
:C: IF TOOL_DIAMETER>LARGE_POT THEN POT_NUMBER=90 ENDIF
:C: NEXT_POT_NUMBER=10
:C: IF TOOL_DIAM_ARRAY(ARRAY_COUNT)>LARGE_POT THEN NEXT_POT_NUMBER=90 ENDIF
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_TOOL_CHANGE_TIME)
:C: ENDIF
*
:C: IF TOOL_COMMENT={} THEN
:C: SETOFF(<TOOL_COMMENT>) ELSE
:C: SETON(<TOOL_COMMENT>)
:C: ENDIF
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:    IF SUB_STATION_ID={} THEN
:C:    SETOFF(<SUB_STATION_ID>) ELSE
:C:    SETON(<SUB_STATION_ID>)
:C:    ENDIF
:C: ENDIF
*
:C: IF SECTIONEXIST(INIT_PRELOAD_TOOL_CHANGE_MILL) THEN
:C: CALL(CALC_INIT_PRELOAD_TOOL_CHANGE)
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: MACH(REG_T)=TOOL
:C: FIRST_TOOL=TOOL
:C: LAST_TOOL=TOOL
:C: MACH(REG_F)=0
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(INIT_TOOL_CHANGE_MILL) THEN
:C: CALL(INIT_TOOL_CHANGE_MILL)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: MACH(REG_T)=TOOL
:C: FIRST_TOOL=TOOL
:C: LAST_TOOL=TOOL
:C: MACH(REG_F)=0
*-----------------------------------
:SECTION=CALC_INIT_PRELOAD_TOOL_CHANGE
:C: IF NC_TOOL<>(-1) THEN CALL(INIT_PRELOAD_TOOL_CHANGE_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(INIT_TOOL_CHANGE_MILL) THEN
:C: CALL(INIT_TOOL_CHANGE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_BEF_SETON_CODES
:C: RETURN
*
:SECTION=CALC_AFT_SETON_CODES
:C: RETURN
*
:SECTION=CALC_SUB_TOOL_CHANGE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=5 CALL(DEBUG)
:C: ENDIF
*
*   Startup Seton Codes
*
:C: CALL(CALC_BEF_SETON_CODES)
:C: G=GC(G_LEN_COMP) SETON(<G>)
:C: M=MC(M_COOL_OFF) SETON(<M>)
*
*    If you are defining a macro then you stop here!
*
:C: P_MOVE_TYPE=TOOL_CHANGE
:C: IF DEFINING_MACRO=(YES) THEN CALL(CALC_CHECK_OPER_COMMENTS) RETURN ENDIF
:C: IF MACH(REG_T)<>0 AND MACH(REG_T)=TOOL THEN RETURN ENDIF
:C: CALC_CHANGE_TOOL=(CALC_CHANGE_TOOL+1)
:C: IF OFFSET_RESIDENT=YES THEN CALL(CALC_REMOVE_OFFSET) ENDIF
:C: IF TOOL=NC_TOOL THEN NC_TOOL=(-1) ENDIF
:C: TOOL_ARRAY(ARRAY_COUNT)=NC_TOOL
:C: TOOL_DIAM_ARRAY(ARRAY_COUNT)=NC_TOOL_DIAMETER
:C: IF NC_TOOL=(-1) THEN TOOL_DIAM_ARRAY(ARRAY_COUNT)=TOOL_DIAM_ARRAY(0) ENDIF
:C: NEXT_TOOL=TOOL_ARRAY(ARRAY_COUNT)
:C: POT_NUMBER=10
:C: IF TOOL_DIAMETER>LARGE_POT THEN POT_NUMBER=90 ENDIF
:C: NEXT_POT_NUMBER=10
:C: IF TOOL_DIAM_ARRAY(ARRAY_COUNT)>LARGE_POT THEN NEXT_POT_NUMBER=90 ENDIF
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
:C: CALL(CALC_TOOL_CHANGE_TIME)
*
:C: IF TOOL_COMMENT={} THEN
:C: SETOFF(<TOOL_COMMENT>) ELSE
:C: SETON(<TOOL_COMMENT>)
:C: ENDIF
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:    IF SUB_STATION_ID={} THEN
:C:    SETOFF(<SUB_STATION_ID>) ELSE
:C:    SETON(<SUB_STATION_ID>)
:C:    ENDIF
:C: ENDIF
*
:C: IF SECTIONEXIST(SUB_PRELOAD_TOOL_CHANGE_MILL) THEN
:C: CALL(CALC_SUB_PRELOAD_TOOL_CHANGE)
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: CALL(CALC_AFT_SETON_CODES)
:C: MACH(REG_T)=TOOL
:C: LAST_TOOL=TOOL
:C: MACH(REG_Z)=MILL_Z_HOME
:C: MACH(REG_F)=0
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(SUB_TOOL_CHANGE_MILL) THEN
:C: CALL(SUB_TOOL_CHANGE_MILL)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: CALL(CALC_AFT_SETON_CODES)
:C: MACH(REG_T)=TOOL
:C: LAST_TOOL=TOOL
:C: MACH(REG_Z)=MILL_Z_HOME
:C: MACH(REG_F)=0
*-----------------------------------
:SECTION=CALC_SUB_PRELOAD_TOOL_CHANGE
:C: IF PRELOAD_LAST=NO AND NC_TOOL=(-1)
:C: THEN CALL(SUB_TOOL_CHANGE_MILL) RETURN
:C: ENDIF
:C: IF NC_TOOL=(-1) THEN NC_TOOL=TOOL_ARRAY(0) NEXT_TOOL=NC_TOOL ENDIF
:C: IF TOOL<>NC_TOOL THEN CALL(SUB_PRELOAD_TOOL_CHANGE_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(SUB_TOOL_CHANGE_MILL) THEN
:C: CALL(SUB_TOOL_CHANGE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_PRELOAD_TOOL
:C: IF SECTIONEXIST(TOOL_LIST) THEN
:C: CALL(TOOL_LIST)
:C: ENDIF
:C: TOOL_COUNT=(TOOL_COUNT+1)
:C: TOOL_ARRAY(ARRAY_COUNT)=TOOL
:C: TOOL_DIAM_ARRAY(ARRAY_COUNT)=TOOL_DIAMETER
:C: TOOL_LENGTH_ARRAY(ARRAY_COUNT)=TOOL_LENGTH
:C: TOOL_COMM_ARRAY(ARRAY_COUNT)=TOOL_COMMENT
:C: TOOL_TYPE_ARRAY(ARRAY_COUNT)=TOOL_TYPE
:C: TOOL_CORNER_RADIUS_ARRAY(ARRAY_COUNT)=TOOL_CORNER_RADIUS
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
*-----------------------------------
:SECTION=CALC_RAPID_Z_DOWN_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=12 CALL(DEBUG)
:C: ENDIF
:C: IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_RAPID_Z_MOVE_DOWN) THEN
:C:    CALL(CALC_FIVE_AXIS_RAPID_Z_MOVE_DOWN)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(MACRO_RAPID_CALL_MILL) THEN
:C: CALL(CALC_RAPID_Z_DOWN_MACRO)
:C: RETURN
:C: ENDIF
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C: X_POS=ABS_X_END Y_POS=ABS_Y_END
:C:    IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    CALL(CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE)
:C:    ELSE
:C:    CALL(CALC_RAPID_FROM_TOOL_CHANGE_MILL)
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_RAPID_TIME)
:C: ENDIF
:C: IF SECTIONEXIST(RAPID_Z_MOVE_DOWN_LEN_COMP_MILL) THEN
:C:  IF G_GROUP(GG(G_LEN_COMP))<>GC(G_LEN_COMP)
:C:  THEN CALL(RAPID_Z_MOVE_DOWN_LEN_COMP_MILL)
:C:  R_PLANE=ABS_Z_END RETURN
:C:  ENDIF
:C: ENDIF
:C: IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:    IF SECTIONEXIST(FIRST_RAPID_Z_PRELOAD_DOWN_MILL) THEN
:C:    CALL(CALC_FIRST_RAPID_Z_PRELOAD_DOWN_MILL)
:C:    ELSE
:C:    CALL(CALC_FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C:    ENDIF
:C: ELSE
:C:    IF HOLD_Z_DOWN_FLAG=1 THEN
:C:       IF HOLD_Z_DOWN<>1 THEN
:C:       CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:       ELSE
:C:       HOLD_Z_DOWN=0
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:    CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:    ENDIF
:C: ENDIF
:C: R_PLANE=ABS_Z_END
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_RAPID_Z_MOVE_DOWN
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C: X_POS=ABS_X_END Y_POS=ABS_Y_END CALL(CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_RAPID_TIME)
:C: ENDIF
:C: IF MACH(REG_Z)=MILL_Z_HOME THEN
:C: CALL(CALC_FIVE_AXIS_FIRST_RAPID_Z_DOWN)
:C: ELSE
:C: CALL(FIVE_AXIS_RAPID_Z_MOVE_DOWN)
:C: ENDIF
:C: R_PLANE=ABS_Z_END
*-----------------------------------
:SECTION=CALC_RAPID_Z_DOWN_MACRO
:C: IF DEFINING_MACRO=NO THEN
:C:    IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:    X_POS=ABS_X_END Y_POS=ABS_Y_END
:C:       IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:       CALL(CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE)
:C:       ELSE
:C:       CALL(CALC_RAPID_FROM_TOOL_CHANGE_MILL)
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C:    IF FIRST_Z_POS=0 THEN
:C:    SAVE_RAPID_X=ABS_X_END SAVE_RAPID_Y=ABS_Y_END
:C:    MACH(REG_X)=SAVE_RAPID_X
:C:    MACH(REG_Y)=SAVE_RAPID_Y
:C:    FIRST_Z_POS=1
:C:    ENDIF
:C: G_GROUP(GG(G_RAPID))=GC(G_RAPID)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_RAPID_TIME)
:C: ENDIF
:C: IF SECTIONEXIST(RAPID_Z_MOVE_DOWN_LEN_COMP_MILL) THEN
:C:  IF G_GROUP(GG(G_LEN_COMP))<>GC(G_LEN_COMP)
:C:  THEN CALL(RAPID_Z_MOVE_DOWN_LEN_COMP_MILL)
:C:  R_PLANE=ABS_Z_END RETURN
:C:  ENDIF
:C: ENDIF
:C: IF DEFINING_MACRO=NO THEN
:C:    IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:    CALL(CALC_FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C:    ELSE
:C:    CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:    ENDIF
:C: ELSE
:C:    IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:    SAVE_RAPID_Z=ABS_Z_END
:C:    ELSE
:C:    CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:    ENDIF
:C: ENDIF
:C: R_PLANE=ABS_Z_END
*-----------------------------------
:SECTION=CALC_FIRST_RAPID_Z_MOVE_DOWN_MILL
:C: IF SECTIONEXIST(FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C: THEN CALL(FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C: ELSE CALL(RAPID_Z_MOVE_DOWN_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_FIRST_RAPID_Z_DOWN
:C: IF SECTIONEXIST(FIVE_AXIS_FIRST_RAPID_Z_DOWN)
:C: THEN CALL(FIVE_AXIS_FIRST_RAPID_Z_DOWN)
:C: ELSE CALL(FIVE_AXIS_RAPID_Z_MOVE_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FIRST_RAPID_Z_PRELOAD_DOWN_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=28 CALL(DEBUG)
:C: ENDIF
:C: IF PRELOAD_LAST=NO AND NC_TOOL=(-1) THEN
:C:    IF SECTIONEXIST(FIRST_RAPID_Z_MOVE_DOWN_MILL) THEN
:C:    CALL(FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C:    RETURN
:C:    ELSE
:C:    CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF NC_TOOL=(-1) THEN NC_TOOL=TOOL_ARRAY(0) NEXT_TOOL=NC_TOOL ENDIF
:C: IF TOOL<>NC_TOOL AND NC_TOOL<>0 THEN
:C: CALL(FIRST_RAPID_Z_PRELOAD_DOWN_MILL)
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(FIRST_RAPID_Z_MOVE_DOWN_MILL) THEN
:C: CALL(FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C: ELSE
:C: CALL(RAPID_Z_MOVE_DOWN_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_RAPID_Z_UP_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=13 CALL(DEBUG)
:C: ENDIF
:C: IF G_GROUP(GG(G_CANCEL_CYC))<>GC(G_CANCEL_CYC)
:C: THEN CALL(CALC_END_DRILL_CYCLE)
:C: RETURN
:C: ENDIF
:C: IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_RAPID_Z_MOVE_UP) THEN
:C:    CALL(CALC_FIVE_AXIS_RAPID_Z_MOVE_UP)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_RAPID_TIME)
:C: ENDIF
*:C: IF ABS_Z_END=MILL_Z_HOME THEN ABS_Z_END=OPR_Z_RAPID_PLANE ENDIF
:C: IF SECTIONEXIST(RAPID_Z_MOVE_UP_LEN_COMP_MILL) THEN
:C:  IF G_GROUP(GG(G_LEN_COMP))<>GC(G_LEN_COMP)
:C:  THEN CALL(CALC_RAPID_Z_MOVE_UP_LEN_COMP_MILL) RETURN
:C:  ENDIF
:C: ENDIF
:C: IF HOLD_Z_DOWN_FLAG=1 THEN
:C:    IF N_TOOL=TOOL AND N_MOVE_TYPE<>6 AND N_MOVE_TYPE<>7 THEN
:C:       IF ABS(N_INC_X_END)<(ROUNDING_POINT*2) AND ABS(N_INC_Y_END)<(ROUNDING_POINT*2) THEN
:C:       HOLD_Z_DOWN=1
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_Z_MOVE_UP_MILL) R_PLANE=MACH(REG_Z)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C:    IF N_TOOL=TOOL AND N_MOVE_TYPE<>6 AND N_MOVE_TYPE<>7 THEN
:C:    CALL(RAPID_Z_MOVE_UP_MILL) R_PLANE=MACH(REG_Z)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(LAST_RAPID_Z_MOVE_UP_MILL) THEN
:C: CALL(LAST_RAPID_Z_MOVE_UP_MILL) MACH(REG_Z)=MILL_Z_HOME
:C: ELSE
:C: CALL(RAPID_Z_MOVE_UP_MILL) MACH(REG_Z)=MILL_Z_HOME
:C: ENDIF
:C: R_PLANE=MACH(REG_Z)
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_RAPID_Z_MOVE_UP
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_RAPID_TIME)
:C: ENDIF
*:C: IF ABS_Z_END=MILL_Z_HOME THEN ABS_Z_END=OPR_Z_RAPID_PLANE ENDIF
:C: IF N_TOOL=TOOL AND N_MOVE_TYPE<>6 AND N_MOVE_TYPE<>7 THEN
:C: CALL(FIVE_AXIS_RAPID_Z_MOVE_UP) R_PLANE=MACH(REG_Z) RETURN
:C: ENDIF
:C: IF SECTIONEXIST(FIVE_AXIS_LAST_RAPID_Z_MOVE_UP)
:C: THEN CALL(FIVE_AXIS_LAST_RAPID_Z_MOVE_UP) MACH(REG_Z)=MILL_Z_HOME
:C: ELSE CALL(FIVE_AXIS_RAPID_Z_MOVE_UP) MACH(REG_Z)=MILL_Z_HOME
:C: ENDIF
:C: R_PLANE=MACH(REG_Z)
*-----------------------------------
:SECTION=CALC_RAPID_Z_MOVE_UP_LEN_COMP_MILL
:C: IF N_TOOL=TOOL AND N_MOVE_TYPE<>6 AND N_MOVE_TYPE<>7
:C: THEN CALL(RAPID_Z_MOVE_UP_LEN_COMP_MILL)
:C: G_GROUP(GG(G_LEN_COMP))=GC(G_LEN_COMP)
:C: R_PLANE=MACH(REG_Z) RETURN
:C: ENDIF
:C: IF SECTIONEXIST(LAST_RAPID_Z_MOVE_UP_LEN_COMP_MILL)
:C: THEN CALL(LAST_RAPID_Z_MOVE_UP_LEN_COMP_MILL)
:C: MACH(REG_Z)=MILL_Z_HOME R_PLANE=MACH(REG_Z)
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(LAST_RAPID_Z_MOVE_UP_MILL)
:C: THEN CALL(LAST_RAPID_Z_MOVE_UP_MILL) MACH(REG_Z)=MILL_Z_HOME
:C: ELSE CALL(RAPID_Z_MOVE_UP_MILL) MACH(REG_Z)=MILL_Z_HOME
:C: ENDIF
:C: R_PLANE=MACH(REG_Z)
*-----------------------------------
:SECTION=CALC_RAPID_MOVE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=3 CALL(DEBUG)
:C: ENDIF
:C: IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_RAPID_MOVE_MILL) THEN
:C:    CALL(CALC_FIVE_AXIS_RAPID_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF DEFINING_MACRO=YES THEN
:C:    IF SECTIONEXIST(MACRO_RAPID_CALL_MILL) THEN
:C:       IF SECTIONEXIST(RAPID_MOVE_MILL) THEN
:C:       X_POS=ABS_X_END
:C:       Y_POS=ABS_Y_END
:C:          IF ABS(MACH(REG_X)-X_POS)<(ROUNDING_POINT*2) AND ABS(MACH(REG_Y)-Y_POS)<(ROUNDING_POINT*2) THEN
:C:          RETURN
:C:          ELSE
:C:          CALL(RAPID_MOVE_MILL)
:C:          ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: ENDIF
:C: IF G_GROUP(GG(G_CANCEL_CYC))<>GC(G_CANCEL_CYC) THEN
:C: CALL(CALC_END_DRILL_CYCLE)
:C: ENDIF
:C: IF G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) AND LEADIN=YES THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    GOTO1
:C:    ENDIF
:C: ENDIF
:C: IF G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    ENDIF
:C: ENDIF
:C1: IF CALLED_RAPID_WORK_COORD<>0 THEN
:C: X_POS=ABS_X_START
:C: Y_POS=ABS_Y_START
:C: ELSE
:C:    IF LINE_AT_ANGLE=0 THEN
:C:    X_POS=ABS_X_END
:C:    Y_POS=ABS_Y_END
:C:    ELSE
:C:    LINE_AT_ANGLE=0
:C:    ENDIF
:C: ENDIF
:C: IF N_TOOL=TOOL AND N_MOVE_TYPE=RAPID AND G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF CALLED_RAPID_WORK_COORD<>0 AND COMP<>GC(G_COMP_OFF) AND
:C: G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND LEADIN=NO THEN
:C:    IF SECTIONEXIST(RAPID_LEADIN_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C: CALL(CALC_RAPID_FROM_TOOL_CHANGE_MILL) P_MOVE_TYPE=RAPID RETURN
:C: ENDIF
:C: IF N_TOOL<>TOOL AND OPR_TYPE<>MILL_DRILLING THEN
:C: CALL(CALC_RAPID_TO_TOOL_CHANGE_MILL)
* change #1 ---- 1-5-93
:C: MACH(REG_Z)=MILL_Z_HOME
:C: RETURN
:C: ENDIF
:C: IF LEADIN<>YES THEN
:C: CALL(RAPID_MOVE_MILL)
:C: RETURN
:C: ENDIF
:C: IF LEADIN=YES THEN
:C:    IF COMP<>GC(G_COMP_OFF) AND CALLED_RAPID_WORK_COORD=0 THEN
:C:       IF SECTIONEXIST(RAPID_LEADIN_MOVE_MILL) THEN
:C:       CALL(RAPID_LEADIN_MOVE_MILL)
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_MILL)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:    CALL(RAPID_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ELSE
:C: CALL(RAPID_MOVE_MILL)
:C: RETURN
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_RAPID_MOVE_MILL
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: ENDIF
*:C: IF MACH(REG_X)=ABS_X_END AND
*:C: MACH(REG_Y)=ABS_Y_END AND
*:C: MACH(REG_Z)=ABS_Z_END AND
*:C: ABS(INC_ROT_TILT_B)<(ROUNDING_POINT/2) THEN
*:C: RETURN
*:C: ENDIF
*
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: IF G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) AND LEADIN=YES THEN
:C:    IF SECTIONEXIST(5AXIS_RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(5AXIS_RAPID_LEADOUT_MOVE_MILL)
:C:    GOTO1
:C:    ENDIF
:C: ENDIF
:C: IF N_TOOL=TOOL AND N_MOVE_TYPE=RAPID AND G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C1: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C: CALL(CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE) P_MOVE_TYPE=RAPID RETURN
:C: ENDIF
:C: IF N_TOOL<>TOOL AND OPR_TYPE<>MILL_DRILLING THEN
:C: CALL(CALC_FIVE_AXIS_RAPID_TO_T_CHANGE)
:C: MACH(REG_Z)=MILL_Z_HOME
:C: RETURN
:C: ENDIF
:C: IF LEADIN=YES THEN
:C:    IF COMP<>GC(G_COMP_OFF) AND CALLED_RAPID_WORK_COORD=0 THEN
:C:       IF SECTIONEXIST(5AXIS_RAPID_LEADIN_MOVE_MILL) THEN
:C:       CALL(5AXIS_RAPID_LEADIN_MOVE_MILL)
:C:       RETURN
:C:       ELSE
:C:       CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:    CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ELSE
:C: CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C: RETURN
:C: ENDIF
:C: CALL(FIVE_AXIS_RAPID_MOVE_MILL)
*-----------------------------------
:SECTION=CALC_RAPID_FROM_TOOL_CHANGE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=22 CALL(DEBUG)
:C: ENDIF
:C: IF LEADIN<>YES THEN
:C:    IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_MILL) THEN
:C:    CALL(RAPID_FROM_TOOL_CHANGE_MILL)
:C:    RETURN
:C:    ELSE
:C:    CALL(RAPID_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF COMP<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(RAPID_LEADIN_FROM_TOOL_CHANGE_MILL) THEN
:C:    CALL(RAPID_LEADIN_FROM_TOOL_CHANGE_MILL)
:C:    RETURN
:C:    ENDIF
:C:    IF SECTIONEXIST(RAPID_LEADIN_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_MILL) THEN
:C: CALL(RAPID_FROM_TOOL_CHANGE_MILL)
:C: RETURN
:C: ELSE
:C: CALL(RAPID_MOVE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=33 CALL(DEBUG)
:C: ENDIF
:C: IF LEADIN<>YES THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_RAPID_FROM_T_CHANGE) THEN
:C:    CALL(FIVE_AXIS_RAPID_FROM_T_CHANGE)
:C:    RETURN
:C:    ELSE
:C:       IF COMP<>GC(G_COMP_OFF) THEN
:C:          IF SECTIONEXIST(5AXIS_RAPID_LEADIN_FROM_TOOL_CHANGE_MILL) THEN
:C:          CALL(5AXIS_RAPID_LEADIN_FROM_TOOL_CHANGE_MILL)
:C:          RETURN
:C:          ENDIF
:C:          IF SECTIONEXIST(5AXIS_RAPID_LEADIN_MOVE_MILL) THEN
:C:          CALL(5AXIS_RAPID_LEADIN_MOVE_MILL)
:C:          RETURN
:C:          ENDIF
:C:       ENDIF
:C:       IF SECTIONEXIST(FIVE_AXIS_RAPID_MOVE_MILL) THEN
:C:       CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C:       ELSE
:C:       CALL(RAPID_MOVE_MILL)
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF COMP<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(5AXIS_RAPID_LEADIN_FROM_TOOL_CHANGE_MILL) THEN
:C:    CALL(5AXIS_RAPID_LEADIN_FROM_TOOL_CHANGE_MILL)
:C:    RETURN
:C:    ENDIF
:C:    IF SECTIONEXIST(5AXIS_RAPID_LEADIN_MOVE_MILL) THEN
:C:    CALL(5AXIS_RAPID_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(FIVE_AXIS_RAPID_MOVE_MILL) THEN
:C: CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C: ELSE
:C: CALL(RAPID_MOVE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_RAPID_TO_TOOL_CHANGE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=23 CALL(DEBUG)
:C: ENDIF
:C: IF G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_TO_TOOL_CHANGE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_TO_TOOL_CHANGE_MILL)
:C:    GOTO1
:C:    ENDIF
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    GOTO1
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_MILL) THEN
:C: CALL(RAPID_TO_TOOL_CHANGE_MILL)
:C: GOTO1
:C: ELSE
:C: CALL(RAPID_MOVE_MILL)
:C: ENDIF
:C1: IF SECTIONEXIST(LAST_RAPID_Z_MOVE_UP_MILL) THEN
:C:    IF MACH(REG_Z)<>MILL_Z_HOME THEN CALL(CALC_RAPID_Z_UP_MILL) ENDIF
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_RAPID_TO_T_CHANGE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=23 CALL(DEBUG)
:C: ENDIF
:C: IF SECTIONEXIST(FIVE_AXIS_RAPID_TO_T_CHANGE)
:C: THEN CALL(FIVE_AXIS_RAPID_TO_T_CHANGE) RETURN
:C: ENDIF
:C: CALL(FIVE_AXIS_RAPID_MOVE_MILL)
:C: IF SECTIONEXIST(FIVE_AXIS_LAST_RAPID_Z_MOVE_UP) THEN
:C:    IF MACH(REG_Z)<>MILL_Z_HOME THEN CALL(CALC_FIVE_AXIS_RAPID_Z_MOVE_UP) ENDIF
:C: ENDIF
*-----------------------------------
******************************************
* this section is for CW2007 allowing rapids in drilling cycles
* RAPID_DURING_DRILL_CYCLE=FALSE or not set in your post if you are not supporting
* rapid moves in drilling (when you edit the toolpath and add rapids etc)
******************************************
:SECTION=CALC_ALLOW_RAPID_DURING_DRILL
*
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:    IF RAPID_DURING=1 THEN
:C:    RAPID_DURING_DRILL_CYCLE=TRUE
:C:    ENDIF
:C: ENDIF
******************************************
*-----------------------------------
:SECTION=CALC_FEED_Z_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=14 CALL(DEBUG)
:C: ENDIF
:C: IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_FEED_Z_MOVE_DOWN) THEN
:C:    CALL(CALC_FIVE_AXIS_FEED_Z_MOVE_DOWN)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_FEED_TIME)
:C: ENDIF
:C: IF SECTIONEXIST(COMPENSATION) THEN
:C: CALL(CALC_MACHINE_COMP)
:C:  IF COMP<>G_GROUP(GG(G_COMP_LEFT)) THEN CALL(COMPENSATION) ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(FEED_Z_MOVE_DOWN_LEN_COMP_MILL) THEN
:C:  IF G_GROUP(GG(G_LEN_COMP))<>GC(G_LEN_COMP)
:C:  THEN CALL(FEED_Z_MOVE_DOWN_LEN_COMP_MILL) R_PLANE=MACH(REG_Z) RETURN
:C:  ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(FIRST_FEED_Z_DOWN_MILL) THEN
:C:  IF ABS(R_PLANE-MACH(REG_Z))>.00005
:C:  THEN CALL(FIRST_FEED_Z_DOWN_MILL) R_PLANE=MACH(REG_Z) RETURN
:C:  ENDIF
:C: ENDIF
*
:C: IF ABS(MACH(REG_Z)-ABS_Z_END)<(ROUNDING_POINT*2) THEN
:C: RETURN
:C: ENDIF
*
:C: CALL(FEED_Z_MOVE_DOWN_MILL)
:C: R_PLANE=MACH(REG_Z)
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_FEED_Z_MOVE_DOWN
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MILL_Z_FEED_TIME)
:C: ENDIF
:C: IF SECTIONEXIST(COMPENSATION) THEN
:C: CALL(CALC_MACHINE_COMP)
:C:  IF COMP<>G_GROUP(GG(G_COMP_LEFT)) THEN CALL(COMPENSATION) ENDIF
:C: ENDIF
*
:C: IF ABS(MACH(REG_Z)-ABS_Z_END)<(ROUNDING_POINT*2) THEN
:C: RETURN
:C: ENDIF
*
:C: CALL(FIVE_AXIS_FEED_Z_MOVE_DOWN)
:C: R_PLANE=MACH(REG_Z)
*-----------------------------------
:SECTION=CALC_LINE_MOVE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=1 CALL(DEBUG)
:C: ENDIF
*
:C: CALL(CALC_MACHINE_COMP)
*
*:C: IF OPR_TYPE<>MILL_PROFILING THEN
:C:    IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:       IF SECTIONEXIST(FIVE_AXIS_LINE_MOVE_MILL) THEN
:C:       CALL(CALC_FIVE_AXIS_LINE_MOVE_MILL)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
*:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: IF LEADOUT=YES THEN CALL(CALC_LINE_LEADOUT_MOVE) N_LEADOUT=NO RETURN ENDIF
*:C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND LEADIN=YES THEN
*:C: CALL(CALC_LINE_LEADIN_MOVE)
*:C: RETURN
*:C: ENDIF
:C: IF P_MOVE_TYPE<>LINE AND LEADIN=YES THEN CALL(CALC_LINE_LEADIN_MOVE) RETURN ENDIF
*:C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE THEN
:C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND P_LEADIN=YES THEN
:C: CALL(CALC_LINE_LEADIN_MOVE)
:C: RETURN
:C: ENDIF
:C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND LEADIN=YES THEN
:C: CALL(CALC_LINE_LEADIN_MOVE)
:C: RETURN
:C: ENDIF
:C: IF ABS(MACH(REG_X)-ABS_X_END)<(ROUNDING_POINT*2) AND ABS(MACH(REG_Y)-ABS_Y_END)<(ROUNDING_POINT*2)
:C: AND ABS(MACH(REG_Z)-ABS_Z_END)<(ROUNDING_POINT*2) THEN
:C: RETURN
:C: ENDIF
:C: CALL(LINE_MOVE_MILL)
*-----------------------------------
:SECTION=CALC_FIVE_AXIS_LINE_MOVE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=38 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: CALL(CALC_MACHINE_COMP)
*
* made this change 7-30-09 to handle prepostion and Wrapped cutter comp in standard sections
* and just call FIVE_AXIS_LINE_MOVE_MILL for any multiaxis operation (1020).
:C: IF OPR_TYPE=1020 THEN
:C: CALL(FIVE_AXIS_LINE_MOVE_MILL)
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(5AXIS_LINE_LEADOUT_MOVE_MILL) THEN
:C:    IF LEADOUT=YES THEN
:C:    CALL(5AXIS_LINE_LEADOUT_MOVE_MILL)
:C:    N_LEADOUT=NO
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(5AXIS_LINE_LEADIN_MOVE_MILL) THEN
:C:    IF P_MOVE_TYPE<>LINE AND LEADIN=YES THEN
:C:    CALL(5AXIS_LINE_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C:    IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE THEN
:C:    CALL(5AXIS_LINE_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*:C: IF SECTIONEXIST(LINE_LEADOUT_MOVE_MILL) THEN
*:C:    IF LEADOUT=YES THEN
*:C:    CALL(LINE_LEADOUT_MOVE_MILL)
*:C:    N_LEADOUT=NO
*:C:    RETURN
*:C:    ENDIF
*:C: ENDIF
:C: IF SECTIONEXIST(5AXIS_LINE_LEADOUT_MOVE_MILL) THEN
:C:    IF LEADOUT=YES THEN
:C:    CALL(5AXIS_LINE_LEADOUT_MOVE_MILL)
:C:    N_LEADOUT=NO
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(LINE_LEADIN_MOVE_MILL) THEN
:C:    IF P_MOVE_TYPE<>LINE AND LEADIN=YES THEN
:C:    CALL(LINE_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C:    IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE THEN
:C:    CALL(LINE_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C:    IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND LEADIN=YES THEN
:C:    CALL(LINE_LEADIN_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: CALL(FIVE_AXIS_LINE_MOVE_MILL)
*-----------------------------------
:SECTION=CALC_LINE_LEADOUT_MOVE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=39 CALL(DEBUG)
:C: ENDIF
*
:C: IF COMP=GC(G_COMP_OFF) THEN CALL(LINE_MOVE_MILL) RETURN ENDIF
:C: COMP=GC(G_COMP_OFF)
:C: IF SECTIONEXIST(LINE_LEADOUT_MOVE_MILL)
:C: THEN CALL(LINE_LEADOUT_MOVE_MILL) CALL(CALC_MACHINE_COMP)
:C: ELSE CALL(LINE_MOVE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_LINE_LEADIN_MOVE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=37 CALL(DEBUG)
:C: ENDIF
*
:C: CALL(CALC_MACHINE_COMP)
:C: IF COMP=GC(G_COMP_OFF) THEN CALL(LINE_MOVE_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(LINE_LEADIN_MOVE_MILL) THEN
:C: CALL(LINE_LEADIN_MOVE_MILL)
:C: ELSE
:C: CALL(LINE_MOVE_MILL)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_MACHINE_COMP
*
*   Machine Comp
*
:C: IF OPR_TYPE=MILL_DRILLING THEN
:C: COMP=GC(G_COMP_OFF)
:C: G_GROUP(GG(G_COMP_OFF))=COMP
:C: RETURN
:C: ENDIF
:C: IF OPR_TYPE=MILL_LACE
:C: OR OPR_TYPE=MILL_POCKET
:C: OR OPR_TYPE=MILL_MISC
:C: OR OPR_TYPE=MILL_SPECIAL
:C: OR OPR_TYPE=MILL_UV_CUT
:C: OR OPR_TYPE=MILL_SLICE_CUT
:C: OR OPR_TYPE=MILL_ROUGH_CUT
:C: OR OPR_TYPE=MILL_CURVE_CUT
:C: OR OPR_TYPE=MILL_TOPO_CUT
:C: OR OPR_TYPE=MILL_FREEFORM_CUT
:C: OR OPR_TYPE=MILL_PENCIL_CUT
:C: OR OPR_TYPE=0
:C: THEN COMP=GC(G_COMP_OFF) G_GROUP(GG(G_COMP_OFF))=COMP RETURN
:C: ENDIF
:C: IF machine_compensation<>1 THEN GOTO2 ENDIF
:C: IF O_DIRECTION=OFFSET_LEFT
:C: OR O_DIRECTION=CENTER_LEFT
:C: THEN COMP=GC(G_COMP_LEFT)
:C: ENDIF
:C: IF O_DIRECTION=OFFSET_RIGHT
:C: OR O_DIRECTION=CENTER_RIGHT
:C: THEN COMP=GC(G_COMP_RIGHT)
:C: ENDIF
:C2: IF machine_compensation=2 THEN COMP=GC(G_COMP_OFF) ENDIF
:C: IF machine_compensation=3 THEN COMP=GC(G_COMP_LEFT) ENDIF
:C: IF machine_compensation=4 THEN COMP=GC(G_COMP_RIGHT) ENDIF
*-----------------------------------
:SECTION=CALC_ARC_MOVE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=2 CALL(DEBUG)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
*********************************************************
* this logic is to handle arc radius that is greater than controller allows.
* if you need to change MAX_ARC_RADIUS to a different value then copy that
* post varable to your SRC file in CALC_INIT_CODES and set it.
* If ARC_RADIUS is greater than MAX_ARC_RADIUS then break arc.
:C: IF MAX_ARC_RADIUS=0 THEN MAX_ARC_RADIUS=9999 ENDIF
:C: IF ARC_RADIUS>MAX_ARC_RADIUS THEN
:C:    IF max_arc_dev=0 THEN max_arc_dev=.001 ENDIF
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: RETURN
:C: ENDIF
*********************************************************
:C: BUCKET=0
:C: ROUNDOFF(ABS_X_END,BUCKET,X_POS,G_RIGHT_PLACES,METRIC_OUT)
:C: BUCKET=0
:C: ROUNDOFF(ABS_Y_END,BUCKET,Y_POS,G_RIGHT_PLACES,METRIC_OUT)
:C: IF MOVE_TYPE=CW_ARC THEN BUCKET=(ARC_START_ANGLE-ARC_END_ANGLE) ENDIF
:C: IF MOVE_TYPE=CCW_ARC THEN BUCKET=(ARC_END_ANGLE-ARC_START_ANGLE) ENDIF
:C: IF BUCKET<0 THEN BUCKET=(BUCKET+360) ENDIF
:C: IF NO_SMALL_ARC<>1 THEN
:C:    IF ABS(X_POS-MACH(REG_X))<(ROUNDING_POINT*2)
:C:    AND ABS(Y_POS-MACH(REG_Y))<(ROUNDING_POINT*2)
:C:    AND ABS(BUCKET)<180
:C:    AND ABS(BUCKET)>.00005 THEN RETURN
:C:    ENDIF
:C: ELSE
:C:    IF ABS(X_POS-MACH(REG_X))<(ARC_ROUNDING_POINT*2)
:C:    AND ABS(Y_POS-MACH(REG_Y))<(ARC_ROUNDING_POINT*2)
:C:    AND ABS(BUCKET)<180
:C:    AND ABS(BUCKET)>.00005 THEN
*:C:    AND ABS(BUCKET)>ARC_ROUNDING_POINT THEN
:C:       IF SECTIONEXIST(LINE_MOVE_MILL) THEN
:C:       CALL(LINE_MOVE_MILL)
:C:       RETURN
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*********************************************************
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: IF CANNED_THREAD_MILLING=1 THEN
:C:    IF ABS(INC_Z_END)>(ROUNDING_POINT*2) THEN
:C:       IF SECTIONEXIST(CANNED_THREAD_MILLING) THEN
:C:          IF N_MOVE_TYPE<>CW_ARC AND N_MOVE_TYPE<>CCW_ARC THEN
:C:          CALL(CANNED_THREAD_MILLING)
:C:          RETURN
:C:          ELSE
:C:          RETURN
:C:          ENDIF
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF MOVE_TYPE=CW_ARC THEN ARC_DIR=GC(G_CW_ARC) ENDIF
:C: IF MOVE_TYPE=CCW_ARC THEN ARC_DIR=GC(G_CCW_ARC) ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2010 OR CAMWORKS_VER>CAM_REV2010 THEN
:C:    IF ARC_NORM_Z<0 THEN
:C:       IF MOVE_TYPE=CW_ARC THEN ARC_DIR=GC(G_CCW_ARC) ENDIF
:C:       IF MOVE_TYPE=CCW_ARC THEN ARC_DIR=GC(G_CW_ARC) ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF ARCS=RADIAL THEN CALL(CALC_RADIAL_ARCS) RETURN ENDIF
:C: CALL(ARC_MOVE_MILL)
*-----------------------------------
:SECTION=CALC_RADIAL_ARCS
:C: IF (ABS(ARC_INC_ANGLE))=FULL_CIRCLE THEN GOTO1 ENDIF
:C: IF SECTIONEXIST(RADIUS_MOVE_MILL) THEN
:C: CALL(RADIUS_MOVE_MILL)
:C: ENDIF
:C: RETURN
*
*    360 Circle ?
*
:C1: X_POS=(ABS_I_CENTER+(ARC_RADIUS*(COS((((ARC_START_ANGLE+180)/180)*PI)))))
:C: Y_POS=(ABS_J_CENTER+(ARC_RADIUS*(SIN((((ARC_START_ANGLE+180)/180)*PI)))))
:C: IF SECTIONEXIST(RADIUS_MOVE_MILL) THEN
:C: CALL(RADIUS_MOVE_MILL)
:C: ENDIF
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: IF SECTIONEXIST(RADIUS_MOVE_MILL) THEN
:C: CALL(RADIUS_MOVE_MILL)
:C: ENDIF
:C: RETURN
******************************************
* these 4 sections allow arc moves for XZ(g18), YZ(g19) planes in CW2007
* for planes other then XZ, YZ then arcs will get broke into line moves
******************************************
*-----------------------------------
:SECTION=CALC_ARC_MOVE_MILL_ZX
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=34 CALL(DEBUG)
:C: ENDIF
*********************************************************
* this logic is to handle arc radius that is greater than controller allows.
* if you need to change MAX_ARC_RADIUS to a different value then copy that
* post varable to your SRC file in CALC_INIT_CODES and set it.
* If ARC_RADIUS is greater than MAX_ARC_RADIUS then break arc.
:C: IF MAX_ARC_RADIUS=0 THEN MAX_ARC_RADIUS=9999 ENDIF
:C: IF ARC_RADIUS>MAX_ARC_RADIUS THEN
:C:    IF max_arc_dev=0 THEN max_arc_dev=.001 ENDIF
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: RETURN
:C: ENDIF
*********************************************************
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: ARC_DIR=MOVE_TYPE
:C:    IF CAMWORKS_VER=CAM_REV2010 OR CAMWORKS_VER>CAM_REV2010 THEN
:C:       IF ARC_NORM_Y<0 THEN
:C:          IF MOVE_TYPE=CW_ARC THEN ARC_DIR=GC(G_CCW_ARC) ENDIF
:C:          IF MOVE_TYPE=CCW_ARC THEN ARC_DIR=GC(G_CW_ARC) ENDIF
:C:       ENDIF
:C:    ENDIF
:C: IF ARCS=RADIAL THEN CALL(CALC_RADIAL_ARCS) RETURN ENDIF
:C:    IF ARCS<>RADIAL THEN
:C:       IF SECTIONEXIST(ARC_MOVE_XZ) THEN
:C:       CALL(ARC_MOVE_XZ)
:C:       ELSE
:C:       ARC_DEVIATION=max_arc_dev
:C:       SYS_CANNED(5,CALC_BREAK_ARC)
:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(RADIUS_MOVE_MILL) THEN
:C:       CALL(RADIUS_MOVE_MILL)
:C:       ELSE
:C:       ARC_DEVIATION=max_arc_dev
:C:       SYS_CANNED(5,CALC_BREAK_ARC)
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_MOVE_MILL_YZ
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=35 CALL(DEBUG)
:C: ENDIF
*********************************************************
* this logic is to handle arc radius that is greater than controller allows.
* if you need to change MAX_ARC_RADIUS to a different value then copy that
* post varable to your SRC file in CALC_INIT_CODES and set it.
* If ARC_RADIUS is greater than MAX_ARC_RADIUS then break arc.
:C: IF MAX_ARC_RADIUS=0 THEN MAX_ARC_RADIUS=9999 ENDIF
:C: IF ARC_RADIUS>MAX_ARC_RADIUS THEN
:C:    IF max_arc_dev=0 THEN max_arc_dev=.001 ENDIF
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: RETURN
:C: ENDIF
*********************************************************
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: ARC_DIR=MOVE_TYPE
:C:    IF CAMWORKS_VER=CAM_REV2010 OR CAMWORKS_VER>CAM_REV2010 THEN
:C:       IF ARC_NORM_X<0 THEN
:C:          IF MOVE_TYPE=CW_ARC THEN ARC_DIR=GC(G_CCW_ARC) ENDIF
:C:          IF MOVE_TYPE=CCW_ARC THEN ARC_DIR=GC(G_CW_ARC) ENDIF
:C:       ENDIF
:C:    ENDIF
:C:    IF ARCS<>RADIAL THEN
:C:       IF SECTIONEXIST(ARC_MOVE_YZ) THEN
:C:       CALL(ARC_MOVE_YZ)
:C:       ELSE
:C:       ARC_DEVIATION=max_arc_dev
:C:       SYS_CANNED(5,CALC_BREAK_ARC)
:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(RADIUS_MOVE_MILL) THEN
:C:       CALL(RADIUS_MOVE_MILL)
:C:       ELSE
:C:       ARC_DEVIATION=max_arc_dev
:C:       SYS_CANNED(5,CALC_BREAK_ARC)
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_MOVE_MILL_ANYPLANE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=36 CALL(DEBUG)
:C: ENDIF
*********************************************************
* this logic is to handle arc radius that is greater than controller allows.
* if you need to change MAX_ARC_RADIUS to a different value then copy that
* post varable to your SRC file in CALC_INIT_CODES and set it.
* If ARC_RADIUS is greater than MAX_ARC_RADIUS then break arc.
:C: IF MAX_ARC_RADIUS=0 THEN MAX_ARC_RADIUS=9999 ENDIF
:C: IF ARC_RADIUS>MAX_ARC_RADIUS THEN
:C:    IF max_arc_dev=0 THEN max_arc_dev=.001 ENDIF
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
:C: RETURN
:C: ENDIF
*********************************************************
:C: IF CAMWORKS_VER=CAM_REV2010 OR CAMWORKS_VER>CAM_REV2010 THEN
:C:    IF ABS(ARC_NORM_X)<.0001 AND ABS(ARC_NORM_Y)<.0001 THEN
:C:    CALL(CALC_ARC_MOVE_MILL)
:C:    RETURN
:C:    ENDIF
:C: ELSE
:C:    IF OPR_TYPE<1008 THEN
:C:       IF ABS(VECTOR_I)<.0001 AND ABS(VECTOR_J)<.0001 AND ABS(ARC_START_ANGLE)<360.00005 THEN
:C:       CALL(CALC_ARC_MOVE_MILL)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: ARC_DEVIATION=max_arc_dev
:C: SYS_CANNED(5,CALC_BREAK_ARC)
*-----------------------------------
:SECTION=CALC_BREAK_ARC
:C: CALL(CALC_LINE_MOVE_MILL)
*-----------------------------------
******************************************
:SECTION=CALC_EVERY_MOVE_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=6 CALL(DEBUG)
:C: ENDIF
:C: IF SECTIONEXIST(EVERY_MOVE_MILL) THEN
:C: CALL(EVERY_MOVE_MILL)
:C: ENDIF
*
*  CALC_ENDPOINT now handles setting these to zero
*:C: FORCE_XY=0
*:C: FORCE_Z=0
*
:C: IF SAVE_NEW_WORK_COORD<>work_coord THEN FORCE_XY=1 FORCE_Z=1 ENDIF
:C: IF SAVE_SUB_WORK_COORD<>sub_work_coord THEN FORCE_XY=1 FORCE_Z=1 ENDIF
:C: IF SAVE_FIXTURE_OFFSET<>fixture_offset THEN FORCE_XY=1 FORCE_Z=1 ENDIF
:C: SAVE_NEW_WORK_COORD=work_coord
:C: SAVE_SUB_WORK_COORD=sub_work_coord
:C: SAVE_FIXTURE_OFFSET=fixture_offset
:C: IF OPR_AXIS_TYPE>THREE_AXIS OR OPR_AXIS_TYPE=FIVE_AXIS THEN
:C:    IF SECTIONEXIST(FIVE_AXIS_LINE_MOVE_MILL) THEN
*:C:       IF MOVE_TYPE=LINE THEN
*:C:       CALL(CALC_FIVE_AXIS_LINE_MOVE_MILL)
:C:       RETURN
*:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(ROTATE_X) THEN
:C:       ROTATE_ANGLE_X=ROT_TILT_B
:C:          IF SAVE_ANGLE_B<>ROTATE_ANGLE_X THEN
:C:          CALL(ROTATE_X)
:C:          ENDIF
:C:       SAVE_ANGLE_B=ROTATE_ANGLE_X
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*:C: IF OPR_AXIS_TYPE<FIVE_AXIS THEN
*:C: INC_ROT_TILT_A=0
*:C: INC_ROT_TILT_B=0
*:C: ROT_TILT_A=0
*:C: ROT_TILT_B=0
*:C: ENDIF
:C: IF OFFSET_RESIDENT=YES THEN CALL(CALC_REMOVE_OFFSET) ENDIF
*-----------------------------------
:SECTION=CALC_PLANE
*
*   Canned Drilling Init. Height Return
*
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN PLANE=GC(G_R_PLANE) ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN PLANE=GC(G_INIT_PLANE) ENDIF
*-----------------------------------
:SECTION=CALC_START_OPERATION
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=15 CALL(DEBUG)
:C: ENDIF
*
:C: IF OPER_COUNT=0 THEN CW_TIME=0 ENDIF
:C: CALL(CALC_CW_ESTIMATED_MACHINE_TIME)
*
:C: IF OPR_TYPE=POST_PROGRAM_STOP THEN
:C: CALL(CALC_POST_PROGRAM_STOP)
:C: RETURN
:C: ENDIF
*
:C: COORD_TYPE=2
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C: COORD_TYPE=MCS_TYPE
:C: ENDIF
*
:C: HEAD_LEN=head_length
:C: OPER_COUNT=(OPER_COUNT+1)
:C: LINE_AT_ANGLE=0
:C: CALL(CALC_ABS_INC)
:C: IF OPR_TYPE=MILL_DRILLING THEN CALL(CALC_PLANE) ENDIF
:C: IF OPR_SPEED_DIR=1
:C: THEN SPINDLE_DIR=MC(M_SPIN_CW)
:C: ELSE SPINDLE_DIR=MC(M_SPIN_CCW)
:C: ENDIF
:C: CALL(CALC_SPINDLE_COOLANT)
*
:C: IF coolant=1 THEN COOLANT_TYPE=MC(M_COOL_OFF) ENDIF
:C: IF coolant=2 THEN COOLANT_TYPE=MC(M_COOL_FLOOD) ENDIF
:C: IF coolant=3 THEN COOLANT_TYPE=MC(M_COOL_MIST) ENDIF
:C: IF coolant=4 THEN COOLANT_TYPE=MC(M_COOL_THRU) ENDIF
:C: T_L_COMP=TOOL
:C: IF CAMWORKS_VER>CAM_REV2007_SP3_1 THEN
:C:    IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_TOOL THEN
:C:    T_L_COMP=TOOL_LENGTH_OFFSET
:C:    ENDIF
:C: ENDIF
*
:C: CALL(CALC_MACHINE_COMP)
:C: IF OPER_COUNT>1 THEN
:C:    IF WORK_COORD_CONFIG>0 THEN
:C:      IF SAVE_WORK_COORD<>work_coord THEN
:C:      CALL(CALC_WORK_COORD)
:C:      ENDIF
:C:    SAVE_WORK_COORD=work_coord
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(FASTLINE) THEN
:C:    IF OPR_TYPE=MILL_UV_CUT
:C:    OR OPR_TYPE=MILL_SLICE_CUT
:C:    OR OPR_TYPE=MILL_ROUGH_CUT
:C:    OR OPR_TYPE=MILL_CURVE_CUT
:C:    OR OPR_TYPE=MILL_TOPO_CUT
:C:    OR OPR_TYPE=MILL_FREEFORM_CUT THEN
:C:    FASTLINE(FASTLINE)
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CALC_ARM_POSITION) THEN CALL(CALC_ARM_POSITION) ENDIF
:C: IF ARRAY_COUNT=1 THEN RETURN ENDIF
:C: IF TOOL=MACH(REG_T) THEN
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C:    IF SECTIONEXIST(OPR_NAME) THEN
:C:    CALL(OPR_NAME)
:C:    ENDIF
:C: ENDIF
*-----------------------------------
:SECTION=CALC_POST_PROGRAM_STOP
:C: IF SECTIONEXIST(PROGRAM_STOP) THEN
:C:    IF OPR_TYPE=POST_PROGRAM_STOP THEN
:C:       IF tape_output=1 THEN
:C:       CALL(PROGRAM_STOP)
:C:       ELSE
:C:          IF SECTIONEXIST(OPTIONAL_STOP) THEN
:C:          CALL(OPTIONAL_STOP)
:C:          ENDIF
:C:       ENDIF
:C:       IF OPER_COUNT>1 THEN
:C:          IF TOOL=MACH(REG_T) THEN CALL(CALC_CHECK_OPER_COMMENTS) ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*
*:SECTION=CALC_SET_LENGTH_DIAM_OFFSET_FROM_TOOL
*:C: IF CAMWORKS_VER>CAM_REV2007_SP3_1 THEN
*:C:    IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_TOOL THEN
*:C:    TOOL_LENGTH_DIAM_METHOD=METHOD_FROM_TOOL
*:C:    ELSE
*:C:    TOOL_LENGTH_DIAM_METHOD=METHOD_FROM_POST
*:C:    ENDIF
*:C: ENDIF
*   TOOL_COOLANT
*   N_TOOL_COOLANT
*   NC_TOOL_COOLANT
*   TOOL_DIAM_OFFSET
*   N_TOOL_DIAM_OFFSET
*   NC_TOOL_DIAM_OFFSET
*   TOOL_LENGTH_OFFSET
*   N_TOOL_LENGTH_OFFSET
*   NC_TOOL_LENGTH_OFFSET
*   TOOL_LENGTH_DIAM_OFFSET_METHOD
*   MILL_COOLANT_OFF=1
*   MILL_COOLANT_FLOOD=2
*   MILL_COOLANT_MIST=3
*   MILL_COOLANT_THROUGH_TOOL=4
*   MILL_COOLANT_AIR_BLAST=5
*   MILL_COOLANT_HIGH_PRESSURE=6
*   MILL_COOLANT_SPECIAL1=7
*   MILL_COOLANT_SPECIAL2=8
*   LATHE_COOLANT_FLOOD=1
*   LATHE_COOLANT_OFF=2
*   LATHE_COOLANT_MIST=3
*   LATHE_COOLANT_THROUGH_TOOL=4
*   LATHE_COOLANT_AIR_BLAST=5
*   LATHE_COOLANT_HIGH_PRESSURE=6
*   LATHE_COOLANT_SPECIAL1=7
*   LATHE_COOLANT_SPECIAL2=8
*   METHOD_FROM_TOOL=0
*   METHOD_FROM_POST=1
*-----------------------------------
:SECTION=CALC_WORK_COORD
:C: IF MACH(REG_Z)<>MILL_Z_HOME THEN
*:C: CALL(LEAD_FLAGS)
:C: CALLED_RAPID_WORK_COORD=1
:C: CALL(CALC_RAPID_MOVE_MILL)
:C: CALLED_RAPID_WORK_COORD=0
:C: ENDIF
*-----------------------------------
:SECTION=CALC_CHECK_OPER_COMMENTS
:C: IF SECTIONEXIST(OUTPUT_OPER_COMMENT)
:C: THEN GET_OPER_COMMENTS(CALC_OUTPUT_OPER_COMMENT)
:C: ELSE GET_OPER_COMMENTS(SYSTEM)
:C: ENDIF
*
:SECTION=CALC_OUTPUT_OPER_COMMENT
:C: CALL(OUTPUT_OPER_COMMENT)
*
:SECTION=CALC_SPINDLE_COOLANT
:C: IF CAMWORKS_VER>CAM_REV2007_SP3_1 THEN
:C:    IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_POST THEN
:C:       IF OPR_SPEED_DIR=1 THEN
:C:          IF coolant=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CW) ENDIF
:C:          IF coolant=2 THEN SPINDLE_COOLANT=MC(M_CW_FLOOD) ENDIF
:C:          IF coolant=3 THEN SPINDLE_COOLANT=MC(M_CW_MIST) ENDIF
:C:          IF coolant=4 THEN SPINDLE_COOLANT=MC(M_CW_THRU) ENDIF
:C:       ENDIF
:C:       IF OPR_SPEED_DIR=2 THEN
:C:          IF coolant=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CCW) ENDIF
:C:          IF coolant=2 THEN SPINDLE_COOLANT=MC(M_CCW_FLOOD) ENDIF
:C:          IF coolant=3 THEN SPINDLE_COOLANT=MC(M_CCW_MIST) ENDIF
:C:          IF coolant=4 THEN SPINDLE_COOLANT=MC(M_CCW_THRU) ENDIF
:C:       ENDIF
:C:    ELSE
:C:       IF OPR_SPEED_DIR=1 THEN
:C:          IF TOOL_COOLANT=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CW) ENDIF
:C:          IF TOOL_COOLANT=2 THEN SPINDLE_COOLANT=MC(M_CW_FLOOD) ENDIF
:C:          IF TOOL_COOLANT=3 THEN SPINDLE_COOLANT=MC(M_CW_MIST) ENDIF
:C:          IF TOOL_COOLANT=4 THEN SPINDLE_COOLANT=MC(M_CW_THRU) ENDIF
:C:       ENDIF
:C:       IF OPR_SPEED_DIR=2 THEN
:C:          IF TOOL_COOLANT=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CCW) ENDIF
:C:          IF TOOL_COOLANT=2 THEN SPINDLE_COOLANT=MC(M_CCW_FLOOD) ENDIF
:C:          IF TOOL_COOLANT=3 THEN SPINDLE_COOLANT=MC(M_CCW_MIST) ENDIF
:C:          IF TOOL_COOLANT=4 THEN SPINDLE_COOLANT=MC(M_CCW_THRU) ENDIF
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C:    IF OPR_SPEED_DIR=1 THEN
:C:       IF coolant=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CW) ENDIF
:C:       IF coolant=2 THEN SPINDLE_COOLANT=MC(M_CW_FLOOD) ENDIF
:C:       IF coolant=3 THEN SPINDLE_COOLANT=MC(M_CW_MIST) ENDIF
:C:       IF coolant=4 THEN SPINDLE_COOLANT=MC(M_CW_THRU) ENDIF
:C:    ENDIF
:C:    IF OPR_SPEED_DIR=2 THEN
:C:       IF coolant=1 THEN SPINDLE_COOLANT=MC(M_SPIN_CCW) ENDIF
:C:       IF coolant=2 THEN SPINDLE_COOLANT=MC(M_CCW_FLOOD) ENDIF
:C:       IF coolant=3 THEN SPINDLE_COOLANT=MC(M_CCW_MIST) ENDIF
:C:       IF coolant=4 THEN SPINDLE_COOLANT=MC(M_CCW_THRU) ENDIF
:C:    ENDIF
:C: ENDIF
*
:SECTION=CALC_END_OPERATION
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=16 CALL(DEBUG)
:C: ENDIF
:C: IF G_GROUP(GG(G_CANCEL_CYC))<>GC(G_CANCEL_CYC)
:C: THEN CALL(CALC_END_DRILL_CYCLE)
:C: ENDIF
:C: IF G_GROUP(GG(G_COMP_OFF))<>GC(G_COMP_OFF) AND OPR_TYPE<>MILL_DRILLING THEN
:C:    IF SECTIONEXIST(RAPID_LEADOUT_MOVE_MILL) THEN
:C:    CALL(RAPID_LEADOUT_MOVE_MILL)
:C:    ENDIF
:C: ENDIF
:C: FIRST_Z_POS=0
*-----------------------------------
:SECTION=CALC_DRILL_POSITION
:C: IF SECTIONEXIST(DRILL_POSITION)
:C: THEN CALL(DRILL_POSITION)
:C: ENDIF
*
:SECTION=CALC_START_DRILL_CYCLE
:C: TOTAL_Z_FEED=0
:C: TOTAL_Z_RAPID=0
:C: IF SECTIONEXIST(MACRO_RAPID_CALL_MILL) THEN
:C: CALL(CALC_START_DRILL_CYCLE_MACRO)
:C: RETURN
:C: ENDIF
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN Z_POS=OPR_Z_CLEARANCE ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN Z_POS=OPR_Z_RAPID_PLANE ENDIF
:C: IF SECTIONEXIST(DRILL_POSITION) THEN
:C: CALL(CALC_DRILL_POSITION)
:C: ELSE
:C: Z_SAVE=ABS_Z_END
:C: ABS_Z_END=Z_POS
:C: CALL(CALC_RAPID_MOVE_MILL)
:C: ABS_Z_END=Z_SAVE
:C: ENDIF
:C: FORCE_XY=0
:C: SAVE_Z=ABS_Z_END ABS_Z_END=Z_POS
:C: IF GC(G_LEN_COMP)<>GC(G_LEN_CANCEL) THEN
:C:  IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:    IF SECTIONEXIST(FIRST_RAPID_Z_PRELOAD_DOWN_MILL) THEN
:C:    CALL(CALC_FIRST_RAPID_Z_PRELOAD_DOWN_MILL)
:C:    ELSE
:C:    CALL(CALC_FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C:    ENDIF
:C:  ELSE
:C:  CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:  ENDIF
:C: ENDIF
:C: ABS_Z_END=SAVE_Z
:C: IF OPR_DRILL_CYCLE_TYPE=DRILLING THEN
:C: CALL(CALC_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=SPOT_DRILLING THEN
:C: CALL(CALC_SPOT_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=HIGH_SPEED_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_HIGH_SPEED_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_VARIABLE_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=TAPPING THEN
:C: CALL(CALC_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REVERSE_TAPPING THEN
:C: CALL(CALC_REVERSE_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=FINE_BORING THEN
:C: CALL(CALC_FINE_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING THEN
:C: CALL(CALC_REAMING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING_DWELL THEN
:C: CALL(CALC_REAM_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORING THEN
:C: CALL(CALC_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORE_DWELL THEN
:C: CALL(CALC_BORE_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BACK_BORING THEN
:C: CALL(CALC_BACK_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
*
*    Time Calculations
*
:C10: Z_DISTANCE=TOTAL_Z_RAPID
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: CALL(CALC_ESTIMATE_DRILL_Z_INIT_TIME)
:C: Z_DISTANCE=TOTAL_Z_RAPID
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=TOTAL_Z_FEED
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
*
:SECTION=CALC_START_DRILL_CYCLE_MACRO
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN Z_POS=OPR_Z_CLEARANCE ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN Z_POS=OPR_Z_RAPID_PLANE ENDIF
:C: IF DEFINING_MACRO=NO THEN
:C:    IF SECTIONEXIST(DRILL_POSITION)
:C:    THEN CALL(CALC_DRILL_POSITION)
:C:    ELSE Z_SAVE=ABS_Z_END ABS_Z_END=Z_POS
:C:    CALL(CALC_RAPID_MOVE_MILL) ABS_Z_END=Z_SAVE
:C:    ENDIF
:C:    SAVE_Z=ABS_Z_END ABS_Z_END=Z_POS
:C:    IF GC(G_LEN_COMP)<>GC(G_LEN_CANCEL) THEN
:C:      IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:      CALL(CALC_FIRST_RAPID_Z_MOVE_DOWN_MILL)
:C:      ELSE
:C:      CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:      ENDIF
:C:    ENDIF
:C: ELSE
:C: CALL(CALC_DRILL_POSITION)
:C: SAVE_RAPID_X=X_POS SAVE_RAPID_Y=Y_POS
:C: MACH(REG_X)=SAVE_RAPID_X
:C: MACH(REG_Y)=SAVE_RAPID_Y
:C: G_GROUP(GG(G_RAPID))=GC(G_RAPID)
:C:    IF GC(G_LEN_COMP)<>GC(G_LEN_CANCEL) THEN
:C:      IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:      SAVE_RAPID_Z=Z_POS
:C:      ELSE
:C:      CALL(RAPID_Z_MOVE_DOWN_MILL)
:C:      ENDIF
:C:    ENDIF
:C: ENDIF
:C: ABS_Z_END=SAVE_Z
:C: IF OPR_DRILL_CYCLE_TYPE=DRILLING THEN
:C: CALL(CALC_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=SPOT_DRILLING THEN
:C: CALL(CALC_SPOT_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=HIGH_SPEED_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_HIGH_SPEED_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_VARIABLE_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=TAPPING THEN
:C: CALL(CALC_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REVERSE_TAPPING THEN
:C: CALL(CALC_REVERSE_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=FINE_BORING THEN
:C: CALL(CALC_FINE_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING THEN
:C: CALL(CALC_REAMING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING_DWELL THEN
:C: CALL(CALC_REAM_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORING THEN
:C: CALL(CALC_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORE_DWELL THEN
:C: CALL(CALC_BORE_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BACK_BORING THEN
:C: CALL(CALC_BACK_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
*
*    Time Calculations
*
:C10: Z_DISTANCE=TOTAL_Z_RAPID
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: CALL(CALC_ESTIMATE_DRILL_Z_INIT_TIME)
:C: Z_DISTANCE=TOTAL_Z_RAPID
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=TOTAL_Z_FEED
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_START_DRILL_ARC_PATTERN
:C: TOTAL_Z_FEED=0
:C: TOTAL_Z_RAPID=0
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN Z_POS=OPR_Z_CLEARANCE ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN Z_POS=OPR_Z_RAPID_PLANE ENDIF
:C: SAVE_Z=ABS_Z_END ABS_Z_END=Z_POS
:C: ABS_Z_END=SAVE_Z
:C: IF OPR_DRILL_CYCLE_TYPE=DRILLING THEN
:C: CALL(CALC_ARC_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=SPOT_DRILLING THEN
:C: CALL(CALC_ARC_SPOT_DRILLING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_ARC_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=HIGH_SPEED_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_ARC_HIGH_SPEED_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: CALL(CALC_NUM_PECKS)
:C: CALL(CALC_ARC_VARIABLE_PECKING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=TAPPING THEN
:C: CALL(CALC_ARC_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REVERSE_TAPPING THEN
:C: CALL(CALC_ARC_REVERSE_TAPPING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=FINE_BORING THEN
:C: CALL(CALC_ARC_FINE_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING THEN
:C: CALL(CALC_ARC_REAMING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=REAMING_DWELL THEN
:C: CALL(CALC_ARC_REAM_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORING THEN
:C: CALL(CALC_ARC_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BORE_DWELL THEN
:C: CALL(CALC_ARC_BORE_DWELL_CYCLE)
:C: GOTO10
:C: ENDIF
:C: IF OPR_DRILL_CYCLE_TYPE=BACK_BORING THEN
:C: CALL(CALC_ARC_BACK_BORING_CYCLE)
:C: GOTO10
:C: ENDIF
*
*    Time Calculations
*
:C10: Z_DISTANCE=TOTAL_Z_RAPID
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: CALL(CALC_ESTIMATE_DRILL_Z_INIT_TIME)
:C: Z_DISTANCE=TOTAL_Z_RAPID
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=TOTAL_Z_FEED
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_NUM_PECKS
:C: NUM_PECKS=1
:C: IF OPR_Z_SUB_PECK<.0001 THEN RETURN ENDIF
:C: DEC_PECKS=((ABS(OPR_Z_CLEARANCE-OPR_Z_DEPTH))/OPR_Z_SUB_PECK)
:C: NUM_PECKS=DEC_PECKS
:C: IF ABS(NUM_PECKS-DEC_PECKS)>.0001 THEN NUM_PECKS=(NUM_PECKS+1) ENDIF
*
:SECTION=CALC_CONTINUE_DRILL_CYCLE
*:C: OPR_RETRACT_TYPE=CLEARANCE_PLANE
*
*    Time Calculations
*
:C: CALC_DWELL=dwell
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: CALL(CALC_ESTIMATE_RAPID_TIME)
:C: Z_DISTANCE=TOTAL_Z_RAPID
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=TOTAL_Z_FEED
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: CALL(CONTINUE_DRILL_CYCLE)
*-----------------------------------
:SECTION=CALC_END_DRILL_CYCLE
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_RETRACT_TIME)
:C: ENDIF
:C: IF N_TOOL<>TOOL THEN
:C:    IF SECTIONEXIST(END_DRILL_CYCLE) THEN
:C:    CALL(END_DRILL_CYCLE)
:C:    MACH(REG_Z)=MILL_Z_HOME
:C:    ENDIF
:C: ELSE
:C:    IF SECTIONEXIST(CANCEL_DRILL_CYCLE) THEN
:C:    CALL(CANCEL_DRILL_CYCLE)
:C:    ELSE
:C:    CALL(END_DRILL_CYCLE)
:C:    ENDIF
:C: ENDIF
*-----------------------------------
:SECTION=CALC_DRILLING_CYCLE
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
:C: IF SECTIONEXIST(DRILLING_CYCLE) THEN
:C: CALL(DRILLING_CYCLE)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_DRILLING_CYCLE
:C: CALL(ARC_DRILLING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_SPOT_DRILLING_CYCLE
:C: IF SECTIONEXIST(SPOT_DRILLING_CYCLE) THEN
:C: CALL(SPOT_DRILLING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_SPOT_DRILLING_CYCLE
:C: CALL(ARC_SPOT_DRILLING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_PECKING_CYCLE
:C: IF SECTIONEXIST(PECKING_CYCLE)
:C: THEN CALL(PECKING_CYCLE)
:C: ELSE CALL(CALC_LONG_CODE_PECKING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_PECKING_CYCLE
:C: CALL(ARC_PECKING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_VARIABLE_PECKING_CYCLE
:C: IF SECTIONEXIST(VARIABLE_PECKING_CYCLE)
:C: THEN CALL(VARIABLE_PECKING_CYCLE)
:C: ELSE CALL(CALC_LONG_CODE_PECKING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_VARIABLE_PECKING_CYCLE
:C: CALL(ARC_VARIABLE_PECKING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_HIGH_SPEED_PECKING_CYCLE
:C: IF SECTIONEXIST(HIGH_SPEED_PECK_CYCLE)
:C: THEN CALL(HIGH_SPEED_PECK_CYCLE)
:C: ELSE CALL(CALC_LONG_CODE_PECKING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_FAST_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_HIGH_SPEED_PECKING_CYCLE
:C: CALL(ARC_HIGH_SPEED_PECK_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_FAST_PECK_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_TAPPING_CYCLE
:C: IF rigid_tap=1 THEN
:C:    IF SECTIONEXIST(RIGID_TAPPING_CYCLE) THEN
:C:    CALL(RIGID_TAPPING_CYCLE)
:C:    ELSE
:C:       IF SECTIONEXIST(TAPPING_CYCLE) THEN
:C:       CALL(TAPPING_CYCLE)
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C:    IF SECTIONEXIST(DRILLING_CYCLE) THEN
:C:    CALL(TAPPING_CYCLE)
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_TAPPING_CYCLE
:C: CALL(ARC_TAPPING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_REVERSE_TAPPING_CYCLE
:C: IF rigid_tap=1 THEN
:C:    IF SECTIONEXIST(REVERSE_RIGID_TAPPING_CYCLE) THEN
:C:    CALL(REVERSE_RIGID_TAPPING_CYCLE)
:C:    ELSE
:C:       IF SECTIONEXIST(REVERSE_TAPPING_CYCLE) THEN
:C:       CALL(REVERSE_TAPPING_CYCLE)
:C:       ENDIF
:C:    ENDIF
:C: ELSE
:C:    IF SECTIONEXIST(REVERSE_TAPPING_CYCLE) THEN
:C:    CALL(REVERSE_TAPPING_CYCLE)
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_REVERSE_TAPPING_CYCLE
:C: CALL(ARC_REVERSE_TAPPING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_BORING_CYCLE
:C: IF SECTIONEXIST(BORING_CYCLE) THEN
:C: CALL(BORING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_BORING_CYCLE
:C: CALL(ARC_BORING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_FINE_BORING_CYCLE
:C: IF SECTIONEXIST(FINE_BORING_CYCLE) THEN
:C: CALL(FINE_BORING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_FINE_BORING_CYCLE
:C: CALL(ARC_FINE_BORING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_REAMING_CYCLE
:C: IF SECTIONEXIST(REAMING_CYCLE) THEN
:C: CALL(REAMING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_REAMING_CYCLE
:C: CALL(ARC_REAMING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_BACK_BORING_CYCLE
:C: IF SECTIONEXIST(BACK_BORING_CYCLE) THEN
:C: CALL(BACK_BORING_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_BACK_BORING_CYCLE
:C: CALL(ARC_BACK_BORING_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_BORE_DWELL_CYCLE
:C: IF SECTIONEXIST(BORE_DWELL_CYCLE) THEN
:C: CALL(BORE_DWELL_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_BORE_DWELL_CYCLE
:C: CALL(ARC_BORE_DWELL_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_TIME)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_REAM_DWELL_CYCLE
:C: IF SECTIONEXIST(REAM_DWELL_CYCLE) THEN
:C: CALL(REAM_DWELL_CYCLE)
:C: ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_ARC_REAM_DWELL_CYCLE
:C: CALL(ARC_REAM_DWELL_CYCLE)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN)
:C: CALC_DWELL=dwell
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: ENDIF
*-----------------------------------
*
*     G83 Long Code Pecking Cycle
*
:SECTION=CALC_LONG_CODE_PECKING_CYCLE
*
* Long code Pecking cycle - 1st Peck
*
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=21 CALL(DEBUG)
:C: ENDIF
:C: IF P_MOVE_TYPE<>TOOL_CHANGE THEN
:C: CALL(CALC_RAPID_MOVE_MILL)
:C: ENDIF
:C: VAR_PEC_RED_PER=((OPR_Z_FIRST_PECK/OPR_Z_SUB_PECK)*100)
:C: Z_DISTANCE=OPR_Z_FIRST_PECK
:C: Z_SAVE=ABS_Z_END
:C: R_SAVE=OPR_Z_CLEARANCE
:C: IF OPR_DRILL_CYCLE_TYPE=HIGH_SPEED_PECKING OR OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: ABS_Z_END=(OPR_Z_FACE-OPR_Z_FIRST_PECK)
:C: ELSE
:C: ABS_Z_END=(OPR_Z_FACE-OPR_Z_SUB_PECK)
:C: ENDIF
:C: IF ABS_Z_END<Z_SAVE THEN ABS_Z_END=Z_SAVE ENDIF
:C: Z_POS=ABS_Z_END ABS_Z_END=OPR_Z_CLEARANCE CALL(CALC_RAPID_Z_DOWN_MILL)
:C: ABS_Z_END=Z_POS CALL(FEED_Z_MOVE_DOWN_MILL)
:C: IF ABS(ABS_Z_END-Z_SAVE)<.0001
:C: THEN ABS_Z_END=OPR_Z_RAPID_PLANE OPR_Z_CLEARANCE=R_SAVE
:C: CALL(CALC_RAPID_Z_UP_MILL) ABS_Z_END=Z_SAVE RETURN
:C: ENDIF
:C: OPR_Z_CLEARANCE=(ABS_Z_END+(R_SAVE-OPR_Z_FACE))
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: VAR_PEC_PER=(100-VAR_PEC_RED_PER)
:C:   IF ((VAR_PEC_PER/100)*OPR_Z_FIRST_PECK)<OPR_Z_SUB_PECK THEN
:C:   ABS_Z_END=(ABS_Z_END-OPR_Z_SUB_PECK)
:C:   ELSE
:C:   ABS_Z_END=(ABS_Z_END-((VAR_PEC_PER/100)*OPR_Z_FIRST_PECK))
:C:   ENDIF
:C: ELSE
:C: ABS_Z_END=(ABS_Z_END-OPR_Z_SUB_PECK)
:C: ENDIF
*
* Long code Pecking cycle - Sub Peck
*
:C1: IF ABS_Z_END<Z_SAVE THEN ABS_Z_END=Z_SAVE ENDIF
:C: Z_POS=ABS_Z_END
:C: IF OPR_DRILL_CYCLE_TYPE=PECKING
:C: THEN ABS_Z_END=R_SAVE CALL(RAPID_Z_MOVE_UP_MILL)
:C: ENDIF
:C: ABS_Z_END=OPR_Z_CLEARANCE CALL(RAPID_Z_MOVE_DOWN_MILL)
:C: ABS_Z_END=Z_POS
:C: IF SECTIONEXIST(SUB_FEED_Z_MOVE_DOWN_MILL)
:C: THEN CALL(SUB_FEED_Z_MOVE_DOWN_MILL)
:C: ELSE CALL(FEED_Z_MOVE_DOWN_MILL)
:C: ENDIF
:C: IF ABS(ABS_Z_END-Z_SAVE)<.0001
:C: THEN ABS_Z_END=OPR_Z_RAPID_PLANE OPR_Z_CLEARANCE=R_SAVE
:C:   IF OPR_RETRACT_TYPE=RAPID_PLANE THEN
:C:   ABS_Z_END=OPR_Z_RAPID_PLANE OPR_Z_CLEARANCE=R_SAVE
:C:   ENDIF
:C: CALL(CALC_RAPID_Z_UP_MILL) ABS_Z_END=Z_SAVE
:C: RETURN
:C: ENDIF
:C: OPR_Z_CLEARANCE=(ABS_Z_END+(R_SAVE-OPR_Z_FACE))
:C: IF OPR_DRILL_CYCLE_TYPE=VARIABLE_PECKING THEN
:C: VAR_PEC_PER=(VAR_PEC_PER-VAR_PEC_RED_PER)
:C:   IF ((VAR_PEC_PER/100)*OPR_Z_FIRST_PECK)<OPR_Z_SUB_PECK THEN
:C:   ABS_Z_END=(ABS_Z_END-OPR_Z_SUB_PECK)
:C:   ELSE
:C:   ABS_Z_END=(ABS_Z_END-((VAR_PEC_PER/100)*OPR_Z_FIRST_PECK))
:C:   ENDIF
:C: ELSE
:C: ABS_Z_END=(ABS_Z_END-OPR_Z_SUB_PECK)
:C: ENDIF
:C: GOTO1
*
:SECTION=CALC_SINGLE_DRILL_MILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=17 CALL(DEBUG)
:C: ENDIF
:C: X_POS=ABS_X_END
:C: Y_POS=ABS_Y_END
:C: IF G_GROUP(GG(G_CANCEL_CYC))=GC(G_CANCEL_CYC) THEN
:C: CALL(CALC_START_DRILL_CYCLE)
:C: RETURN
:C: ENDIF
:C: CALL(CALC_CONTINUE_DRILL_CYCLE)
*-----------------------------------
:SECTION=CALC_DRILL_INCREMENT_DRILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=18 CALL(DEBUG)
:C: ENDIF
:C: IF SECTIONEXIST(DRILL_AT_ANGLE) THEN
:C: LINE_AT_ANGLE=1
:C: CALL(CALC_DRILL_AT_ANGLE)
:C: ELSE
:C: SYS_CANNED(1,CALC_SINGLE_DRILL_MILL)
:C: ENDIF
*
:SECTION=CALC_DRILL_AT_ANGLE
:C: CALL(CALC_START_POSITION)
:C: CALL(CALC_START_DRILL_CYCLE)
:C: CALL(CALC_X_Y_INCREMENT)
:C: IF SECTIONEXIST(DRILL_AT_ANGLE) THEN
:C: CALL(DRILL_AT_ANGLE)
:C: ENDIF
:C: CALL(CALC_ABS_INC)
*
*    Time Calculations
*
:C: IF SKIP_1ST_HIT=NO THEN NUM_HOLES=(NUM_HITS-1) ENDIF
:C: IF SKIP_1ST_HIT=YES THEN NUM_HOLES=(NUM_HITS-2) ENDIF
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALC_DWELL=(dwell*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: Z_DISTANCE=(ABS(MACH(REG_X)-ABS_X_START))
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=DISTANCE
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=(TOTAL_Z_RAPID*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=(TOTAL_Z_FEED*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
:C: MACH(REG_X)=ABS_X_END
:C: MACH(REG_Y)=ABS_Y_END
*-----------------------------------
:SECTION=CALC_START_POSITION
:C: IF SKIP_1ST_HIT=NO THEN
:C: X_POS=ABS_X_START
:C: Y_POS=ABS_Y_START
:C: RETURN
:C: ENDIF
:C: X_POS=(ABS_X_START+((ABS_X_END-ABS_X_START)/(NUM_HITS-1)))
:C: Y_POS=(ABS_Y_START+((ABS_Y_END-ABS_Y_START)/(NUM_HITS-1)))
*-----------------------------------
:SECTION=CALC_X_Y_INCREMENT
:C: IF SKIP_1ST_HIT=NO THEN
:C: X_POS=(ABS_X_START+((ABS_X_END-ABS_X_START)/(NUM_HITS-1)))
:C: Y_POS=(ABS_Y_START+((ABS_Y_END-ABS_Y_START)/(NUM_HITS-1)))
:C: RETURN
:C: ENDIF
:C: X_POS=(ABS_X_START+((ABS_X_END-ABS_X_START)/(NUM_HITS-1)))
:C: Y_POS=(ABS_Y_START+((ABS_Y_END-ABS_Y_START)/(NUM_HITS-1)))
:C: X_POS=(X_POS+((ABS_X_END-ABS_X_START)/(NUM_HITS-1)))
:C: Y_POS=(Y_POS+((ABS_Y_END-ABS_Y_START)/(NUM_HITS-1)))
*-----------------------------------
:SECTION=CALC_ARC_PATTERN_DRILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=19 CALL(DEBUG)
:C: ENDIF
:C: IF SKIP_1ST_HIT=YES THEN
:C: SYS_CANNED(1,CALC_SINGLE_DRILL_MILL)
:C: RETURN
:C: ENDIF
:C: IF SECTIONEXIST(ARC_DRILLING_CYCLE)
:C: THEN CALL(CALC_START_DRILL_CYCLE)
:C: CALL(ARC_DRILLING_CYCLE)
:C: ELSE SYS_CANNED(1,CALC_SINGLE_DRILL_MILL)
:C: RETURN
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: NUM_HOLES=(NUM_HITS-1)
:C: CALC_DWELL=(dwell*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_DWELL_TIME)
:C: X_DISTANCE=(ABS(P_ABS_X_END-ABS_X_START))
:C: X_DISTANCE=(X_DISTANCE*X_DISTANCE)
:C: Y_DISTANCE=(ABS(P_ABS_Y_END-ABS_Y_START))
:C: Y_DISTANCE=(Y_DISTANCE*Y_DISTANCE)
:C: Z_DISTANCE=(X_DISTANCE+Y_DISTANCE)
:C: Z_DISTANCE=SQRT(Z_DISTANCE)
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=DISTANCE
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=(TOTAL_Z_RAPID*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: Z_DISTANCE=(TOTAL_Z_FEED*NUM_HOLES)
:C: CALL(CALC_ESTIMATE_DRILL_FEED_TIME)
:C: ENDIF
*
:C: MACH(REG_X)=ABS_X_END
:C: MACH(REG_Y)=ABS_Y_END
*-----------------------------------
:SECTION=CALC_DRILL_ARC_PATTERN
:C: CALL(CALC_START_DRILL_ARC_PATTERN)
*-----------------------------------
:SECTION=CALC_GRID_PATTERN_DRILL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=20 CALL(DEBUG)
:C: ENDIF
:C: SYS_CANNED(1,CALC_SINGLE_DRILL_MILL)
*-----------------------------------
:SECTION=CALC_OFFSET_PART
*:C: OFFSET_XYZ(INC_X_END,INC_Y_END,INC_Z_END)
:C: OFFSET_INC(INC_X_END,INC_Y_END)
*-----------------------------------
:SECTION=CALC_BEFORE_ATTRIBUTES
:C: CALL(BEFORE_ATTRIBUTES)
*
*:SECTION=CALC_DURING_ATTRIBUTES
*
:SECTION=CALC_AFTER_ATTRIBUTES
:C: CALL(AFTER_ATTRIBUTES)
*
*
:SECTION=CALC_END_OF_TAPE
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=11 CALL(DEBUG)
:C: ENDIF
:C: CALL(CALC_TOTAL_TIME)
:C: CALL(CALC_REMOVE_OFFSET)
:C: IF SECTIONEXIST(RESET_X) THEN
:C:    IF SAVE_ANGLE_X<>0 THEN
:C:    CALL(RESET_X)
:C:    RETURN
:C:    ENDIF
:C:    IF SAVE_ANGLE_Y<>0 THEN
:C:    CALL(RESET_Y)
:C:    RETURN
:C:    ENDIF
:C:    IF SAVE_ANGLE_Z<>0 THEN
:C:    CALL(RESET_Z)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(END_OF_TAPE_PRELOAD) AND END_OF_TAPE_PRELOAD=YES THEN
:C:    IF TOOL<>TOOL_ARRAY(0) THEN
:C:    NEXT_TOOL=TOOL_ARRAY(0)
:C:    CALL(END_OF_TAPE_PRELOAD) ELSE
:C:    CALL(END_OF_TAPE)
:C:    ENDIF
:C: ELSE
:C: CALL(END_OF_TAPE)
:C: ENDIF
*
:C: IF SETUP_CONFIG<>0 THEN
:C:    IF OPR_AXIS_TYPE<2222 THEN
:C:    ADD_MACRO_START
:C:    ENDIF
:C: EOL={}
:C: SPACES(YES)
:C: CALL(SETUP_SHEET_MILL)
:C:    IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:    CALL(OUTPUT_ESTIMATED_TIME)
:C:    ENDIF
:C: GETTOOLS(2,SYSTEM)
:C:    IF OPR_AXIS_TYPE<2222 THEN
:C:    ADD_MACRO_END
:C:    ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(PERCENT) THEN
:C:    IF OPR_AXIS_TYPE<2222 THEN
:C:    ADD_MACRO_START
:C:    ENDIF
:C: CALL(PERCENT)
:C:    IF OPR_AXIS_TYPE<2222 THEN
:C:    ADD_MACRO_END
:C:    ENDIF
:C: ENDIF
*
:C: LOOP=0
:C1: TOOL=TOOL_ARRAY(LOOP)
:C: IF SECTIONEXIST(OUTPUT_TOOL_LIST) THEN
:C: CALL(OUTPUT_TOOL_LIST)
:C: ENDIF
:C: LOOP=(LOOP+1)
:C: IF TOOL_ARRAY(LOOP)=(-1) OR TOOL_ARRAY(LOOP)=0 THEN RETURN ENDIF
:C: GOTO1
*
:SECTION=CALC_SETUP_SHEET
:C: IF SETUP_CONFIG<>0 THEN RETURN ENDIF
:C: EOL={}
:C: SPACES(YES)
:C: CALL(SETUP_SHEET_MILL)
:C: IF CW_TIME=0 THEN
:C:    IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:    CALL(OUTPUT_ESTIMATED_TIME)
:C:    ENDIF
:C: ELSE
:C: TIME_HOURS=CW_TIME_HOURS
:C: TIME_MINUTES=CW_TIME_MINUTES
:C: TIME_SECONDS=CW_TIME_SECONDS
:C:    IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:    CALL(OUTPUT_ESTIMATED_TIME)
:C:    ENDIF
:C: ENDIF
:C: GETTOOLS(2,SYSTEM)
*:C: GETTOOLS(1,SYSTEM)
*
****************************************************
*   Time Calculation Sections
****************************************************
*
:SECTION=CALC_ESTIMATE_DRILL_RAPID_TIME
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(Z_DISTANCE/TRAVERSE_RATE))
:C: ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(Z_DISTANCE/TRAVERSE_RATE))
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_DRILL_FEED_TIME
:C: IF FEEDTYPE<>2 THEN
:C: CALC_FEED=OPR_Z_FEED
:C: ELSE
:C: CALC_FEED=(OPR_Z_FEED*OPR_SPEED)
:C: ENDIF
*
:C: IF OPR_Z_FEED=0 THEN RETURN ENDIF
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(Z_DISTANCE/CALC_FEED))
:C: ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(Z_DISTANCE/CALC_FEED))
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_DRILL_DWELL_TIME
:C: IF dwell=0 THEN RETURN ENDIF
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(CALC_DWELL/60))
:C: ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(CALC_DWELL/60))
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_DRILL_Z_INIT_TIME
:C: Z_DISTANCE=((ABS(OPR_Z_RAPID_PLANE-OPR_Z_CLEARANCE)))
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
*
:SECTION=CALC_ESTIMATE_DRILL_Z_RETRACT_TIME
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN
:C: Z_DISTANCE=((ABS(OPR_Z_RAPID_PLANE-OPR_Z_CLEARANCE)))
:C: CALL(CALC_ESTIMATE_DRILL_RAPID_TIME)
:C: ENDIF
*
*     G83 Pecking Cycle Time
*
:SECTION=CALC_ESTIMATE_DRILL_PECK_TIME
:C: IF OPR_Z_FEED=0 THEN RETURN ENDIF
:C: Z_DISTANCE=0
:C: IF OPR_Z_SUB_PECK<.0001 THEN RETURN ENDIF
*
*     1st pass
*
:C: Z_DISTANCE=OPR_Z_SUB_PECK
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: Z_SAVE=(OPR_Z_CLEARANCE-OPR_Z_SUB_PECK)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=0
*
*    2nd pass & cont. passes
*
:C1: Z_DISTANCE=((OPR_Z_CLEARANCE-Z_SAVE)-.005)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=OPR_Z_SUB_PECK
:C: IF (Z_SAVE-OPR_Z_SUB_PECK)<OPR_Z_DEPTH THEN
:C: Z_DISTANCE=(Z_SAVE-OPR_Z_DEPTH)
:C: ENDIF
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE+.005)
:C: Z_SAVE=(Z_SAVE-OPR_Z_SUB_PECK)
:C: Z_DISTANCE=(ABS((Z_SAVE-OPR_Z_CLEARANCE)))
:C: IF Z_SAVE<OPR_Z_DEPTH THEN
:C: Z_DISTANCE=(ABS(OPR_Z_DEPTH-OPR_Z_CLEARANCE))
:C: ENDIF
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: IF Z_SAVE<OPR_Z_DEPTH THEN GOTO2 ENDIF
:C: GOTO1
*
:C2: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN
:C: Z_DISTANCE=(ABS(OPR_Z_RAPID_PLANE-OPR_Z_CLEARANCE))
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: ENDIF
*
*     G73 High Speed Pecking Cycle Time
*
:SECTION=CALC_ESTIMATE_FAST_PECK_TIME
:C: IF OPR_Z_FEED=0 THEN RETURN ENDIF
:C: Z_DISTANCE=0
*
*     1st pass
*
:C: Z_DISTANCE=OPR_Z_SUB_PECK
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: Z_SAVE=(OPR_Z_CLEARANCE-OPR_Z_SUB_PECK)
:C: Z_DISTANCE=.005
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=0
*
*    2nd pass & cont. passes
*
:C1: Z_DISTANCE=OPR_Z_SUB_PECK
:C: IF (Z_SAVE-OPR_Z_SUB_PECK)<OPR_Z_DEPTH THEN
:C: Z_DISTANCE=(Z_SAVE-OPR_Z_DEPTH)
:C: ENDIF
:C: Z_SAVE=(Z_SAVE-OPR_Z_SUB_PECK)
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE+.005)
:C: Z_DISTANCE=.005
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: IF Z_SAVE<OPR_Z_DEPTH THEN GOTO9 ENDIF
:C: GOTO1
*
:C9: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN
:C: Z_DISTANCE=((OPR_Z_CLEARANCE-OPR_Z_DEPTH)-.005)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: RETURN
:C: ENDIF
:C: Z_DISTANCE=((OPR_Z_RAPID_PLANE-OPR_Z_DEPTH)-.005)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
*
*    Rapid to Clearance - Feed to Depth - Rapid up to Clearance
*
:SECTION=CALC_ESTIMATE_DRILL_Z_TIME
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN
:C: Z_DISTANCE=((ABS(OPR_Z_DEPTH-OPR_Z_CLEARANCE)))
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN
:C: Z_DISTANCE=((ABS(OPR_Z_DEPTH-OPR_Z_RAPID_PLANE)))
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=((ABS(OPR_Z_RAPID_PLANE-OPR_Z_CLEARANCE)))
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=((ABS(OPR_Z_DEPTH-OPR_Z_CLEARANCE)))
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: ENDIF
*
*    Rapid to Clearance - Feed to Depth - Feed up to Clearance
*
:SECTION=CALC_ESTIMATE_DRILL_Z_FEED_UP_DOWN
:C: IF OPR_RETRACT_TYPE=CLEARANCE_PLANE THEN
:C: Z_DISTANCE=((ABS(OPR_Z_DEPTH-OPR_Z_CLEARANCE)))
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: ENDIF
:C: IF OPR_RETRACT_TYPE=RAPID_PLANE THEN
:C: Z_DISTANCE=(((ABS(OPR_Z_RAPID_PLANE-OPR_Z_CLEARANCE)))*2)
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=(((ABS(OPR_Z_DEPTH-OPR_Z_CLEARANCE)))*2)
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_MILL_Z_RAPID_TIME
:C: Z_D_DISTANCE=(ABS(INC_Z_END))
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(Z_D_DISTANCE/TRAVERSE_RATE))
:C: ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(Z_D_DISTANCE/TRAVERSE_RATE))
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_MILL_Z_FEED_TIME
:C: IF FEEDTYPE<>2 THEN
:C: CALC_FEED=OPR_Z_FEED
:C: ELSE
:C: CALC_FEED=(OPR_Z_FEED*OPR_SPEED)
:C: ENDIF
*
:C: IF OPR_Z_FEED=0 THEN RETURN ENDIF
:C: Z_D_DISTANCE=(ABS(INC_Z_END))
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(Z_D_DISTANCE/CALC_FEED))
:C: ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(Z_D_DISTANCE/CALC_FEED))
:C: ENDIF
*
:SECTION=CALC_TOOL_CHANGE_TIME
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+.167) ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+.167)
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_RAPID_TIME
:C: XY_TIME=(XY_TIME+(DISTANCE/TRAVERSE_RATE))
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(DISTANCE/TRAVERSE_RATE)) ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(DISTANCE/TRAVERSE_RATE))
:C: ENDIF
*
:SECTION=CALC_ESTIMATE_MACHINE_TIME
:C: IF FEEDTYPE<>2 THEN
:C: CALC_FEED=OPR_X_FEED
:C: ELSE
:C: CALC_FEED=(OPR_X_FEED*OPR_SPEED)
:C: ENDIF
*
:C: IF OPR_X_FEED=0 THEN RETURN ENDIF
:C: XY_TIME=(XY_TIME+(DISTANCE/CALC_FEED))
:C: IF DEFINING_MACRO=NO THEN
:C: CALC_TIME=(CALC_TIME+(DISTANCE/CALC_FEED)) ELSE
:C: CALC_MACRO_TIME=(CALC_MACRO_TIME+(DISTANCE/CALC_FEED))
:C: ENDIF
*-----------------------------------
:SECTION=CALC_CW_ESTIMATED_MACHINE_TIME
:C: IF CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C: QUERY_ITEM_ID=QUERY_DEC_OPER_TIME
:C: QUERY_SYSTEM()
:C:    IF QUERY_RESULT=1 THEN
:C:       IF DEFINING_MACRO=YES THEN
:C:       CW_MACRO_TIME=(CW_MACRO_TIME+QUERY_DEC_VAL)
:C:       ELSE
:C:       CW_TIME=(CW_TIME+QUERY_DEC_VAL)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:SECTION=CALC_TOTAL_TIME
:C: IF CALC_TIME>60 THEN
:C: TIME_HOURS=(CALC_TIME/60)
:C: CALC_TIME=(CALC_TIME-(TIME_HOURS*60))
:C: ENDIF
:C: TIME_MINUTES=CALC_TIME
:C: TIME_SECONDS=((CALC_TIME-TIME_MINUTES)*60)
*
:C: CW_TIME=(CW_TIME+CW_MACRO_TIME)
*
:C: IF CW_TIME>0 THEN
:C:   IF CW_TIME>60 THEN
:C:   CW_TIME_HOURS=(CW_TIME/60)
:C:   CW_TIME=(CW_TIME-(CW_TIME_HOURS*60))
:C:   ENDIF
:C: CW_TIME_MINUTES=CW_TIME
:C: CW_TIME_SECONDS=((CW_TIME-CW_TIME_MINUTES)*60)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_REMOVE_OFFSET
:C: IF OFFSET_RESIDENT=NO THEN RETURN ENDIF
:C: X_OFFSET=0 Y_OFFSET=0 Z_OFFSET=0
:C: IF SECTIONEXIST(OFFSET_PART) THEN
:C: CALL(OFFSET_PART)
:C: ENDIF
:C: OFFSET_RESIDENT=NO
*
:SECTION=CALC_ROUNDING_POINT
:C: IF METRIC_OUT=2 THEN GOTO5 ENDIF
:C: ROUNDING_POINT=.5
:C: LOOP=0
:C1: LOOP=(LOOP+1)
:C: ROUNDING_POINT=(ROUNDING_POINT/10)
:C: IF LOOP<G_RIGHT_PLACES THEN GOTO1 ENDIF
:C: RETURN
:C5: ROUNDING_POINT=.5
:C: LOOP=0
:C6: LOOP=(LOOP+1)
:C: ROUNDING_POINT=(ROUNDING_POINT/10)
:C: IF LOOP<(G_RIGHT_PLACES-1) THEN GOTO6 ENDIF
:C: ROUNDING_POINT=(ROUNDING_POINT/25.4)
*
:SECTION=CALC_ENGMET
:C: G_GROUP(GG(G_CANCEL_CYC))=GC(G_CANCEL_CYC)
:C: ENGMET=GC(G_ENGLISH)
:C: IF METRIC_OUT=2 THEN ENGMET=GC(G_METRIC) ENDIF
*
:SECTION=CALC_ABS_INC
:C: IF abs_inc=2 THEN ABSINC=GC(G_INC) ENDIF
:C: IF abs_inc=1 THEN ABSINC=GC(G_ABS) ENDIF
:C: IF DEFINING_MACRO=YES AND INC_SUBPROGRAMS=YES THEN ABSINC=GC(G_INC) ENDIF
*-----------------------------------
:SECTION=CALC_BEG_MACRO
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=7 CALL(DEBUG)
:C: ENDIF
:C:  IF SECTIONEXIST(BEG_MACRO_MILL) THEN
:C:    DEFINING_MACRO=YES
:C:    SAVE_SEQ=SEQ
:C:    SEQ=SEQ_INCREMENT
:C:    CALL(BEG_MACRO_MILL)
:C:    SAVE_REG_X=MACH(REG_X)
:C:    SAVE_REG_Y=MACH(REG_Y)
:C:    IF MULTIPLE_MACROS=YES THEN
:C:    HOLD_DBPX=DIST_BET_PARTS_X
:C:    HOLD_DBPY=DIST_BET_PARTS_Y
:C:    ELSE
:C:    HOLD_DBPX=0
:C:    HOLD_DBPY=0
:C:    ENDIF
:C:    HOLD_HOV=HORIZ_OR_VERT
:C:    CALL(CALC_RESET_REGISTERS)
:C:    CALC_MACRO_TIME=0
:C: ENDIF
*-----------------------------------
:SECTION=CALC_END_MACRO
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=8 CALL(DEBUG)
:C: ENDIF
:C:  IF SECTIONEXIST(END_MACRO_MILL) THEN
:C:  CALL(CALC_DO_END_MACRO)
:C:  ENDIF
*-----------------------------------
:SECTION=CALC_DO_END_MACRO
:C:     DEFINING_MACRO=NO
:C:     OFFSET_RESIDENT=NO
:C:     IF MULTIPLE_MACROS=NO THEN GOTO1 ENDIF
:C:     IF HOLD_DBPX=(0) AND HOLD_DBPY=(0) THEN GOTO1 ENDIF
:C:     X_OFFSET=HOLD_DBPX
:C:     Y_OFFSET=HOLD_DBPY
:C:     IF HOLD_HOV=VERTICAL
:C:     THEN CALL(CALC_OFFSET_Y)
:C:     ELSE CALL(CALC_OFFSET_X)
:C:     ENDIF
:C1:    CALL(END_MACRO_MILL)
:C:     MACRO_A=MACH(REG_X)
:C:     MACRO_B=MACH(REG_Y)
:C:     MACRO_E=OPR_TYPE
:C:     MACRO_H=SAVE_RAPID_X
:C:     MACRO_I=SAVE_RAPID_Y
:C:     MACRO_J=SAVE_RAPID_Z
:C:     CALL(CALC_RESET_REGISTERS)
:C:     MACH(REG_X)=SAVE_REG_X
:C:     MACH(REG_Y)=SAVE_REG_Y
:C:     SEQ=SAVE_SEQ
:C:     MACRO_D=CALC_MACRO_TIME
*-----------------------------------
:SECTION=CALC_OFFSET_X
:C: IF SECTIONEXIST(OFFSET_X) THEN
:C: CALL(OFFSET_X)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_OFFSET_Y
:C: IF SECTIONEXIST(OFFSET_Y) THEN
:C: CALL(OFFSET_Y)
:C: ENDIF
*-----------------------------------
:SECTION=CALC_MACRO_CALL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=9 CALL(DEBUG)
:C: ENDIF
:C:  IF SECTIONEXIST(MACRO_CALL_WORK_COORD_MILL) THEN
:C:    IF using_work_coord=1 THEN
:C:    CALLING_MACRO=YES
:C:    CALL(CALC_DO_MACRO_CALL_MILL)
:C:    CALLING_MACRO=NO
:C:    RETURN
:C:    ELSE
:C:    CALLING_MACRO=YES
:C:    CALL(CALC_DO_MACRO_CALL_WORK_COORD_MILL)
:C:    CALLING_MACRO=NO
:C:    RETURN
:C:    ENDIF
:C:  ENDIF
:C:  IF SECTIONEXIST(MACRO_CALL_WORK_COORD_RAPID) THEN
:C:    IF using_work_coord=1 THEN
:C:    CALLING_MACRO=YES
:C:    CALL(CALC_DO_MACRO_CALL_MILL)
:C:    CALLING_MACRO=NO
:C:    RETURN
:C:    ELSE
:C:    CALLING_MACRO=YES
:C:    CALL(CALC_DO_MACRO_CALL_WORK_COORD_MILL)
:C:    CALLING_MACRO=NO
:C:    RETURN
:C:    ENDIF
:C:  ENDIF
:C:  IF SECTIONEXIST(MACRO_CALL_MILL) THEN
:C:  CALLING_MACRO=YES
:C:  CALL(CALC_DO_MACRO_CALL_MILL)
:C:  CALLING_MACRO=NO
:C:  ENDIF
*-----------------------------------
:SECTION=CALC_DO_MACRO_CALL_MILL
:C:    DEFINING_MACRO=NO
:C:    OPR_TYPE=MACRO_E
:C:    CALC_TIME=(CALC_TIME+MACRO_D)
:C:    IF MACH(REG_T2)<>0 AND MACH(REG_T2)=TOOL THEN GOTO1 ENDIF
:C:    IF MACH(REG_T2)=0 THEN
:C:    CALL(CALC_INIT_TOOL_CHANGE_MILL)
:C:    ELSE
:C:    CALL(CALC_SUB_TOOL_CHANGE_MILL)
:C:    ENDIF
:C1:   X_OFFSET=INC_X_END
:C:    Y_OFFSET=INC_Y_END
:C:    Z_OFFSET=INC_Z_END
:C:    X_POS=MACRO_H
:C:    Y_POS=MACRO_I
:C:    SAVE_ABS_Z=ABS_Z_END
:C:    ABS_Z_END=MACRO_J
:C:    IF SECTIONEXIST(MACRO_RAPID_CALL_MILL) THEN
:C:       IF SECTIONEXIST(MACRO_ROTATE_CALL_MILL) THEN
:C:           IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:           IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:           IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:           IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:              IF SECTIONEXIST(MACRO_ROTATE_FIRST_RAPID_CALL_MILL) THEN
:C:              CALL(MACRO_ROTATE_FIRST_RAPID_CALL_MILL)
:C:              ELSE
:C:              CALL(MACRO_FIRST_RAPID_CALL_MILL)
:C:              ENDIF
:C:           ELSE
:C:              IF SECTIONEXIST(MACRO_ROTATE_RAPID_CALL_MILL) THEN
:C:              CALL(MACRO_ROTATE_RAPID_CALL_MILL)
:C:              ELSE
:C:              CALL(MACRO_RAPID_CALL_MILL)
:C:              ENDIF
:C:           ENDIF
:C:       ELSE
:C:           IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:           CALL(MACRO_FIRST_RAPID_CALL_MILL)
:C:           ELSE
:C:           CALL(MACRO_RAPID_CALL_MILL)
:C:           ENDIF
:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(MACRO_ROTATE_CALL_MILL) THEN
:C:           IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:           IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:           IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:       CALL(MACRO_ROTATE_CALL_MILL)
:C:       ELSE
:C:       CALL(MACRO_CALL_MILL)
:C:       ENDIF
:C:    ENDIF
:C:    ABS_Z_END=SAVE_ABS_Z
:C:    MACH(REG_X)=(INC_X_END+MACRO_A)
:C:    MACH(REG_Y)=(INC_Y_END+MACRO_B)
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C:    MACH(REG_T2)=TOOL
*-----------------------------------
:SECTION=CALC_DO_MACRO_CALL_WORK_COORD_MILL
:C:    DEFINING_MACRO=NO
:C:    OPR_TYPE=MACRO_E
:C:    CALC_TIME=(CALC_TIME+MACRO_D)
:C:    IF MACH(REG_T2)<>0 AND MACH(REG_T2)=TOOL THEN GOTO1 ENDIF
:C:    IF MACH(REG_T2)=0 THEN
:C:    CALL(CALC_INIT_TOOL_CHANGE_MILL)
:C:    ELSE
:C:    CALL(CALC_SUB_TOOL_CHANGE_MILL)
:C:    ENDIF
:C1:   X_POS=MACRO_H
:C:    Y_POS=MACRO_I
:C:    SAVE_ABS_Z=ABS_Z_END
:C:    ABS_Z_END=MACRO_J
:C:    IF SECTIONEXIST(MACRO_CALL_WORK_COORD_RAPID) THEN
:C:        IF SECTIONEXIST(MACRO_ROTATE_CALL_MILL) THEN
:C:           IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:           IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:           IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:           IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:           CALL(MACRO_CALL_WORK_COORD_FIRST_RAPID)
:C:           ELSE
:C:           CALL(MACRO_CALL_WORK_COORD_RAPID)
:C:           ENDIF
:C:        ELSE
:C:           IF MACH(REG_Z)=MILL_Z_HOME THEN
:C:           CALL(MACRO_CALL_WORK_COORD_FIRST_RAPID)
:C:           ELSE
:C:           CALL(MACRO_CALL_WORK_COORD_RAPID)
:C:           ENDIF
:C:        ENDIF
:C:    ELSE
:C:        IF SECTIONEXIST(MACRO_ROTATE_CALL_MILL) THEN
:C:           IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:           IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:           IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:        CALL(MACRO_CALL_WORK_COORD_MILL)
:C:        ELSE
:C:        CALL(MACRO_CALL_WORK_COORD_MILL)
:C:        ENDIF
:C:    ENDIF
:C:    ABS_Z_END=SAVE_ABS_Z
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=NO ENDIF
:C:    MACH(REG_T2)=TOOL
*-----------------------------------
:SECTION=CALC_MULTIPLE_MACRO_CALL
:C: IF SECTIONEXIST(DEBUG) THEN
:C: DEBUG=10 CALL(DEBUG)
:C: ENDIF
:C:  IF SECTIONEXIST(MACRO_CALL_WORK_COORD_MILL) THEN
:C:    IF using_work_coord=1 THEN
:C:    CALL(CALC_DO_MULTIPLE_MACRO_CALL)
:C:    RETURN
:C:    ELSE
:C:    CALL(CALC_DO_MULTIPLE_MACRO_CALL_WORK_COORD)
:C:    RETURN
:C:    ENDIF
:C:  ENDIF
:C:  IF SECTIONEXIST(BEG_MACRO_MILL) THEN
:C:  CALL(CALC_DO_MULTIPLE_MACRO_CALL)
:C:  ENDIF
*
:SECTION=CALC_DO_MULTIPLE_MACRO_CALL
:C:    DEFINING_MACRO=NO
:C:    OPR_TYPE=MACRO_E
:C:    NUM_PARTS=(NUM_PARTS_X*NUM_PARTS_Y)
:C:    CALC_TIME=(CALC_TIME+(MACRO_D*NUM_PARTS))
:C:    IF MACH(REG_T2)<>0 AND MACH(REG_T2)=TOOL THEN GOTO5 ENDIF
:C:    IF MACH(REG_T2)=0 THEN
:C:    CALL(CALC_INIT_TOOL_CHANGE_MILL)
:C:    ELSE
:C:    CALL(CALC_SUB_TOOL_CHANGE_MILL)
:C:    ENDIF
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_X_MILL) THEN
:C:        IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:        IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:        IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:    ENDIF
:C5:    SUB_COUNT=0
:C:    X_OFFSET=INC_X_END
:C:    Y_OFFSET=INC_Y_END
:C:    Z_OFFSET=INC_Z_END
:C:    IF SECTIONEXIST(MULTIPLE_MACRO_CALL_MILL) THEN
:C:    CALL(MULTIPLE_MACRO_CALL_MILL) GOTO3
:C:    ENDIF
:C:    IF HORIZ_OR_VERT=VERTICAL THEN GOTO2 ENDIF
:C1:    CALL(CALC_MACRO_MULTIPLE_CALL_X_MILL)
:C:    SUB_COUNT=(SUB_COUNT+1)
:C:    IF SUB_COUNT=NUM_PARTS_Y THEN GOTO3 ENDIF
:C:    MACH(REG_X)=(INC_X_END+MACRO_A+(DIST_BET_PARTS_X*(NUM_PARTS_X-1)))
:C:    MACH(REG_Y)=(MACRO_B+INC_Y_END+(DIST_BET_PARTS_Y*(SUB_COUNT-1)))
:C:    X_OFFSET=INC_X_END
:C:    Y_OFFSET=(INC_Y_END+(DIST_BET_PARTS_Y*SUB_COUNT))
:C:    Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C:    GOTO1
:C2:   CALL(CALC_MACRO_MULTIPLE_CALL_Y_MILL)
:C:    SUB_COUNT=(SUB_COUNT+1)
:C:    IF SUB_COUNT=(NUM_PARTS_X-1) THEN GOTO3 ENDIF
:C:    MACH(REG_X)=(MACRO_A+INC_X_END+(DIST_BET_PARTS_X*(SUB_COUNT-1)))
:C:    MACH(REG_Y)=(INC_Y_END+MACRO_B+(DIST_BET_PARTS_Y*(NUM_PARTS_Y-1)))
:C:    X_OFFSET=(INC_X_END+(DIST_BET_PARTS_X*SUB_COUNT))
:C:    Y_OFFSET=INC_Y_END
:C:    Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C:    GOTO2
:C3:   IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C:    MACH(REG_X)=(INC_X_END+MACRO_A+(DIST_BET_PARTS_X*(NUM_PARTS_X-1)))
:C:    MACH(REG_Y)=(INC_Y_END+MACRO_B+(DIST_BET_PARTS_Y*(NUM_PARTS_Y-1)))
:C:    MACH(REG_T2)=TOOL
*
:SECTION=CALC_DO_MULTIPLE_MACRO_CALL_WORK_COORD
:C:    DEFINING_MACRO=NO
:C:    OPR_TYPE=MACRO_E
:C:    NUM_PARTS=(NUM_PARTS_X*NUM_PARTS_Y)
:C:    CALC_TIME=(CALC_TIME+(MACRO_D*NUM_PARTS))
:C:    IF MACH(REG_T2)<>0 AND MACH(REG_T2)=TOOL THEN GOTO5 ENDIF
:C:    IF MACH(REG_T2)=0 THEN
:C:    CALL(CALC_INIT_TOOL_CHANGE_MILL)
:C:    ELSE
:C:    CALL(CALC_SUB_TOOL_CHANGE_MILL)
:C:    ENDIF
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_X_MILL) THEN
:C:        IF MACRO_ROTATE_AXIS=X_AXIS THEN CALL(ROTATE_X) SAVE_ANGLE_X=ROTATE_ANGLE_X ENDIF
:C:        IF MACRO_ROTATE_AXIS=Y_AXIS THEN CALL(ROTATE_Y) SAVE_ANGLE_Y=ROTATE_ANGLE_Y ENDIF
:C:        IF MACRO_ROTATE_AXIS=Z_AXIS THEN CALL(ROTATE_Z) SAVE_ANGLE_Z=ROTATE_ANGLE_Z ENDIF
:C:    ENDIF
:C5:    SUB_COUNT=0
:C:    IF SECTIONEXIST(MULTIPLE_MACRO_CALL_MILL) THEN
:C:    CALL(MULTIPLE_MACRO_CALL_MILL) GOTO3
:C:    ENDIF
:C:    IF HORIZ_OR_VERT=VERTICAL THEN GOTO2 ENDIF
:C1:    CALL(CALC_MACRO_MULTIPLE_CALL_X_WORK_COORD_MILL)
:C:    SUB_COUNT=(SUB_COUNT+1)
:C:    IF SUB_COUNT=NUM_PARTS_Y THEN GOTO3 ENDIF
:C:    MACH(REG_X)=(MACRO_A+(DIST_BET_PARTS_X*(NUM_PARTS_X-1)))
:C:    MACH(REG_Y)=(MACRO_B+(DIST_BET_PARTS_Y*(SUB_COUNT-1)))
:C:    X_OFFSET=0
:C:    Y_OFFSET=0
:C:    Z_OFFSET=0
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=NO ENDIF
:C:    GOTO1
:C2:   CALL(CALC_MACRO_MULTIPLE_CALL_Y_WORK_COORD_MILL)
:C:    SUB_COUNT=(SUB_COUNT+1)
:C:    IF SUB_COUNT=(NUM_PARTS_X-1) THEN GOTO3 ENDIF
:C:    MACH(REG_X)=(MACRO_A+(DIST_BET_PARTS_X*(SUB_COUNT-1)))
:C:    MACH(REG_Y)=(MACRO_B+(DIST_BET_PARTS_Y*(NUM_PARTS_Y-1)))
:C:    X_OFFSET=(DIST_BET_PARTS_X*SUB_COUNT)
:C:    Y_OFFSET=0
:C:    Z_OFFSET=0
:C:    IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=NO ENDIF
:C:    GOTO2
:C3:   IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=NO ENDIF
:C:    MACH(REG_T2)=TOOL
*
:SECTION=CALC_MACRO_MULTIPLE_CALL_X_MILL
:C: IF NUM_PARTS_X=1 THEN CALL(MACRO_CALL_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_CALL_X_MILL) THEN
:C: CALL(MACRO_MULTIPLE_CALL_X_MILL) RETURN
:C: ENDIF
:C: LOOP=0
:C2: IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_X_MILL) THEN
:C: CALL(MACRO_MULTIPLE_ROTATE_CALL_X_MILL)
:C: ELSE
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_CALL_X_MILL) THEN
:C:    CALL(MACRO_MULTIPLE_CALL_X_MILL) RETURN
:C:    ENDIF
:C: ENDIF
:C: LOOP=(LOOP+1)
:C: IF LOOP=(NUM_PARTS_X) THEN RETURN ENDIF
:C: MACH(REG_X)=(INC_X_END+MACRO_A+(DIST_BET_PARTS_X*(LOOP-1)))
:C: MACH(REG_Y)=(MACRO_B+INC_Y_END+(DIST_BET_PARTS_Y*(SUB_COUNT-1)))
:C: X_OFFSET=(INC_X_END+(DIST_BET_PARTS_X*LOOP))
:C: Y_OFFSET=(INC_Y_END+(DIST_BET_PARTS_Y*SUB_COUNT))
:C: Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C: GOTO2
*
:SECTION=CALC_MACRO_MULTIPLE_CALL_X_WORK_COORD_MILL
:C: IF NUM_PARTS_X=1 THEN CALL(MACRO_CALL_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_CALL_X_WORK_COORD_MILL) THEN
:C: CALL(MACRO_MULTIPLE_CALL_X_WORK_COORD_MILL) RETURN
:C: ENDIF
:C: LOOP=0
:C2: IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_X_MILL) THEN
:C: CALL(MACRO_MULTIPLE_ROTATE_CALL_X_MILL)
:C: ELSE
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_CALL_X_MILL) THEN
:C:    CALL(MACRO_MULTIPLE_CALL_X_MILL)
:C:    ENDIF
:C: ENDIF
:C: LOOP=(LOOP+1)
:C: IF LOOP=(NUM_PARTS_X) THEN RETURN ENDIF
:C: MACH(REG_X)=(MACRO_A+(DIST_BET_PARTS_X*(LOOP-1)))
:C: MACH(REG_Y)=(MACRO_B+(DIST_BET_PARTS_Y*(SUB_COUNT-1)))
:C: X_OFFSET=(DIST_BET_PARTS_X*LOOP)
:C: Y_OFFSET=(DIST_BET_PARTS_Y*SUB_COUNT)
:C: Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C: GOTO2
*
:SECTION=CALC_MACRO_MULTIPLE_CALL_Y_MILL
:C: IF NUM_PARTS_Y=1 THEN CALL(MACRO_CALL_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_CALL_Y_MILL) THEN
:C: CALL(MACRO_MULTIPLE_CALL_Y_MILL) RETURN
:C: ENDIF
:C: LOOP=0
:C2: IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_Y_MILL) THEN
:C: CALL(MACRO_MULTIPLE_ROTATE_CALL_Y_MILL)
:C: ELSE
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_CALL_Y_MILL) THEN
:C:    CALL(MACRO_MULTIPLE_CALL_Y_MILL) RETURN
:C:    ENDIF
:C: ENDIF
:C: LOOP=(LOOP+1)
:C: IF LOOP=(NUM_PARTS_Y) THEN RETURN ENDIF
:C: MACH(REG_Y)=(INC_Y_END+MACRO_B+(DIST_BET_PARTS_Y*(LOOP-1)))
:C: MACH(REG_X)=(MACRO_A+INC_X_END+(DIST_BET_PARTS_X*(SUB_COUNT-1)))
:C: Y_OFFSET=(INC_Y_END+(DIST_BET_PARTS_Y*LOOP))
:C: X_OFFSET=(INC_X_END+(DIST_BET_PARTS_X*SUB_COUNT))
:C: Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C: GOTO2
*
:SECTION=CALC_MACRO_MULTIPLE_CALL_Y_WORK_COORD_MILL
:C: IF NUM_PARTS_Y=1 THEN CALL(MACRO_CALL_MILL) RETURN ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_CALL_Y_WORK_COORD_MILL) THEN
:C: CALL(MACRO_MULTIPLE_CALL_Y_MILL) RETURN
:C: ENDIF
:C: LOOP=0
:C2: IF INC_SUBPROGRAMS=NO THEN OFFSET_RESIDENT=YES ENDIF
:C: IF SECTIONEXIST(MACRO_MULTIPLE_ROTATE_CALL_Y_WORK_COORD_MILL) THEN
:C: CALL(MACRO_MULTIPLE_ROTATE_CALL_Y_WORK_COORD_MILL)
:C: ELSE
:C:    IF SECTIONEXIST(MACRO_MULTIPLE_CALL_Y_MILL) THEN
:C:    CALL(MACRO_MULTIPLE_CALL_Y_MILL)
:C:    ENDIF
:C: ENDIF
:C: LOOP=(LOOP+1)
:C: IF LOOP=(NUM_PARTS_Y) THEN RETURN ENDIF
:C: MACH(REG_Y)=(MACRO_B+(DIST_BET_PARTS_Y*(LOOP-1)))
:C: MACH(REG_X)=(MACRO_A+(DIST_BET_PARTS_X*(SUB_COUNT-1)))
:C: Y_OFFSET=(DIST_BET_PARTS_Y*LOOP)
:C: X_OFFSET=(DIST_BET_PARTS_X*SUB_COUNT)
:C: Z_OFFSET=(MACH(REG_Z)+INC_Z_END)
:C: GOTO2
*
*-----------------------------------
:SECTION=CALC_CHANGE_MILL_SPEED
*   Available in CW2011 or later versions.
*   This section will be called by CAMWorks automatically when you are IN Volumill
*   operation and the RPM changes.
*
:C: IF SECTIONEXIST(CHANGE_MILL_SPEED) THEN CALL(CHANGE_MILL_SPEED) ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_DWELL
*   Available in CW2011 or later versions.
*   This section will be called by CAMWorks automatically when you are IN Volumill
*   operation and a dwell is required.
*
:C: IF SECTIONEXIST(OUTPUT_DWELL) THEN CALL(OUTPUT_DWELL) ENDIF
*
*-----------------------------------
:SECTION=CALC_SET_PRE_POSITION_ROTARY_TYPE
*   this section will be called by CAMWorks automatically when you are prepositioning
*   only and set the 4th axis preposition output either ROT_TILT_A or ROT_TILT_B.
*   A wrapped feature will always be ROT_TILT_A. Setting this to ROTARY_TYPE_B will
*   support old preposition posts.
*
*   ROTARY_TYPE_A=4
*   ROTARY_TYPE_B=5
*
:C: FOURTH_AXIS_SELECTION=ROTARY_TYPE_B
:C: IF FOURTH_AXIS_SELECTION>3 AND FOURTH_AXIS_SELECTION<6 THEN
:C:    IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:    PRE_POSITION_ROTARY_TYPE=FOURTH_AXIS_SELECTION
:C:    ENDIF
:C: ENDIF
*
************ QUERY POST DATA *******************
:SECTION=CALC_QUERY_POST
:C: IF QUERY_ITEM_ID=QUERY_INT_ZERO_OFFSET_RADIUS THEN
:C: CALL(CALC_QUERY_INT_ZERO_OFFSET_RADIUS)
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_ABOVE THEN QUERY_INT_VAL=1 RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_BELOW THEN QUERY_INT_VAL=1 RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_DEFAULT_WCS THEN
:C:    IF SECTIONEXIST(QUERY_WCS) THEN
:C:    CALL(QUERY_WCS)
:C:    RETURN
:C:    ELSE
:C:    CALL(AUTO_QUERY_WCS)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_WCS THEN
:C:    IF SECTIONEXIST(QUERY_WCS) THEN
:C:    CALL(QUERY_WCS)
:C:    RETURN
:C:    ELSE
:C:    CALL(AUTO_QUERY_WCS)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_LENGTH_REG THEN QUERY_INT_VAL=TOOL RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_OFFSET_REG THEN CALL(CALC_QUERY_DIAM_OFFSET_REG) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T1A THEN CALL(QUERY_AXIS_NAMES_T1A) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T2A THEN CALL(QUERY_AXIS_NAMES_T2A) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T1B THEN CALL(QUERY_AXIS_NAMES_T1B) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T2B THEN CALL(QUERY_AXIS_NAMES_T2B) RETURN ENDIF
*
:SECTION=CALC_QUERY_DIAM_OFFSET_REG
:C: QUERY_INT_VAL=(TOOL+COMP_OFFSET)
:C: IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_TOOL THEN
:C:    QUERY_INT_VAL=TOOL_DIAM_OFFSET
:C: ENDIF
*
:SECTION=CALC_QUERY_INT_ZERO_OFFSET_RADIUS
* if this is needed to handle the Zero Offset Radius then copy this section to your library file
* and set NEVER_ZERO_OFFSET_RADIUS=1.
:C: IF NEVER_ZERO_OFFSET_RADIUS=0 THEN RETURN ENDIF
:C: QUERY_INT_VAL=0
*
*-------------------------------------------------
:SECTION=AUTO_QUERY_WCS
:T: IF MCS_TYPE=2 OR COORD_TYPE=0 THEN <G!:work_coord><EOL>ENDIF
:T: IF MCS_TYPE=3 AND work_coord=54 THEN <G!:work_coord><POINT_ONE><EOL>ENDIF
:T: IF MCS_TYPE=3 AND work_coord>54 THEN <G!:work_coord><EOL>ENDIF
:SECTION=QUERY_AXIS_NAMES_T1A
:T:X,Y,Z<EOL>
:SECTION=QUERY_AXIS_NAMES_T2A
:T:X,Y,Z<EOL>
:SECTION=QUERY_AXIS_NAMES_T1B
:T:X,Y,Z<EOL>
:SECTION=QUERY_AXIS_NAMES_T2B
:T:X,Y,Z<EOL>
*-------------------------------------------------
*
**************MODIFICATIONS*********************
*
*  Date             Section                  Initials     Fix Number
*===================================================================
* 1-05-93 | CALC_RAPID_MOVE_MILL                    | MLS        | #1
* 1-14-93 | CALC_INIT_TOOL_CHANGE_MILL              | MLS        | #2
* 1-14-93 | CALC_SUB_TOOL_CHANGE_MILL               | MLS        | #2
* 2-26-93 | CALC_LINE_MOVE_MILL                     | MLS        | #3 Five Axis
* 2-26-93 | CALC_FIVE_AXIS_LINE_MOVE_MILL           | MLS        | #3 Five Axis
* 3-15-93 | Added d_offset_reg to library           | MLS        | #4
* 3-23-93 | Added 5 Axis Sections to Library        | MLS        | #5 Five Axis
* 6-11-93 | Added LAST_PRELOAD to library           | MLS        | #6 Last Preload
* 10-4-93 | Added Rapid comp into library           | MLS        | #7
* 10-6-93 | Added Switch for "setup sheet"          | MLS        | #8
* 1-13-94 | Added Calc z preload section            | MLS        | #9
* 2-16-95 | Added percent at end of tape            | MLS        | #10
* 8-21-95 | Changed FIVE_AXIS=2222 was 6666         | MLS        | #11
* 9-12-95 | Added "display_tool_offset"             | MLS        | #12
* 11-22-95| Added "HOLD_Z_DOWN_FLAG"                | MLS        | #13
* 11-22-95| Added "HOLD_Z_DOWN"                     | MLS        | #14
* 11-22-95| Added "NO_SMALL_ARCS"                   | MLS        | #15
* 11-22-95| Added "ARC_ROUNDING_POINT"              | MLS        | #16
* 01-23-96| Added "x_base_angle"                    | MLS        | #17
* 01-23-96| Added "y_base_angle"                    | MLS        | #17
* 01-23-96| Added "x_included_angle"                | MLS        | #17
* 01-23-96| Added "y_included_angle"                | MLS        | #17
* 01-29-97| Added "limit axis"                      | MLS        | #18
* 01-30-97| Changed SECTION=CALC_ENDPOINT           | MLS        | #19
* 03-16-97| Changed calc feed sections              | MLS        | #20
* 07-08-97| Added LOCKON & LOCKOFF Attr.            | MLS        | #21
* 02-22-99| Added FASTLINE                          | MLS        | #22
* 08-02-06| Added g18, g19 arcs in CW2007           | MLS        | #23
* 08-02-06| Added support drill rapids              | MLS        | #24
* 08-02-06| Added CAMWORKS_MATERIAL                 | MLS        | #25
* 08-02-06| Added New System Section                | MLS        | #26
* 07-10-07| Added New Attribute                     | MLS        | #27
* 10-02-08| Changed long code pecking               | MLS        | #28
* 09-14-10| Added New System Section                | MLS        | #29
* 09-14-10| Added New System Section                | MLS        | #30
* 04-19-11| Added New Post Section                  | MLS        | #31
* 05-11-11| Changed CALC_EVERY_MOVE_MILL            | MLS        | #32
* 05-11-11| Changed CALC_ENDPOINT                   | MLS        | #32
* 06-20-11| Changed CALC_START_OPERATION            | MLS        | #33
* 09-02-11| Changed CALC_START_OF_TAPE              | MLS        | #34
* 09-14-11| Changed CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE |MLS      | #35
* 09-14-11| Changed CALC_FIVE_AXIS_RAPID_MOVE_MILL  | MLS        | #35
* 09-19-11| Changed CALC_ESTIMATE_DRILL_PECK_TIME   | MLS        | #36
* 08-21-12| Added New System Sections               | MLS        | #37
* 08-21-12| Changed location of MACH(REG_F)=0       | MLS        | #38
* 08-21-12| Changed CALC_LINE_MOVE_MILL             | MLS        | #39
* 08-21-12| Changed CALC_ROT_ANGLE_A                | MLS        | #40
* 08-21-12| Changed CALC_ROT_ANGLE_B                | MLS        | #41
* 06-27-13| Added CALC_PRE_POST_INITIALIZE          | MLS        | #42
* 11-18-13| Added INC_ROUNDOFF_A & INC_ROUNDOFF_B   | GAM        | #43
* 05-01-14| Added MAX_ARC_RADIUS post variable      | MLS        | #44
* 08-20-14| Added :SECTION=CALC_CW_ESTIMATED_MACHINE_TIME |MLS   | #45
*
*
* Fix #1 = Added "MACH(REG_Z)=MILL_Z_HOME"
*
* Fix #2 = Added attribute "FIRST_TOOL"
* Fix #2 = Added attribute "LAST_TOOL"
* Fix #2 = Added "FIRST_TOOL=TOOL" in "CALC_INIT_TOOL_CHANGE_MILL"
* Fix #2 = Added "LAST_TOOL=TOOL" in "CALC_INIT_TOOL_CHANGE_MILL"
* Fix #2 = Added "LAST_TOOL=TOOL" in "CALC_SUB_TOOL_CHANGE_MILL"
*
* Fix #3 = Added :DEFINE REG_VI=28
* Fix #3 = Added :DEFINE REG_VJ=29
* Fix #3 = Added :DEFINE REG_VK=30
* Fix #3 = Added :DEFINE RT_THX=6
* Fix #3 = Added :DEFINE RT_THY=18
* Fix #3 = Added :DEFINE RT_TTX=10
* Fix #3 = Added :DEFINE RT_TTY=34
* Fix #3 = Added :DEFINE RA_THX=11
* Fix #3 = Added attributes A,B,VI,VJ and VK
* Fix #3 = Added "CALC_FIVE_AXIS_LINE_MOVE_MILL" Section.
*
* Fix #4 = Added   :ATTRNAME=d offset reg - Integer attribute.
* Fix #4 = Changed :ATTRNAME=d offset - To a decimal attribute.
*
* Fix #5 = Added "CALC_FIVE_AXIS_RAPID_Z_DOWN" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_FIRST_RAPID_Z_DOWN" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_RAPID_Z_MOVE_UP" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_RAPID_MOVE_MILL" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_RAPID_TO_T_CHANGE" Section.
* Fix #5 = Added "CALC_FIVE_AXIS_FEED_Z_MOVE_DOWN" Section.
* Fix #5 = changed "CALC_RAPID_Z_DOWN_MILL" Section.
* Fix #5 = changed "CALC_RAPID_Z_UP_MILL" Section.
* Fix #5 = changed "CALC_RAPID_MOVE_MILL" Section.
* Fix #5 = changed "CALC_FEED_Z_MILL" Section.
*
* Fix #6 = changed "CALC_START_OF_TAPE" Section.
* Fix #6 = Added :ATTRNAME=LAST_PRELOAD.
*
* Fix #7 = changed "CALC_RAPID_MOVE_MILL" Section.
* Fix #7 = changed "CALC_RAPID_FROM_TOOL_CHANGE_MILL" Section.
* Fix #7 = changed "CALC_RAPID_TO_TOOL_CHANGE_MILL" Section.
* Fix #7 = changed "CALC_END_OPERATION" Section.
*
* Fix #8 = changed "CALC_RAPID_MOVE_MILL" Section.
*
* Fix #9 = changed "CALC_RAPID_Z_DOWN_MILL" Section.
* Fix #9 = changed "CALC_START_DRILL_CYCLE" Section.
* Fix #9 = added "CALC_FIRST_RAPID_Z_PRELOAD_DOWN_MILL" Section.
* Fix #10 = changed "CALC_END_OF_TAPE_MILL" Section.
* Fix #12 = Added :ATTRNAME=display tool offset for CAD FUNCTION.
*           This attribute should only be asked in PROFILE.
* Fix #13 = Added :ATTRNAME=HOLD_Z_DOWN_FLAG in case you did not
*           want the Z to move up between operations using the
*           same tool. This is set in the *.SRC file.
* Fix #14 = Added :ATTRNAME=HOLD_Z_DOWN This flag is set in this file
*           to keep the Z from moveing up between operations using the
*           same tool.
* Fix #15 = Added :ATTRNAME=NO_SMALL_ARCS in case you have a controller
*           that cannot handle real small arcs. This flag will be set
*           in the *.SRC file.
* Fix #16 = Added :ATTRNAME=ARC_ROUNDING_POINT If NO_SMALL_ARCS is set
*           to 1 then the rounding will be set to this ATTRIBUTE*2.
*           This will set in the *.SRC file
* Fix #17 = Added attribute "x_base_angle" For 5 axis limits
* Fix #17 = Added attribute "y_base_angle" For 5 axis limits
* Fix #17 = Added attribute "x_included_angle" For 5 axis limits
* Fix #17 = Added attribute "y_included_angle" For 5 axis limits
* Fix #18 = Added attribute "limit axis" For 5 & 4 axis limits. This is
*           used in conjunction with "x_included_angle" & "y_included_angle."
* Fix #19 = Changed SECTION=CALC_ENDPOINT to accomadate changing of "MCS"
*           You have to force out an "X" & "Y" move averytime a new "MCS"
*           is output.
* Fix #20 = Changed SECTION=CALC_ESTIMATE_MILL_Z_FEED_TIME to except either
*           IPR or IPM feedrate.
* Fix #20 = Changed SECTION=CALC_ESTIMATE_MACHINE_TIME to except either
*           IPR or IPM feedrate.
* Fix #21 = Added LOCKON & LOCKOFF attributes for 4th axis indexer support
*           Put these commands in the 5axis sections if needed.
* Fix #22 = Added FASTLINE in (CALC_START_OF_OPERATION) for fast posting in 3d.
*           Added attrnames FX, FY and FZ for FASTLINE output.
* Fix #23 = Added "max_arc_dev" attribute for arc break up deviation control.
*           Added SECTION=CALC_ARC_MOVE_MILL_ZX
*           Added SECTION=CALC_ARC_MOVE_MILL_YZ
*           Added SECTION=CALC_ARC_MOVE_MILL_ANYPLANE
*           Added SECTION=CALC_BREAK_ARC
* Fix #24   Added SECTION=CALC_ALLOW_RAPID_DURING_DRILL
*           Added RAPID_DURING attribute
* Fix #25   Added CAMWORKS_MATERIAL attribute for supporting automatic material
*           selection from CAMWorks stock dialog box. it will also set "material"
* Fix #26   Added :SECTION=CALC_SET_PRE_POSITION_ROTARY_TYPE, this will set the 4th
*           axis preposition output either ROT_TILT_A or ROT_TILT_B
* Fix #27   Added new attribute called "world coordinate" to handle turning on and off
*           Posted output of World Coordinates.
* Fix #28   Changed calc long code drill pecking to handle variable long code pecking
*
* Fix #29   Added :SECTION=CALC_CHANGE_MILL_SPEED, this will be called automatically
*           when you are in Volumill operation and the RPM changes.
*
* Fix #30   Added :SECTION=CALC_OUTPUT_DWELL, this will be called automatically
*           when you are in Volumill operation and a dwell is required.
*
* Fix #31   Added :SECTION=CALC_PREDATOR_TOOLLIST, this will output the Predator Header
*           When PREDATOR_HEADER=1 is set in the SRC file. Currrently we do not
*           Support all the necessary mill tool parameters. We support T,S,D,C,A
*           T=TOOL, S=TOOL_TYPE, D=TOOL_DIAMETER, C=TOOL_CORNER_RADIUS, A=TOOL_ANGLE.
*           H=FLUTE LENGTH, SD=SHANK DIAMETER, SH=SHANK HEIGHT and any of the holder
*           information we do not have. We force SD to equal the D and SH to zero
*
* Fix #32   Changed CALC_EVERY_MOVE_MILL and CALC_ENDPOINT to force Z if a work coordinate changed.
*           Currently we were only forcing X and Y when the work coordinate changed
*           and if you were not changing tools and the rapid plane was the same from
*           G54 to G55 then the Z would not be output, which in some cases caused
*           a feeding from large Z value. If your post library file currently
*           has CALC_ENDPOINT and or CALC_EVERY_MOVE_MILL in it then you will need to modify it to handle the
*           FORCE_XY and the FORCE_Z flags as you see in CALC_ENDPOINT and CALC_EVERY_MOVE_MILL in this file.
*
* Fix #32   Changed CALC_START_OPERATION for getting the coolant and length,diameter offset from the tool.
*
* Fix #34   Changed CALC_START_OF_TAPE Added :C: FIRST_Z_POS=0, this is to fix using rapid work coordinate
*           in Macro Calls.
*           Added FIRST_Z_POS post variable.
*           Added FIRST_Z_POS logic in CALC_RAPID_Z_DOWN_MACRO.
*
* Fix #35   Changed CALC_FIVE_AXIS_RAPID_MOVE_MILL and CALC_FIVE_AXIS_RAPID_FROM_T_CHANGE to handle
*           using CNC comp but no Leadin or Leadout entered when indexing the 4th and 5th axis.
*           Note: the SRC file will also need to include these sections for this to work.
*           5AXIS_RAPID_LEADOUT_MOVE_MILL
*           5AXIS_RAPID_LEADIN_FROM_TOOL_CHANGE_MILL
*           5AXIS_RAPID_LEADIN_MOVE_MILL
*
* Fix #36   Changed CALC_ESTIMATE_DRILL_PECK_TIME, currently this line was asterisked out
*           *:C: IF OPR_Z_SUB_PECK=0 THEN RETURN ENDIF, It was believed to be causing the posting system
*           to crash when a zero value was entered for Sub Peck in CW. I have unasterisked this line, so if
*           the estimated machine time for the posting is different when doing pecking then this could be
*           the cause.I also changed it to have a tolerance for this value.
*           :C: IF OPR_Z_SUB_PECK<.0001 THEN RETURN ENDIF
*
* Fix #37   Added :SECTION=CALC_QUERY_POST, for the new IMS Simulator support.
*           Added :SECTION=CALC_QUERY_DIAM_OFFSET_REG, for the new IMS Simulator support.
*           Added :SECTION=AUTO_QUERY_WCS, for the new IMS Simulator support.
*
* Fix #38   Changed locaton of MACH(REG_F)=0, from CALC_START_OPERATON to CALC_INIT_TOOL_CHANGE_MILL and
*           CALC_SUB_TOOL_CHANGE_MILL as it is not needed between operatons without tool change.
*
* Fix #39   Changed CALC_LINE_MOVE_MILL as below.
*           Previous line   :C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND LEADIN=YES THEN
*           New line :C: IF G_GROUP(GG(G_COMP_OFF))=GC(G_COMP_OFF) AND COMP<>GC(G_COMP_OFF) AND P_LEADIN=YES THEN
*           This is to handle if RAPID_LEADIN_MOVE sections are not present in SRC file and if you set the Ramp to
*           "Leadin only" at the depth parameters then no G41/G42 output.
*
* Fix #40   Changed CALC_ROT_ANGLE_A as below.
*           Previous line  :C: IF ABS(INC_ROT_TILT_A)<(ROUNDING_POINT*2) THEN SETOFF() RETURN ENDIF
*           New Line  :C: IF ABS(INC_ROT_TILT_A)<(ROUNDING_POINT*2) THEN SETOFF() DVAL=(MACH(REGISTER)) RETURN ENDIF
*
* Fix #41   Changed CALC_ROT_ANGLE_B as below.
*           Previous line  :C: IF ABS(INC_ROT_TILT_B)<(ROUNDING_POINT*2) THEN SETOFF() RETURN ENDIF
*           New Line  :C: IF ABS(INC_ROT_TILT_B)<(ROUNDING_POINT*2) THEN SETOFF() DVAL=(MACH(REGISTER)) RETURN ENDIF
*
* Fix #42   Added :SECTION=CALC_PRE_POST_INITIALIZE, for defining conventional or non conventional rotary axis labels.
*           You can also use this CALC secton to set any post variable before any other section gets called while posting.
*
* FIX #43   Added the ATTRNAMES INC_ROUNDOFF_A & INC_ROUNDOFF_B to account for very small incremental moves and appended
*           the INC_ROT_TILT_A & INC_ROT_TILT_B values to support new Virtual Machine Simulation. See the following sections
*           for more detail: INC_ROT_TILT_A & INC_ROT_TILT_B
*           :C: INC_ROUNDOFF_A=(INC_ROUNDOFF_A+INC_ROT_TILT_A)
*
* FIX #44   Added new post variable "MAX_ARC_RADIUS". This variable was added to check if the SYSTEM variable ARC_RADIUS is
*           greater than machine controllers limits and if it is then the arcs are broken into line moves. The default is set
*           to 9999 inches. If default is not correct for your machines controller then add this line :C: MAX_ARC_RADIUS=????
*           to your SRC file in CALC_INIT_CODES and change it to work for your controller. This logic was added in
*           CALC_ARC_MOVE_MILL,CALC_ARC_MOVE_MILL_ZX,CALC_ARC_MOVE_MILL_YZ and CALC_ARC_MOVE_MILL_ANYPLANE
*
* FIX #45   Added new post variable CW_TIME, CW_TIME_HOURS,CW_TIME_MINUTES,CW_TIME_SECONDS. This is to get the time from the
*           CW operation Statistics machine time.

